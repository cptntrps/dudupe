/*! For license information please see main.17bee793.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},47:e=>{var t={linear:function(e,t,n,r){return(n-t)*e/r+t},easeInQuad:function(e,t,n,r){return(n-t)*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-(n-t)*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return(n-t)*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-(n-t)*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var i=n-t;return-i*Math.cos(e/r*(Math.PI/2))+i+t},easeOutSine:function(e,t,n,r){return(n-t)*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-(n-t)/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0==e?t:(n-t)*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var i=n-t;return e==r?t+i:i*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){var i=n-t;return 0===e?t:e===r?t+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-(n-t)*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return(n-t)*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i,s,o,a=n-t;return o=1.70158,0===e?t:1===(e/=r)?t+a:((s=0)||(s=.3*r),(i=a)<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s)+t)},easeOutElastic:function(e,t,n,r){var i,s,o,a=n-t;return o=1.70158,0===e?t:1===(e/=r)?t+a:((s=0)||(s=.3*r),(i=a)<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*(2*Math.PI)/s)+a+t)},easeInOutElastic:function(e,t,n,r){var i,s,o,a=n-t;return o=1.70158,0===e?t:2===(e/=r/2)?t+a:((s=0)||(s=r*(.3*1.5)),(i=a)<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s)*.5+a+t)},easeInBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){var s=n-t;return void 0===i&&(i=1.70158),(e/=r/2)<1?s/2*(e*e*((1+(i*=1.525))*e-i))+t:s/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,n,r,i){var s=r-n;return s-t.easeOutBounce(i-e,0,s,i)+n},easeOutBounce:function(e,t,n,r){var i=n-t;return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,n,r,i){var s=r-n;return e<i/2?.5*t.easeInBounce(2*e,0,s,i)+n:.5*t.easeOutBounce(2*e-i,0,s,i)+.5*s+n}};e.exports=t},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=w.prototype=new v;_.constructor=w,m(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,E=Object.prototype.hasOwnProperty,k={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,O(E);else{var t=r(u);null!==t&&D(b,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(C),C=-1),f=!0;var s=p;try{for(_(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),_(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,T=!1,S=null,C=-1,I=5,x=-1;function A(){return!(t.unstable_now()-x<I)}function N(){if(null!==S){var e=t.unstable_now();x=e;var n=!0;try{n=S(!0,e)}finally{n?k():(T=!1,S=null)}}else T=!1}if("function"===typeof w)k=function(){w(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,k=function(){R.postMessage(null)}}else k=function(){y(N,0)};function O(e){S=e,T||(T=!0,k())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,D(b,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,O(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function q(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function V(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function B(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=B(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,ke=null,Te=null;function Se(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ee(e.stateNode,e.type,t))}}function Ce(e){ke?Te?Te.push(e):Te=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Te;if(Te=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==ke||null!==Te)&&(Ae(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,qe=!1,je=null,Ue={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function Be(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Et,kt,Tt,St,Ct=!1,It=[],xt=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function qt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){qt(e)&&n.delete(t)}function Ut(){Ct=!1,null!==xt&&qt(xt)&&(xt=null),null!==At&&qt(At)&&(At=null),null!==Nt&&qt(Nt)&&(Nt=null),Pt.forEach(jt),Rt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Wt=_.ReactCurrentBatchConfig,Ht=!0;function Bt(e,t,n,r){var i=wt,s=Wt.transition;Wt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,Wt.transition=s}}function Kt(e,t,n,r){var i=wt,s=Wt.transition;Wt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,Wt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(F({},pn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),_n=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return Tn}var Cn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Cn),xn=sn(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),qn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Bn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){qr(e,0)}function Yn(e){if(G(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Bn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Tr={};function Sr(e){if(kr[e])return kr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return kr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=Sr("animationend"),Ir=Sr("animationiteration"),xr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,qe||(qe=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function qr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(qe)throw e=je,qe=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Bt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Ir:case xr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Re(f,d))&&u.push(Br(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:_i(l),p=null==c?a:_i(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,vi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=d;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)d=Gr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Bn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,_r(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,w)).length&&(w=new _n(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Vn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,qn);case"textInput":return(e=t.data)===qn&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}qr(o,t)}))}function Br(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Br(e,s,i)),null!=(s=Re(e,t))&&r.push(Br(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Br(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Br(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[pi]||null}var Ei=[],ki=-1;function Ti(e){return{current:e}}function Si(e){0>ki||(e.current=Ei[ki],Ei[ki]=null,ki--)}function Ci(e,t){ki++,Ei[ki]=e.current,e.current=t}var Ii={},xi=Ti(Ii),Ai=Ti(!1),Ni=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ai),Si(xi)}function Di(e,t,n){if(xi.current!==Ii)throw Error(s(168));Ci(xi,t),Ci(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=xi.current,Ci(xi,e),Ci(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(xi),Ci(xi,e)):Si(Ai),Ci(Ai,n)}var qi=null,ji=!1,Ui=!1;function Vi(e){null===qi?qi=[e]:qi.push(e)}function zi(){if(!Ui&&null!==qi){Ui=!0;var e=0,t=wt;try{var n=qi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qi=null,ji=!1}catch(i){throw null!==qi&&(qi=qi.slice(e+1)),Ge(Ze,zi),i}finally{wt=t,Ui=!1}}return null}var Wi=[],Hi=0,Bi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){Wi[Hi++]=Ki,Wi[Hi++]=Bi,Bi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Bi;)Bi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Uc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&$i(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&$i(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=p(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Fc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var _s=ws(!0),bs=ws(!1),Es=Ti(null),ks=null,Ts=null,Ss=null;function Cs(){Ss=Ts=ks=null}function Is(e){var t=Es.current;Si(Es),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){ks=e,Ss=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===ks)throw Error(s(308));Ts=e,ks.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ql|=o,e.lanes=o,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Bs=Ti(Hs),Ks=Ti(Hs),Gs=Ti(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ci(Gs,t),Ci(Ks,e),Ci(Bs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Bs),Ci(Bs,t)}function Xs(){Si(Bs),Si(Ks),Si(Gs)}function Js(e){Qs(Gs.current);var t=Qs(Bs.current),n=le(t,e.type);t!==n&&(Ci(Ks,e),Ci(Bs,n))}function $s(e){Ks.current===e&&(Si(Bs),Si(Ks))}var Zs=Ti(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=_.ReactCurrentDispatcher,io=_.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=na,e=n(r,i)}while(uo)}if(ro.current=Zo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function _o(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,ql|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,ql|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function To(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Mo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,Co.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&so)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&Ao(e)}function Io(e,t,n){return n((function(){xo(t)&&Ao(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Ds(e,1);null!==t&&ic(t,e,1,-1)}function No(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Oo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Fo(e,t){return Do(4,2,e,t)}function qo(e,t){return Do(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,jo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,ql|=n,e.baseState=!0),t)}function Bo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Os(e,t,n,r))){ic(n,e,r,nc()),$o(n,t,r)}}function Qo(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(ic(n,e,r,i=nc()),$o(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Ns,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:No,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Bo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&so)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Io.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Pl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:Fo,useLayoutEffect:qo,useMemo:Wo,useReducer:bo,useRef:Ro,useState:function(){return bo(_o)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(wo(),ao.memoizedState,e)},useTransition:function(){return[bo(_o)[0],wo().memoizedState]},useMutableSource:ko,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:Fo,useLayoutEffect:qo,useMemo:Wo,useReducer:Eo,useRef:Ro,useState:function(){return Eo(_o)},useDebugValue:Vo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[Eo(_o)[0],wo().memoizedState]},useMutableSource:ko,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=qs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(ic(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=qs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(ic(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=qs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=js(e,i,r))&&(ic(t,e,r,n),Us(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function aa(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Ri(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Ri(t)?Ni:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=qs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),da(0,t)},n}function ma(e,t,n){(n=qs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qs(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=_.ReactCurrentOwner,_a=!1;function ba(e,t,n,r){t.child=null===e?bs(t,null,n,r):_s(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||_a?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Lc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ia(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ll,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ll,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ll,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ll,Dl),Dl|=r;return ba(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=Ri(n)?Ni:xi.current;return s=Pi(t,s),As(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||_a?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)Ba(e,t),aa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Pi(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&la(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,zs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ls?("function"===typeof u&&(ia(t,n,u,r),l=t.memoizedState),(a=Ls||oa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Pi(t,l=Ri(n)?Ni:xi.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,zs(t,r,o,i);var f=t.memoizedState;a!==h||d!==f||Ai.current||Ls?("function"===typeof p&&(ia(t,n,p,r),f=t.memoizedState),(c=Ls||oa(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Pa(e,t,n,r,i){return ps(),fs(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Oa,La,Ma,Fa={dehydrated:null,treeContext:null,retryLane:0};function qa(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=qc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qa(n),t.memoizedState=Fa,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=qc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&_s(t,e.child,null,a),t.child.memoizedState=qa(a),t.memoizedState=Fa,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),ic(r,e,i,-1))}return yc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Lc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?qa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=qc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&fs(r),_s(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Wa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wa(t,!0,n,null,s);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ql|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Qa(t),null;case 3:return r=t.stateNode,Xs(),Si(Ai),Si(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(lc(ss),ss=null))),Oa(e,t),Qa(t),null;case 5:$s(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Qa(t),null}if(e=Qs(Bs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Bs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Qa(t),null;case 13:if(Si(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),o=!1}else null!==ss&&(lc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ml&&(Ml=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return Xs(),Oa(e,t),null===e&&zr(t.stateNode.containerInfo),Qa(t),null;case 10:return Is(t.type._context),Qa(t),null;case 19:if(Si(Zs),null===(o=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Hl&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Qa(t),null}else 2*Je()-o.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Si(Ai),Si(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Si(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Zs),null;case 4:return Xs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Bs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,$a=!1,Za="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var rl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nl(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var dl=null,pl=!1;function fl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,t);case 6:var r=dl,i=pl;dl=null,fl(e,t,n),pl=i,null!==(dl=r)&&(pl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(pl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=pl,dl=n.stateNode.containerInfo,pl=!0,fl(e,t,n),dl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&nl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$a&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(e,t,n),$a=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,pl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(o,a,i),dl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),wl(e),4&r){try{il(3,e,e.return),sl(3,e)}catch(g){Cc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:yl(t,e),wl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),wl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Cc(e,e.return,g)}}break;case 6:if(yl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Cc(e,e.return,g)}}break;case 3:if(yl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:yl(t,e),wl(e);break;case 13:yl(t,e),wl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=Je())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,yl(t,e),$a=u):yl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(el=e,h=e.child;null!==h;){for(d=el=h;null!==el;){switch(f=(p=el).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:tl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){kl(d);continue}}null!==f?(f.return=p,el=f):kl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(t,e),wl(e),4&r&&gl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),hl(e,cl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,cl(e),o);break;default:throw Error(s(161))}}catch(Da){Cc(e,e.return,Da)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){el=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var i=el,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ja;var c=$a;if(Ja=o,($a=l)&&!c)for(el=i;null!==el;)l=(o=el).child,22===o.tag&&null!==o.memoizedState?Tl(i):null!==l?(l.return=o,el=l):Tl(i);for(;null!==s;)el=s,bl(s,t,n),s=s.sibling;el=i,Ja=a,$a=c}El(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,el=s):El(e)}}function El(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ws(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&ol(t)}catch(p){Cc(t,t.return,p)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function kl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function Tl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Da){Cc(t,n,Da)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Da){Cc(t,i,Da)}}var s=t.return;try{ol(t)}catch(Da){Cc(t,s,Da)}break;case 5:var o=t.return;try{ol(t)}catch(Da){Cc(t,o,Da)}}}catch(Da){Cc(t,t.return,Da)}if(t===e){el=null;break}var a=t.sibling;if(null!==a){a.return=t.return,el=a;break}el=t.return}}var Sl,Cl=Math.ceil,Il=_.ReactCurrentDispatcher,xl=_.ReactCurrentOwner,Al=_.ReactCurrentBatchConfig,Nl=0,Pl=null,Rl=null,Ol=0,Dl=0,Ll=Ti(0),Ml=0,Fl=null,ql=0,jl=0,Ul=0,Vl=null,zl=null,Wl=0,Hl=1/0,Bl=null,Kl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Nl)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===tc&&(tc=mt()),tc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(jl|=n),4===Ml&&cc(e,Ol)),sc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Hl=Je()+500,ji&&zi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pl?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),oi((function(){0===(6&Nl)&&zi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(ec=-1,tc=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Nl;Nl|=2;var o=gc();for(Pl===e&&Ol===t||(Bl=null,Hl=Je()+500,fc(e,t));;)try{_c();break}catch(l){mc(e,l)}Cs(),Il.current=o,Nl=i,null!==Rl?t=0:(Pl=null,Ol=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Fl,fc(e,0),cc(e,r),sc(e,Je()),n;if(6===t)cc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t))throw n=Fl,fc(e,0),cc(e,r),sc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kc(e,zl,Bl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Wl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,zl,Bl),t);break}kc(e,zl,Bl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,zl,Bl),r);break}kc(e,zl,Bl);break;default:throw Error(s(329))}}}return sc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&lc(t)),e}function lc(e){null===zl?zl=e:zl.push.apply(zl,e)}function cc(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Nl))throw Error(s(327));Tc();var t=dt(e,0);if(0===(1&t))return sc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Fl,fc(e,0),cc(e,t),sc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zl,Bl),sc(e,Je()),null}function hc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Hl=Je()+500,ji&&zi())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Nl)&&Tc();var t=Nl;Nl|=1;var n=Al.transition,r=wt;try{if(Al.transition=null,wt=1,e)return e()}finally{wt=r,Al.transition=n,0===(6&(Nl=t))&&zi()}}function pc(){Dl=Ll.current,Si(Ll)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Xs(),Si(Ai),Si(xi),no();break;case 5:$s(r);break;case 4:Xs();break;case 13:case 19:Si(Zs);break;case 10:Is(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Rl=e=Lc(e.current,null),Ol=Dl=t,Ml=0,Fl=null,Ul=jl=ql=0,zl=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function mc(e,t){for(;;){var n=Rl;try{if(Cs(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,xl.current=null,null===n||null===n.return){Ml=1,Fl=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ga(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),yc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),fs(ua(c,l));break e}}o=c=ua(c,l),4!==Ml&&(Ml=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ql||!Ql.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}Ec(n)}catch(_){t=_,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=Il.current;return Il.current=Zo,null===e?Zo:e}function yc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&ql)&&0===(268435455&jl)||cc(Pl,Ol)}function vc(e,t){var n=Nl;Nl|=2;var r=gc();for(Pl===e&&Ol===t||(Bl=null,fc(e,t));;)try{wc();break}catch(i){mc(e,i)}if(Cs(),Nl=n,Il.current=r,null!==Rl)throw Error(s(261));return Pl=null,Ol=0,Ml}function wc(){for(;null!==Rl;)bc(Rl)}function _c(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?Ec(e):Rl=t,xl.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ml=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ml&&(Ml=5)}function kc(e,t,n){var r=wt,i=Al.transition;try{Al.transition=null,wt=1,function(e,t,n,r){do{Tc()}while(null!==Xl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Rl=Pl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,(function(){return Tc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Al.transition,Al.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,xl.current=null,function(e,t){if(ei=Ht,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Jo){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++h===r&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ra(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(Jo){Cc(t,t.return,Jo)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),vl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Xe(),Nl=l,wt=a,Al.transition=o}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=i),o=e.pendingLanes,0===o&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Tc(),o=e.pendingLanes,0!==(1&o)?e===Zl?$l++:($l=0,Zl=e):$l=0,zi()}(e,t,n,r)}finally{Al.transition=i,wt=r}return null}function Tc(){if(null!==Xl){var e=_t(Jl),t=Al.transition,n=wt;try{if(Al.transition=null,wt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,el=e.current;null!==el;){var o=el,a=o.child;if(0!==(16&el.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var h=el;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,el=d;else for(;null!==el;){var p=(h=el).sibling,f=h.return;if(al(h),h===u){el=null;break}if(null!==p){p.return=f,el=p;break}el=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,el=a;else e:for(;null!==el;){if(0!==(2048&(o=el).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,el=v;break e}el=o.return}}var w=e.current;for(el=w;null!==el;){var _=(a=el).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,el=_;else e:for(a=w;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(E){Cc(l,l.return,E)}if(l===a){el=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,el=b;break e}el=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Al.transition=t}}return!1}function Sc(e,t,n){e=js(e,t=fa(0,t=ua(n,t),1),1),t=nc(),null!==e&&(yt(e,1,t),sc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=js(t,e=ma(t,e=ua(n,e),1),1),e=nc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ol&n)===n&&(4===Ml||3===Ml&&(130023424&Ol)===Ol&&500>Je()-Wl?fc(e,0):Ul|=n),sc(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Ds(e,t))&&(yt(e,t,n),sc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xc(e,n)}function Pc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Fc(n.children,i,o,t);case T:a=8,i|=8;break;case S:return(e=Oc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return qc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case I:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function qc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Wc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Hc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Wc(null),n=e.current,(s=qs(r=nc(),i=rc(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=nc(),o=rc(i);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=qs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=js(i,t,o))&&(ic(e,i,o,s),Us(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Na(t),ps();break;case 5:Js(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ka(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var i=Pi(t,xi.current);As(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=ka(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_s(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=qs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ns(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),ka(e,t,r,i=ra(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),Ba(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,As(t,n),aa(t,r,i),ca(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}Bc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Hc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=o,e[fi]=o.current,zr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[fi]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Bc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Jc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Bc(null,e,null,null)})),t[fi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Je()),0===(6&Nl)&&(Hl=Je()+500,zi()))}break;case 13:dc((function(){var t=Ds(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}})),Qc(e,1)}},Et=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ic(t,e,134217728,nc());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=rc(e),n=Ds(e,t);if(null!==n)ic(n,e,t,nc());Qc(e,t)}},Tt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=hc,Ae=dc;var nu={usingClientEntryPoint:!1,Events:[wi,_i,bi,Ce,Ie,hc]},ru={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Be(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(iu),st=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Be(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){tu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),o=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,f=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){f=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:f,location:_.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(a({},u.state,{idx:g}),""));let _={get action(){return f},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,v),m=e,()=>{s.removeEventListener(l,v),m=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;let i=d(_.location,e,t);n&&n(i,e),g=y()+1;let a=h(i,g),l=_.createHref(i);try{u.pushState(a,"",l)}catch(Ng){if(Ng instanceof DOMException&&"DataCloneError"===Ng.name)throw Ng;s.location.assign(l)}o&&m&&m({action:f,location:_.location,delta:1})},replace:function(e,t){f=r.Replace;let i=d(_.location,e,t);n&&n(i,e),g=y();let s=h(i,g),a=_.createHref(i);u.replaceState(s,"",a),o&&m&&m({action:f,location:_.location,delta:0})},go:e=>u.go(e)};return _}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=R(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let s=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=P(i);o=A(s[a],e,r)}return o}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=_(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,E=3,k=2,T=1,S=10,C=-2,I=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=C),t&&(r+=k),n.filter((e=>!I(e))).reduce(((e,t)=>e+(b.test(t)?E:""===t?T:S)),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:F([s,u.pathname]),pathnameBase:q(F([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return o}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Ng){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ng+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=D(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:j(r),hash:U(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const F=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],W=(new Set(z),["get",...z]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const B=i.createContext(null);const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function J(){return null!=i.useContext(Q)}function $(){return J()||c(!1),i.useContext(Q).location}function Z(e){i.useContext(G).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(Y);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=he(le.UseNavigateStable),n=i.useRef(!1);return Z((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t])}():function(){J()||c(!1);let e=i.useContext(B),{basename:t,future:n,navigator:r}=i.useContext(G),{matches:s}=i.useContext(Y),{pathname:o}=$(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return Z((()=>{l.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=M(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function te(e,t,n,s){J()||c(!1);let{navigator:o}=i.useContext(G),{matches:a}=i.useContext(Y),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=$();if(t){var m;let e="string"===typeof t?f(t):t;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||c(!1),d=e}else d=p;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let _=oe(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&_?i.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},_):_}function ne(){let e=function(){var e;let t=i.useContext(X),n=ue(le.UseRouteError),r=he(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const re=i.createElement(ne,null);class ie extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Y.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(B);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Y.Provider,{value:t},r)}function oe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,c=!1,d=null,p=null;var f;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||re,u&&(h<0&&0===s?(f="route-fallback",!1||de[f]||(de[f]=!0),c=!0,p=null):h===s&&(c=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:c?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(se,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ie,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=i.useContext(B);return t||c(!1),t}function ue(e){let t=i.useContext(K);return t||c(!1),t}function he(e){let t=function(){let e=i.useContext(Y);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const de={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function fe(e){let{to:t,replace:n,state:r,relative:s}=e;J()||c(!1);let{future:o,static:a}=i.useContext(G),{matches:l}=i.useContext(Y),{pathname:u}=$(),h=ee(),d=M(t,L(l,o.v7_relativeSplatPath),u,"path"===s),p=JSON.stringify(d);return i.useEffect((()=>h(JSON.parse(p),{replace:n,state:r,relative:s})),[h,p,s,n,r]),null}function me(e){c(!1)}function ge(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1,future:u}=e;J()&&c(!1);let h=t.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:h,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,w=i.useMemo((()=>{let e=R(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:o}}),[h,p,m,g,y,v,o]);return null==w?null:i.createElement(G.Provider,{value:d},i.createElement(Q.Provider,{children:n,value:w}))}function ye(e){let{children:t,location:n}=e;return te(ve(t),n)}new Promise((()=>{}));i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}var we=n(950),_e=n.t(we,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(xb){}new Map;const be=s.startTransition;_e.flushSync,s.useId;function Ee(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},f=i.useCallback((e=>{h&&be?be((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>l.listen(f)),[l,f]),i.useEffect((()=>pe(r)),[r]),i.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ce(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function Ie(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ne=!1,Pe=function(){Ne},Re=function(){Ne};const Oe=new class{constructor(){this.storageKey="lulearn_progress",this.version="1.0",this.initializeProgress()}initializeProgress(){const e=localStorage.getItem(this.storageKey);if(e)try{this.progress=JSON.parse(e),this.progress.version!==this.version?this.migrateProgress():this.ensureRequiredProperties()}catch(Ng){console.warn("Failed to parse stored progress, resetting:",Ng),this.resetProgress()}else this.resetProgress()}ensureRequiredProperties(){this.progress.exercisePerformance||(this.progress.exercisePerformance={}),this.progress.dailyStats||(this.progress.dailyStats={}),this.progress.achievements||(this.progress.achievements=[]),this.progress.user||(this.progress.user={totalXP:0,currentStreak:0,longestStreak:0,lastActiveDate:null,totalLessonsCompleted:0,totalExercisesCompleted:0,overallAccuracy:0,createdDate:(new Date).toISOString(),level:1}),this.progress.languages||(this.progress.languages={}),this.saveProgress()}resetProgress(){this.progress={version:this.version,user:{totalXP:0,currentStreak:0,longestStreak:0,lastActiveDate:null,totalLessonsCompleted:0,totalExercisesCompleted:0,overallAccuracy:0,createdDate:(new Date).toISOString(),level:1},languages:{},achievements:[],dailyStats:{},exercisePerformance:{}},this.saveProgress()}migrateProgress(){console.log("Migrating progress from version",this.progress.version,"to",this.version),this.progress.exercisePerformance||(this.progress.exercisePerformance={}),this.progress.dailyStats||(this.progress.dailyStats={}),this.progress.achievements||(this.progress.achievements=[]),this.progress.version=this.version,this.saveProgress()}saveProgress(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.progress))}catch(Ng){console.error("Failed to save progress:",Ng)}}getLanguageProgress(e){return this.progress.languages[e]||(this.progress.languages[e]={name:e,totalXP:0,lessonsCompleted:[],currentLesson:null,overallAccuracy:0,timeSpent:0,startDate:(new Date).toISOString()},this.saveProgress()),this.progress.languages[e]}completeLesson(e,t,n,r,i){console.log("=== COMPLETE LESSON DEBUG ==="),console.log("Input:",{languageId:e,lessonId:t,xpEarned:n,accuracy:r,timeSpent:i}),console.log("Before completion - user stats:",this.progress.user);const s=this.getLanguageProgress(e);console.log("Language progress before:",s);const o={lessonId:t,completedAt:(new Date).toISOString(),xpEarned:n,accuracy:r,timeSpent:i},a=s.lessonsCompleted.findIndex((e=>e.lessonId===t));a>=0?(console.log("Updating existing lesson completion at index:",a),s.lessonsCompleted[a]=o):(console.log("Adding new lesson completion"),s.lessonsCompleted.push(o),this.progress.user.totalLessonsCompleted++,console.log("totalLessonsCompleted incremented to:",this.progress.user.totalLessonsCompleted));const l=this.progress.user.totalXP;return s.totalXP+=n,this.progress.user.totalXP+=n,console.log("XP updated from",l,"to",this.progress.user.totalXP),this.updateAccuracy(e,r),console.log("Accuracy updated to:",this.progress.user.overallAccuracy),s.timeSpent+=i,this.updateStreak(),console.log("Streak updated to:",this.progress.user.currentStreak),this.updateLevel(),console.log("Level updated to:",this.progress.user.level),this.recordDailyStats(n),this.checkAchievements(e,t,r),console.log("After completion - user stats:",this.progress.user),console.log("Language progress after:",s),this.saveProgress(),console.log("=== END COMPLETE LESSON DEBUG ==="),o}updateAccuracy(e,t){const n=this.getLanguageProgress(e),r=n.lessonsCompleted;if(r.length>0){const e=r.reduce(((e,t)=>e+t.accuracy),0);n.overallAccuracy=Math.round(e/r.length)}const i=Object.values(this.progress.languages);if(i.length>0){const e=i.reduce(((e,t)=>e+t.overallAccuracy*t.lessonsCompleted.length),0),t=i.reduce(((e,t)=>e+t.lessonsCompleted.length),0);this.progress.user.overallAccuracy=t>0?Math.round(e/t):0}}updateLevel(){const e=this.progress.user.totalXP,t=Math.floor(Math.sqrt(e/50))+1;this.progress.user.level=Math.max(t,1)}updateStreak(){const e=(new Date).toDateString(),t=this.progress.user.lastActiveDate;if(t){const n=new Date(t).toDateString(),r=new Date(Date.now()-864e5).toDateString();if(n===e)return;n===r?this.progress.user.currentStreak++:this.progress.user.currentStreak=1}else this.progress.user.currentStreak=1;this.progress.user.currentStreak>this.progress.user.longestStreak&&(this.progress.user.longestStreak=this.progress.user.currentStreak),this.progress.user.lastActiveDate=e}recordDailyStats(e){const t=(new Date).toDateString();this.progress.dailyStats[t]||(this.progress.dailyStats[t]={date:t,xpEarned:0,lessonsCompleted:0,exercisesCompleted:0,timeSpent:0}),this.progress.dailyStats[t].xpEarned+=e,this.progress.dailyStats[t].lessonsCompleted++}recordExercisePerformance(e,t,n){this.progress.exercisePerformance||(this.progress.exercisePerformance={}),this.progress.exercisePerformance[e]||(this.progress.exercisePerformance[e]={total:0,correct:0,averageTime:0,accuracy:0});const r=this.progress.exercisePerformance[e];r.total++,t&&r.correct++,r.accuracy=Math.round(r.correct/r.total*100),r.averageTime=(r.averageTime*(r.total-1)+n)/r.total,this.progress.user.totalExercisesCompleted++,this.saveProgress()}checkAchievements(e,t,n){const r=[];1===this.progress.user.totalLessonsCompleted&&r.push({id:"first_lesson",name:"First Steps",description:"Complete your first lesson",icon:"\ud83c\udf1f",earnedAt:(new Date).toISOString()}),100===n&&r.push({id:"perfect_".concat(t),name:"Perfect Lesson",description:"Got 100% accuracy in a lesson",icon:"\ud83d\udcaf",earnedAt:(new Date).toISOString()});const i=this.progress.user.currentStreak;3===i?r.push({id:"streak_3",name:"3-Day Streak",description:"Practice for 3 days in a row",icon:"\ud83d\udd25",earnedAt:(new Date).toISOString()}):7===i&&r.push({id:"streak_7",name:"Week Warrior",description:"Practice for 7 days in a row",icon:"\u26a1",earnedAt:(new Date).toISOString()});return this.progress.user.totalXP>=100&&!this.hasAchievement("xp_100")&&r.push({id:"xp_100",name:"XP Collector",description:"Earn 100 XP total",icon:"\ud83d\udc8e",earnedAt:(new Date).toISOString()}),r.forEach((e=>{this.hasAchievement(e.id)||this.progress.achievements.push(e)})),r}hasAchievement(e){return this.progress.achievements.some((t=>t.id===e))}isLessonCompleted(e,t){return this.getLanguageProgress(e).lessonsCompleted.some((e=>e.lessonId===t))}getLessonCompletion(e,t){return this.getLanguageProgress(e).lessonsCompleted.find((e=>e.lessonId===t))}getUserStats(){return{totalXP:this.progress.user.totalXP||0,currentStreak:this.progress.user.currentStreak||0,longestStreak:this.progress.user.longestStreak||0,lessonsCompleted:this.progress.user.totalLessonsCompleted||0,averageAccuracy:this.progress.user.overallAccuracy||0,totalTimeSpent:Object.values(this.progress.languages).reduce(((e,t)=>e+(t.timeSpent||0)),0),level:this.progress.user.level||1,languages:Object.keys(this.progress.languages).length,achievements:this.progress.achievements.length,recentAchievements:this.progress.achievements.slice(-3)}}getLanguageStats(e){return this.getLanguageProgress(e)}getExerciseStats(){return this.progress.exercisePerformance}exportProgress(){return JSON.stringify(this.progress,null,2)}importProgress(e){try{return this.progress=JSON.parse(e),this.saveProgress(),!0}catch(Ng){return console.error("Failed to import progress:",Ng),!1}}clearAllProgress(){return!!window.confirm("Are you sure you want to clear all progress? This cannot be undone.")&&(localStorage.removeItem(this.storageKey),this.initializeProgress(),!0)}getDefaultProgress(){return{languages:{},globalStats:{totalXP:0,currentStreak:0,longestStreak:0,lessonsCompleted:0,totalTimeSpent:0,averageAccuracy:0,lastStudyDate:null},achievements:[],exerciseStats:{},dailyStats:{},version:this.version}}syncWithCloudData(e){if(!e||"object"!==typeof e)return console.warn("Invalid cloud progress data"),!1;try{const t={languages:Ae({},this.progress.languages),globalStats:Ae({},this.progress.user),achievements:[...this.progress.achievements],exerciseStats:Ae({},this.progress.exercisePerformance),dailyStats:Ae({},this.progress.dailyStats),version:this.version};if(e.languages&&Object.keys(e.languages).forEach((n=>{const r=e.languages[n],i=t.languages[n]||{lessons:{},totalXP:0,lessonsCompleted:0,lastStudiedAt:null},s=Ae({},i.lessons);r.lessons&&Object.keys(r.lessons).forEach((e=>{const t=r.lessons[e],n=s[e];!n||t.lastCompletedAt>n.lastCompletedAt?s[e]=t:n&&t.bestAccuracy>n.bestAccuracy&&(s[e]=Ae(Ae({},n),{},{bestAccuracy:t.bestAccuracy}))})),t.languages[n]={lessons:s,totalXP:Math.max(i.totalXP,r.totalXP||0),lessonsCompleted:Math.max(i.lessonsCompleted,r.lessonsCompleted||0),lastStudiedAt:i.lastStudiedAt&&r.lastStudiedAt?Math.max(i.lastStudiedAt,r.lastStudiedAt):i.lastStudiedAt||r.lastStudiedAt||null}})),e.globalStats){const n=e.globalStats;t.globalStats={totalXP:Math.max(t.globalStats.totalXP,n.totalXP||0),currentStreak:Math.max(t.globalStats.currentStreak,n.currentStreak||0),longestStreak:Math.max(t.globalStats.longestStreak,n.longestStreak||0),lessonsCompleted:Math.max(t.globalStats.lessonsCompleted,n.lessonsCompleted||0),totalTimeSpent:Math.max(t.globalStats.totalTimeSpent,n.totalTimeSpent||0),averageAccuracy:Math.max(t.globalStats.averageAccuracy,n.averageAccuracy||0),lastStudyDate:t.globalStats.lastStudyDate&&n.lastStudyDate?Math.max(t.globalStats.lastStudyDate,n.lastStudyDate):t.globalStats.lastStudyDate||n.lastStudyDate||null}}if(e.achievements&&Array.isArray(e.achievements)){const n=new Set(t.achievements.map((e=>"".concat(e.type||"general","-").concat(e.id))));e.achievements.forEach((e=>{const r="".concat(e.type||"general","-").concat(e.id);n.has(r)||t.achievements.push(e)}))}return this.progress.languages=t.languages,this.progress.user=t.globalStats,this.progress.achievements=t.achievements,this.progress.exercisePerformance=t.exerciseStats,this.progress.dailyStats=t.dailyStats,this.saveProgress(),console.log("Successfully synced with cloud data"),!0}catch(Ng){return console.error("Error syncing with cloud data:",Ng),!1}}},De=Oe,Le=!1,Me=!1,Fe="${JSCORE_VERSION}",qe=function(e,t){if(!e)throw je(t)},je=function(e){return new Error("Firebase Database ("+Fe+") INTERNAL ASSERT FAILED: "+e)},Ue=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ue(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ze;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const We=function(e){const t=Ue(e);return Ve.encodeByteArray(t,!0)},He=function(e){return We(e).replace(/\./g,"")},Be=function(e){try{return Ve.decodeString(e,!0)}catch(xb){console.error("base64Decode failed: ",xb)}return null};function Ke(e){return Ge(void 0,e)}function Ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ge(e[n],t[n]));return e}function Qe(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ye=()=>{try{return Qe().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(xb){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(xb){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(xb))}},Xe=e=>{var t,n;return null===(n=null===(t=Ye())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Je=e=>{const t=Xe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$e=()=>{var e;return null===(e=Ye())||void 0===e?void 0:e.config},Ze=e=>{var t;return null===(t=Ye())||void 0===t?void 0:t["_".concat(e)]};class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function tt(e){return e.endsWith(".cloudworkstations.dev")}async function nt(e){return(await fetch(e,{credentials:"include"})).ok}function rt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(s)),""].join(".")}const it={};let st=!1;function ot(e,t){if("undefined"===typeof window||"undefined"===typeof document||!tt(window.location.host)||it[e]===t||it[e]||st)return;function n(e){return"__firebase__banner__".concat(e)}it[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(it))it[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{st=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function at(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function lt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function ct(){var e;const t=null===(e=Ye())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(xb){return!1}}function ut(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ht(){return!0===Le||!0===Me}function dt(){return!ct()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pt(){try{return"object"===typeof indexedDB}catch(xb){return!1}}class ft extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}}class mt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(gt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ft(n,s,t)}}const gt=/\{\$([^}]+)}/g;function yt(e){return JSON.parse(e)}function vt(e){return JSON.stringify(e)}const wt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=yt(Be(s[0])||""),n=yt(Be(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(xb){}return{header:t,claims:n,data:r,signature:i}};function _t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Et(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function kt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Tt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(St(n)&&St(s)){if(!Tt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function St(e){return null!==e&&"object"===typeof e}function Ct(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function It(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class At{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Nt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Pt),void 0===r.error&&(r.error=Pt),void 0===r.complete&&(r.complete=Pt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(xb){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(xb){"undefined"!==typeof console&&console.error&&console.error(xb)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Pt(){}function Rt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Ot=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Dt(e){return e&&e._delegate?e._delegate:e}class Lt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Mt="[DEFAULT]";class Ft{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new et;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(xb){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(xb){if(r)return null;throw xb}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Mt})}catch(xb){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(xb){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Mt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;return this.component?this.component.multipleInstances?e:Mt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ft(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const jt=[];var Ut;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ut||(Ut={}));const Vt={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},zt=Ut.INFO,Wt={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},Ht=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Wt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Bt{constructor(e){this.name=e,this._logLevel=zt,this._logHandler=Ht,this._userLogHandler=null,jt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ut))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Vt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}let Kt,Gt;const Qt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,$t=new WeakMap;let Zt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function en(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gt||(Gt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(rn(this),n),nn(Qt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nn(e.apply(rn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(rn(this),t,...r);return Xt.set(s,t.sort?t.sort():[t]),nn(s)}}function tn(e){return"function"===typeof e?en(e):(e instanceof IDBTransaction&&function(e){if(Yt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Yt.set(e,t)}(e),t=e,(Kt||(Kt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Zt):e);var t}function nn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(nn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Qt.set(t,e)})).catch((()=>{})),$t.set(t,e),t}(e);if(Jt.has(e))return Jt.get(e);const t=tn(e);return t!==e&&(Jt.set(e,t),$t.set(t,e)),t}const rn=e=>$t.get(e);const sn=["get","getKey","getAll","getAllKeys","count"],on=["put","add","delete","clear"],an=new Map;function ln(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(an.get(t))return an.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=on.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!sn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return an.set(t,s),s}Zt=(e=>Ae(Ae({},e),{},{get:(t,n,r)=>ln(t,n)||e.get(t,n,r),has:(t,n)=>!!ln(t,n)||e.has(t,n)}))(Zt);class cn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const un="@firebase/app",hn="0.13.1",dn=new Bt("@firebase/app"),pn="@firebase/app-compat",fn="@firebase/analytics-compat",mn="@firebase/analytics",gn="@firebase/app-check-compat",yn="@firebase/app-check",vn="@firebase/auth",wn="@firebase/auth-compat",_n="@firebase/database",bn="@firebase/data-connect",En="@firebase/database-compat",kn="@firebase/functions",Tn="@firebase/functions-compat",Sn="@firebase/installations",Cn="@firebase/installations-compat",In="@firebase/messaging",xn="@firebase/messaging-compat",An="@firebase/performance",Nn="@firebase/performance-compat",Pn="@firebase/remote-config",Rn="@firebase/remote-config-compat",On="@firebase/storage",Dn="@firebase/storage-compat",Ln="@firebase/firestore",Mn="@firebase/ai",Fn="@firebase/firestore-compat",qn="firebase",jn="[DEFAULT]",Un={[un]:"fire-core",[pn]:"fire-core-compat",[mn]:"fire-analytics",[fn]:"fire-analytics-compat",[yn]:"fire-app-check",[gn]:"fire-app-check-compat",[vn]:"fire-auth",[wn]:"fire-auth-compat",[_n]:"fire-rtdb",[bn]:"fire-data-connect",[En]:"fire-rtdb-compat",[kn]:"fire-fn",[Tn]:"fire-fn-compat",[Sn]:"fire-iid",[Cn]:"fire-iid-compat",[In]:"fire-fcm",[xn]:"fire-fcm-compat",[An]:"fire-perf",[Nn]:"fire-perf-compat",[Pn]:"fire-rc",[Rn]:"fire-rc-compat",[On]:"fire-gcs",[Dn]:"fire-gcs-compat",[Ln]:"fire-fst",[Fn]:"fire-fst-compat",[Mn]:"fire-vertex","fire-js":"fire-js",[qn]:"fire-js-all"},Vn=new Map,zn=new Map,Wn=new Map;function Hn(e,t){try{e.container.addComponent(t)}catch(xb){dn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),xb)}}function Bn(e){const t=e.name;if(Wn.has(t))return dn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Wn.set(t,e);for(const n of Vn.values())Hn(n,e);for(const n of zn.values())Hn(n,e);return!0}function Kn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Gn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Qn=new mt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Yn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Xn="11.9.0";function Jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:jn,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(n||(n=$e()),!n)throw Qn.create("no-options");const s=Vn.get(i);if(s){if(Tt(n,s.options)&&Tt(r,s.config))return s;throw Qn.create("duplicate-app",{appName:i})}const o=new qt(i);for(const l of Wn.values())o.addComponent(l);const a=new Yn(n,r,o);return Vn.set(i,a),a}function $n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn;const t=Vn.get(e);if(!t&&e===jn&&$e())return Jn();if(!t)throw Qn.create("no-app",{appName:e});return t}function Zn(e,t,n){var r;let i=null!==(r=Un[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void dn.warn(e.join(" "))}Bn(new Lt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const er="firebase-heartbeat-store";let tr=null;function nr(){return tr||(tr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=nn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(nn(o.result),e.oldVersion,e.newVersion,nn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(er)}catch(xb){console.warn(xb)}}}).catch((e=>{throw Qn.create("idb-open",{originalErrorMessage:e.message})}))),tr}async function rr(e,t){try{const n=(await nr()).transaction(er,"readwrite"),r=n.objectStore(er);await r.put(t,ir(e)),await n.done}catch(xb){if(xb instanceof ft)dn.warn(xb.message);else{const t=Qn.create("idb-set",{originalErrorMessage:null===xb||void 0===xb?void 0:xb.message});dn.warn(t.message)}}}function ir(e){return"".concat(e.name,"!").concat(e.options.appId)}class sr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ar(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=or();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(xb){dn.warn(xb)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=or(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),lr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=He(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(xb){return dn.warn(xb),""}}}function or(){return(new Date).toISOString().substring(0,10)}class ar{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!pt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ng){t(Ng)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await nr()).transaction(er),n=await t.objectStore(er).get(ir(e));return await t.done,n}catch(xb){if(xb instanceof ft)dn.warn(xb.message);else{const t=Qn.create("idb-get",{originalErrorMessage:null===xb||void 0===xb?void 0:xb.message});dn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function lr(e){return He(JSON.stringify({version:2,heartbeats:e})).length}var cr;cr="",Bn(new Lt("platform-logger",(e=>new cn(e)),"PRIVATE")),Bn(new Lt("heartbeat",(e=>new sr(e)),"PRIVATE")),Zn(un,hn,cr),Zn(un,hn,"esm2017"),Zn("fire-js","");function ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function hr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dr=hr,pr=new mt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fr=new Bt("@firebase/auth");function mr(e){if(fr.logLevel<=Ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fr.error("Auth (".concat(Xn,"): ").concat(e),...n)}}function gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _r(e,...n)}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _r(e,...n)}function vr(e,t,n){const r=Object.assign(Object.assign({},dr()),{[t]:n});return new mt("auth","Firebase",r).create(t,{appName:e.name})}function wr(e){return vr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return pr.create(e,...n)}function br(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _r(t,...r)}}function Er(e){const t="INTERNAL ASSERTION FAILED: "+e;throw mr(t),new Error(t)}function kr(e,t){e||Er(t)}function Tr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ir(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class xr{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=lt()||ut()}get(){return Ir()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ar(e,t){kr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Nr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Rr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Or=new xr(3e4,6e4);function Dr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Lr(e,t,n,r){return Mr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ct(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&tt(e.emulatorConfig.host)&&(l.credentials="include"),Nr.fetch()(await qr(e,e.config.apiHost,n,o),l)}))}async function Mr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pr),t);try{const t=new Ur(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Vr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Vr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Vr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw vr(e,a,o);gr(e,a)}}catch(xb){if(xb instanceof ft)throw xb;gr(e,"network-request-failed",{message:String(xb)})}}async function Fr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Lr(e,t,n,r,i);return"mfaPendingCredential"in s&&gr(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function qr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Ar(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Rr.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function jr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ur{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(yr(this.auth,"network-request-failed"))),Or.get())}))}}function Vr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yr(e,t,r);return i.customData._tokenResponse=n,i}function zr(e){return void 0!==e&&void 0!==e.enterprise}class Wr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hr(e,t){return Lr(e,"GET","/v2/recaptchaConfig",Dr(e,t))}async function Br(e,t){return Lr(e,"POST","/v1/accounts:lookup",t)}function Kr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(xb){}}function Gr(e){return 1e3*Number(e)}function Qr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return mr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(mr("Failed to decode base64 JWT payload"),null)}catch(xb){return mr("Caught error parsing JWT payload as JSON",null===xb||void 0===xb?void 0:xb.toString()),null}}function Yr(e){const t=Qr(e);return br(t,"internal-error"),br("undefined"!==typeof t.exp,"internal-error"),br("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Xr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(xb){throw xb instanceof ft&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(xb)&&e.auth.currentUser===e&&await e.auth.signOut(),xb}}class Jr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(xb){return void((null===xb||void 0===xb?void 0:xb.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $r{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Xr(e,Br(n,{idToken:r}));br(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ei(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $r(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function ei(e){return e.map((e=>{var{providerId:t}=e,n=ur(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){br(e.idToken,"internal-error"),br("undefined"!==typeof e.idToken,"internal-error"),br("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Yr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){br(0!==e.length,"internal-error");const t=Yr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(br(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Mr(e,{},(async()=>{const n=Ct({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await qr(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Nr.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ti;return n&&(br("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(br("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(br("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ti,this.toJSON())}_performRefresh(){return Er("not implemented")}}function ni(e,t){br("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ri{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ur(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $r(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Xr(this,this.stsTokenManager.getToken(this.auth,e));return br(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Dt(e),r=await n.getIdToken(t),i=Qr(r);br(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kr(Gr(i.auth_time)),issuedAtTime:Kr(Gr(i.iat)),expirationTime:Kr(Gr(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Dt(e);await Zr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(br(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){br(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await Xr(this,async function(e,t){return Lr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:_,providerData:b,stsTokenManager:E}=t;br(v&&E,e,"internal-error");const k=ti.fromJSON(this.name,E);br("string"===typeof v,e,"internal-error"),ni(u,e.name),ni(h,e.name),br("boolean"===typeof w,e,"internal-error"),br("boolean"===typeof _,e,"internal-error"),ni(d,e.name),ni(p,e.name),ni(f,e.name),ni(m,e.name),ni(g,e.name),ni(y,e.name);const T=new ri({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(T.providerData=b.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ti;r.updateFromServerResponse(t);const i=new ri({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Zr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];br(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ei(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new ti;o.updateFromIdToken(n);const a=new ri({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new $r(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ii=new Map;function si(e){kr(e instanceof Function,"Expected a class definition");let t=ii.get(e);return t?(kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ii.set(e,t),t)}class oi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oi.type="NONE";const ai=oi;function li(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ci{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=li(this.userKey,r.apiKey,i),this.fullPersistenceKey=li("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Br(this.auth,{idToken:e}).catch((()=>{}));return t?ri._fromGetAccountInfoResponse(this.auth,t,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ci(si(ai),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||si(ai);const s=li(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Br(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await ri._fromGetAccountInfoResponse(e,r,t)}else n=ri._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ci(i,e,n)):new ci(i,e,n)}}function ui(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gi(t))return"Blackberry";if(yi(t))return"Webos";if(di(t))return"Safari";if((t.includes("chrome/")||pi(t))&&!t.includes("edge/"))return"Chrome";if(mi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/firefox\//i.test(e)}function di(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:at()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/crios\//i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/iemobile/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/android/i.test(e)}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/blackberry/i.test(e)}function yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/webos/i.test(e)}function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wi(){return function(){const e=at();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function _i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();return vi(e)||mi(e)||yi(e)||gi(e)||/windows phone/i.test(e)||fi(e)}function bi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ui(at());break;case"Worker":t="".concat(ui(at()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Xn,"/").concat(r)}class Ei{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(xb){r(xb)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(xb){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===xb||void 0===xb?void 0:xb.message})}}}class ki{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ti{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new Ei(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ci.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(xb){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Br(this,{idToken:e}),n=await ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(xb){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(xb)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return br(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(xb){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zr(e)}catch(xb){if((null===xb||void 0===xb?void 0:xb.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(wr(this));const t=e?Dt(e):null;return t&&br(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&br(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Gn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(wr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(si(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Lr(e,"GET","/v2/passwordPolicy",Dr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ki(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Lr(e,"POST","/v2/accounts:revokeToken",Dr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&si(e)||this._popupRedirectResolver;br(t,this,"argument-error"),this.redirectPersistenceManager=await ci.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(br(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return br(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(fr.logLevel<=Ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fr.warn("Auth (".concat(Xn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Si(e){return Dt(e)}class Ci{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Nt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return br(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ii={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xi(e){return Ii.loadJS(e)}function Ai(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ni{constructor(){this.enterprise=new Pi}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Pi{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ri="NO_RECAPTCHA";class Oi{constructor(e){this.type="recaptcha-enterprise",this.auth=Si(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;zr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Ri)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ni).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Hr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Wr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&zr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ii.recaptchaEnterpriseScript;0!==t.length&&(t+=i),xi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Di(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Oi(e);let o;if(i)o=Ri;else try{o=await s.verify(n)}catch(Ng){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Li(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Di(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Di(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Di(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Di(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Di(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Mi(e){const t=Si(e),n=await Hr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Wr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Oi(t).verify()}}function Fi(e,t,n){const r=Si(e);br(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=qi(t),{host:o,port:a}=function(e){const t=qi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ji(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ji(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return br(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void br(Tt(c,r.config.emulator)&&Tt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,tt(o)?(nt("".concat(s,"//").concat(o).concat(l)),ot("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function qi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ji(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ui{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,t){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function Vi(e,t){return Lr(e,"POST","/v1/accounts:signUp",t)}async function zi(e,t){return Fr(e,"POST","/v1/accounts:signInWithPassword",Dr(e,t))}class Wi extends Ui{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Wi(e,t,"password")}static _fromEmailAndCode(e,t){return new Wi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Li(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",zi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Fr(e,"POST","/v1/accounts:signInWithEmailLink",Dr(e,t))}(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Li(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Fr(e,"POST","/v1/accounts:signInWithEmailLink",Dr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Hi(e,t){return Fr(e,"POST","/v1/accounts:signInWithIdp",Dr(e,t))}class Bi extends Ui{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ur(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Bi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Hi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Hi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Hi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ct(t)}return e}}async function Ki(e,t){return Lr(e,"POST","/v1/accounts:sendVerificationCode",Dr(e,t))}const Gi={USER_NOT_FOUND:"user-not-found"};class Qi extends Ui{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Fr(e,"POST","/v1/accounts:signInWithPhoneNumber",Dr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Fr(e,"POST","/v1/accounts:signInWithPhoneNumber",Dr(e,t));if(n.temporaryProof)throw Vr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Fr(e,"POST","/v1/accounts:signInWithPhoneNumber",Dr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Gi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Yi{constructor(e){var t,n,r,i,s,o;const a=It(xt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);br(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=It(xt(e)).link,n=t?It(xt(t)).deep_link_id:null,r=It(xt(e)).deep_link_id;return(r?It(xt(r)).link:null)||r||n||t||e}(e);try{return new Yi(t)}catch(n){return null}}}class Xi{constructor(){this.providerId=Xi.PROVIDER_ID}static credential(e,t){return Wi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Yi.parseLink(t);return br(n,"argument-error"),Wi._fromEmailAndCode(e,n.code,n.tenantId)}}Xi.PROVIDER_ID="password",Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ji{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $i extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zi extends $i{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zi.credential(t.oauthAccessToken)}catch(n){return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Zi.PROVIDER_ID="facebook.com";class es extends $i{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return es.credential(n,r)}catch(i){return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com",es.PROVIDER_ID="google.com";class ts extends $i{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ts.credential(t.oauthAccessToken)}catch(n){return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com",ts.PROVIDER_ID="github.com";class ns extends $i{constructor(){super("twitter.com")}static credential(e,t){return Bi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ns.credential(n,r)}catch(i){return null}}}async function rs(e,t){return Fr(e,"POST","/v1/accounts:signUp",Dr(e,t))}ns.TWITTER_SIGN_IN_METHOD="twitter.com",ns.PROVIDER_ID="twitter.com";class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ri._fromIdTokenResponse(e,n,r),s=ss(n);return new is({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ss(n);return new is({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ss(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class os extends ft{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,os.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new os(e,t,n,r)}}function as(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw os._fromErrorAndOperation(e,n,t,r);throw n}))}async function ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Xr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return is._forOperation(e,"link",r)}async function cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Gn(r.app))return Promise.reject(wr(r));const i="reauthenticate";try{const s=await Xr(e,as(r,i,t,e),n);br(s.idToken,r,"internal-error");const o=Qr(s.idToken);br(o,r,"internal-error");const{sub:a}=o;return br(e.uid===a,r,"user-mismatch"),is._forOperation(e,i,s)}catch(xb){throw(null===xb||void 0===xb?void 0:xb.code)==="auth/".concat("user-not-found")&&gr(r,"user-mismatch"),xb}}async function us(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Gn(e.app))return Promise.reject(wr(e));const r="signIn",i=await as(e,r,t),s=await is._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function hs(e,t){return us(Si(e),t)}async function ds(e){const t=Si(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ps(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Dt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Xr(i,async function(e,t){return Lr(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function fs(e,t){return Lr(e,"POST","/v2/accounts/mfaEnrollment:start",Dr(e,t))}new WeakMap;const ms="__sak";class gs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ms,"1"),this.storage.removeItem(ms),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ys extends gs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_i(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);wi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ys.type="LOCAL";const vs=ys;function ws(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function _s(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class bs{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=_s(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ws(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=_s(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=_s(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ws(n);const i=setInterval((()=>{const e=ws(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}bs.type="COOKIE";class Es extends gs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Es.type="SESSION";const ks=Es;class Ts{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ts(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ts.receivers=[];class Cs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ss("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Is(){return window}function xs(){return"undefined"!==typeof Is().WorkerGlobalScope&&"function"===typeof Is().importScripts}const As="firebaseLocalStorageDb",Ns="firebaseLocalStorage",Ps="fbase_key";class Rs{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Os(e,t){return e.transaction([Ns],t?"readwrite":"readonly").objectStore(Ns)}function Ds(){const e=indexedDB.open(As,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ns,{keyPath:Ps})}catch(xb){n(xb)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ns)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(As);return new Rs(e).toPromise()}(),t(await Ds()))}))}))}async function Ls(e,t,n){const r=Os(e,!0).put({[Ps]:t,value:n});return new Rs(r).toPromise()}function Ms(e,t){const n=Os(e,!0).delete(t);return new Rs(n).toPromise()}class Fs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ds()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(xb){if(t++>3)throw xb;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ts._getInstance(xs()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Cs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ds();return await Ls(e,ms,"1"),await Ms(e,ms),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ls(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Os(e,!1).get(t),r=await new Rs(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ms(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Os(e,!1).getAll();return new Rs(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fs.type="LOCAL";const qs=Fs;function js(e,t){return Lr(e,"POST","/v2/accounts/mfaSignIn:start",Dr(e,t))}Ai("rcb"),new xr(3e4,6e4);const Us="recaptcha";async function Vs(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Mi(e)}catch(Ng){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){br("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Li(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ri){br((null===n||void 0===n?void 0:n.type)===Us,e,"argument-error");return fs(e,await zs(e,t,n))}return fs(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{br("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;br(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Li(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ri){br((null===n||void 0===n?void 0:n.type)===Us,e,"argument-error");return js(e,await zs(e,t,n))}return js(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Li(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Ri){br((null===n||void 0===n?void 0:n.type)===Us,e,"argument-error");return Ki(e,await zs(e,t,n))}return Ki(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function zs(e,t,n){br(n.type===Us,e,"argument-error");const r=await n.verify();br("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ws{constructor(e){this.providerId=Ws.PROVIDER_ID,this.auth=Si(e)}verifyPhoneNumber(e,t){return Vs(this.auth,e,Dt(t))}static credential(e,t){return Qi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ws.credentialFromTaggedObject(t)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qi._fromTokenResponse(n,r):null}}function Hs(e,t){return t?si(t):(br(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ws.PROVIDER_ID="phone",Ws.PHONE_SIGN_IN_METHOD="phone";class Bs extends Ui{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Hi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ks(e){return us(e.auth,new Bs(e),e.bypassAuthState)}function Gs(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),cs(n,new Bs(e),e.bypassAuthState)}async function Qs(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),ls(n,new Bs(e),e.bypassAuthState)}class Ys{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(xb){this.reject(xb)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(xb){this.reject(xb)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ks;case"linkViaPopup":case"linkViaRedirect":return Qs;case"reauthViaPopup":case"reauthViaRedirect":return Gs;default:gr(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xs=new xr(2e3,1e4);class Js extends Ys{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return br(e,this.auth,"internal-error"),e}async onExecution(){kr(1===this.filter.length,"Popup operations only handle one event");const e=Ss();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(yr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Xs.get())};e()}}Js.currentPopupAction=null;const $s=new Map;class Zs extends Ys{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=$s.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=no(t),r=to(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(xb){e=()=>Promise.reject(xb)}$s.set(this.auth._key(),e)}return this.bypassAuthState||$s.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function eo(e,t){$s.set(e._key(),t)}function to(e){return si(e._redirectPersistence)}function no(e){return li("pendingRedirect",e.config.apiKey,e.name)}async function ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Gn(e.app))return Promise.reject(wr(e));const r=Si(e),i=Hs(r,t),s=new Zs(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class io{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!oo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(so(e))}saveEventToCache(e){this.cachedEventUids.add(so(e)),this.lastProcessedEventTime=Date.now()}}function so(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function oo(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ao=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lo=/^https?/;async function co(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Lr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(uo(r))return}catch(n){}gr(e,"unauthorized-domain")}function uo(e){const t=Tr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!lo.test(n))return!1;if(ao.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ho=new xr(3e4,6e4);function po(){const e=Is().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fo(e){return new Promise(((t,n)=>{var r,i,s;function o(){po(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{po(),n(yr(e,"network-request-failed"))},timeout:ho.get()})}if(null===(i=null===(r=Is().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Is().gapi)||void 0===s?void 0:s.load)){const t=Ai("iframefcb");return Is()[t]=()=>{gapi.load?o():n(yr(e,"network-request-failed"))},xi("".concat(Ii.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw mo=null,e}))}let mo=null;const go=new xr(5e3,15e3),yo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wo(e){const t=e.config;br(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ar(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Xn},i=vo.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ct(r).slice(1))}async function _o(e){const t=await function(e){return mo=mo||fo(e),mo}(e),n=Is().gapi;return br(n,e,"internal-error"),t.open({where:document.body,url:wo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=yr(e,"network-request-failed"),s=Is().setTimeout((()=>{r(i)}),go.get());function o(){Is().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const bo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Eo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(xb){}}}function ko(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bo),{width:r.toString(),height:i.toString(),top:s,left:o}),c=at().toLowerCase();n&&(a=pi(c)?"_blank":n),hi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return vi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:at())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Eo(null);const h=window.open(t||"",a,u);br(h,e,"popup-blocked");try{h.focus()}catch(xb){}return new Eo(h)}const To="__/auth/handler",So="emulator/auth/handler",Co=encodeURIComponent("fac");async function Io(e,t,n,r,i,s){br(e.config.authDomain,e,"auth-domain-config-required"),br(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xn,eventId:i};if(t instanceof Ji){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Et(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof $i){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Co,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(To);return Ar(t,So)}(e),"?").concat(Ct(a).slice(1)).concat(c)}const xo="webStorageSupport";const Ao=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=ro,this._overrideRedirectResult=eo}async _openPopup(e,t,n,r){var i;kr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ko(e,await Io(e,t,n,Tr(),r),Ss())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Is().location.href=e}(await Io(e,t,n,Tr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(kr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _o(e),n=new io(e);return t.register("authEvent",(t=>{br(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xo,{type:xo},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[xo];void 0!==i&&t(!!i),gr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=co(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _i()||di()||vi()}};var No="@firebase/auth",Po="1.10.6";class Ro{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){br(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Oo=Ze("authIdTokenMaxAge")||300;let Do=null;var Lo,Mo;Lo={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=yr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ii=Lo,Mo="Browser",Bn(new Lt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;br(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Mo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bi(Mo)},c=new Ti(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(si);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Bn(new Lt("auth-internal",(e=>(e=>new Ro(e))(Si(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(No,Po,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Mo)),Zn(No,Po,"esm2017");var Fo,qo,jo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Uo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=p*g,f(n,2*i+2*s),n[2*i+2*s+1]+=l*g,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*m,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,qo=Uo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Fo=Uo.Integer=r}).apply("undefined"!==typeof jo?jo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Vo,zo,Wo,Ho,Bo,Ko,Go,Qo,Yo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Yo&&Yo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function T(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(P)}};var P=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){k(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),q=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++q,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=W(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),B={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function J(e){return e in B?B[e]:B[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;b(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function we(){O.call(this,"c")}h(ve,O),h(we,O);var _e={},be=null;function Ee(){return be=be||new ne}function ke(e){O.call(this,_e.La,e)}function Te(e){const t=Ee();re(t,new ke(t))}function Se(e,t){O.call(this,_e.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Ee();re(t,new Se(t,e))}function Ie(e,t){O.call(this,_e.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_e.La="serverreachability",h(ke,O),_e.STAT_EVENT="statevent",h(Se,O),_e.Ma="timingevent",h(Ie,O),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,fe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Pe=new De;var Fe={},qe={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),We(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qe:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?qe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function Be(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){Be(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Xt(n)}rn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Be(a),We(a)),r.g=o}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Te()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Bt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Bt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Te(),Be(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Bt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ge(this),Ke(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==qe){4==d&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ce(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ce(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ne(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=Bt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),Ke(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ce(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,wt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,_t)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,_t=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){Et(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=Ct(e,t),e.g.has(t)}function St(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function It(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new pe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(xb){throw t.push(r+"type="+encodeURIComponent("_badmap")),xb}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){Et(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,fe),Nt.prototype.g=function(){return new Pt(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var qt=/^https?$/i,jt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Wt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Bt(e)||2!=e.Z()))if(e.u&&4==Bt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!qt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Bt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(xb){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Bt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}hn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Xt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||N(),x||(I(),x=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{At(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||N(),x||(I(),x=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ie(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(It,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(It,n,"TestLoadImage: error",!1,t,r),r.onabort=u(It,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(It,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),It(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?It(0,0,!0,t):It(0,0,!1,t)})).catch((()=>{clearTimeout(r),It(0,0,!1,t)}))}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Nt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Xt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,fn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Qo=Xo.createWebChannelTransport=function(){return new mn},Go=Xo.getStatEventTarget=function(){return Ee()},Ko=Xo.Event=_e,Bo=Xo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Ho=Xo.ErrorCode=Re,Oe.COMPLETE="complete",Wo=Xo.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,zo=Xo.WebChannel=ge,Xo.FetchXmlHttpFactory=Nt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Vo=Xo.XhrIo=Ft}).apply("undefined"!==typeof Yo?Yo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Jo="@firebase/firestore",$o="4.7.17";class Zo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zo.UNAUTHENTICATED=new Zo(null),Zo.GOOGLE_CREDENTIALS=new Zo("google-credentials-uid"),Zo.FIRST_PARTY=new Zo("first-party-uid"),Zo.MOCK_USER=new Zo("mock-user");let ea="11.9.0";const ta=new Bt("@firebase/firestore");function na(){return ta.logLevel}function ra(e){if(ta.logLevel<=Ut.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oa);ta.debug("Firestore (".concat(ea,"): ").concat(e),...i)}}function ia(e){if(ta.logLevel<=Ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oa);ta.error("Firestore (".concat(ea,"): ").concat(e),...i)}}function sa(e){if(ta.logLevel<=Ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oa);ta.warn("Firestore (".concat(ea,"): ").concat(e),...i)}}function oa(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function aa(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,la(e,r,n)}function la(e,t,n){let r="FIRESTORE (".concat(ea,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ia(r),new Error(r)}function ca(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||la(t,i,r)}function ua(e,t){return e}const ha={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class da extends ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class pa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class fa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ma{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zo.UNAUTHENTICATED)))}shutdown(){}}class ga{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ya{constructor(e){this.t=e,this.currentUser=Zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ca(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ra("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ra("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ra("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ca("string"==typeof t.accessToken,31837,{l:t}),new fa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ca(null===e||"string"==typeof e,2055,{h:e}),new Zo(e)}}class va{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Zo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new va(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _a{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ba{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ca(void 0===this.o,3512);const n=e=>{null!=e.error&&ra("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ra("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ra("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ra("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _a(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ca("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new _a(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ea(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function ka(){return new TextEncoder}class Ta{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ea(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Sa(e,t){return e<t?-1:e>t?1:0}function Ca(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Sa(r,i);{const s=ka(),o=xa(s.encode(Ia(e,n)),s.encode(Ia(t,n)));return 0!==o?o:Sa(r,i)}}n+=r>65535?2:1}return Sa(e.length,t.length)}function Ia(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function xa(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Sa(e[n],t[n]);return Sa(e.length,t.length)}function Aa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Na=-62135596800,Pa=1e6;class Ra{static now(){return Ra.fromMillis(Date.now())}static fromDate(e){return Ra.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Pa);return new Ra(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new da(ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new da(ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Na)throw new da(ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new da(ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pa}_compareTo(e){return this.seconds===e.seconds?Sa(this.nanoseconds,e.nanoseconds):Sa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Na;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Oa{static fromTimestamp(e){return new Oa(e)}static min(){return new Oa(new Ra(0,0))}static max(){return new Oa(new Ra(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Da="__name__";class La{constructor(e,t,n){void 0===t?t=0:t>e.length&&aa(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&aa(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===La.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=La.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Sa(e.length,t.length)}static compareSegments(e,t){const n=La.isNumericId(e),r=La.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?La.extractNumericId(e).compare(La.extractNumericId(t)):Ca(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class Ma extends La{construct(e,t,n){return new Ma(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new da(ha.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ma(e)}static emptyPath(){return new Ma([])}}const Fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qa extends La{construct(e,t,n){return new qa(e,t,n)}static isValidIdentifier(e){return Fa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Da}static keyField(){return new qa([Da])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new da(ha.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new da(ha.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new da(ha.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new da(ha.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qa(t)}static emptyPath(){return new qa([])}}class ja{constructor(e){this.path=e}static fromPath(e){return new ja(Ma.fromString(e))}static fromName(e){return new ja(Ma.fromString(e).popFirst(5))}static empty(){return new ja(Ma.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ma.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ma.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ja(new Ma(e.slice()))}}const Ua=-1;class Va{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Va.UNKNOWN_ID=-1;function za(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Oa.fromTimestamp(1e9===r?new Ra(n+1,0):new Ra(n,r));return new Ha(i,ja.empty(),t)}function Wa(e){return new Ha(e.readTime,e.key,Ua)}class Ha{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ha(Oa.min(),ja.empty(),Ua)}static max(){return new Ha(Oa.max(),ja.empty(),Ua)}}function Ba(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ja.comparator(e.documentKey,t.documentKey),0!==n?n:Sa(e.largestBatchId,t.largestBatchId))}const Ka="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ga{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qa(e){if(e.code!==ha.FAILED_PRECONDITION||e.message!==Ka)throw e;ra("LocalStore","Unexpectedly lost primary lease")}class Ya{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&aa(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ya(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ya?t:Ya.resolve(t)}catch(e){return Ya.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ya.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ya.reject(t)}static resolve(e){return new Ya(((t,n)=>{t(e)}))}static reject(e){return new Ya(((t,n)=>{n(e)}))}static waitFor(e){return new Ya(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ya.resolve(!1);for(const n of e)t=t.next((e=>e?Ya.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ya(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ya(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Xa(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(e){return"IndexedDbTransactionError"===e.name}class $a{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}$a.le=-1;const Za=-1;function el(e){return null==e}function tl(e){return 0===e&&1/e==-1/0}function nl(e){return"number"==typeof e&&Number.isInteger(e)&&!tl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const rl="\x01";function il(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ol(t)),t=sl(e.get(n),t);return ol(t)}function sl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case rl:n+="\x01\x11";break;default:n+=t}}return n}function ol(e){return e+rl+"\x01"}const al="remoteDocuments",ll="owner",cl="mutationQueues",ul="mutations";const hl="documentMutations",dl="remoteDocumentsV14",pl="remoteDocumentGlobal",fl="targets",ml="targetDocuments",gl="targetGlobal",yl="collectionParents",vl="clientMetadata",wl="bundles",_l="namedQueries",bl="indexConfiguration",El="indexState",kl="indexEntries",Tl="documentOverlays",Sl="globals",Cl=[cl,ul,hl,al,fl,ll,gl,ml,vl,pl,yl,wl,_l],Il=[cl,ul,hl,dl,fl,ll,gl,ml,vl,pl,yl,wl,_l,Tl],xl=Il,Al=[...xl,bl,El,kl];function Nl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ol{constructor(e,t){this.comparator=e,this.root=t||Ll.EMPTY}insert(e,t){return new Ol(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ll.BLACK,null,null))}remove(e){return new Ol(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ll.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}}class Dl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ll{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ll.RED,this.left=null!=r?r:Ll.EMPTY,this.right=null!=i?i:Ll.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ll(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ll.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ll.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ll.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ll.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw aa(43730,{key:this.key,value:this.value});if(this.right.isRed())throw aa(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw aa(27949);return e+(this.isRed()?0:1)}}Ll.EMPTY=null,Ll.RED=!0,Ll.BLACK=!1,Ll.EMPTY=new class{constructor(){this.size=0}get key(){throw aa(57766)}get value(){throw aa(16141)}get color(){throw aa(16727)}get left(){throw aa(29726)}get right(){throw aa(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ll(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ml{constructor(e){this.comparator=e,this.data=new Ol(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fl(this.data.getIterator())}getIteratorFrom(e){return new Fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ml))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ml(this.comparator);return t.data=e,t}}class Fl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ql{constructor(e){this.fields=e,e.sort(qa.comparator)}static empty(){return new ql([])}unionWith(e){let t=new Ml(qa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ql(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class jl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ul{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new jl("Invalid base64 string: "+e):e}}(e);return new Ul(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ul(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ul.EMPTY_BYTE_STRING=new Ul("");const Vl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zl(e){if(ca(!!e,39018),"string"==typeof e){let t=0;const n=Vl.exec(e);if(ca(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Wl(e.seconds),nanos:Wl(e.nanos)}}function Wl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hl(e){return"string"==typeof e?Ul.fromBase64String(e):Ul.fromUint8Array(e)}const Bl="server_timestamp",Kl="__type__",Gl="__previous_value__",Ql="__local_write_time__";function Yl(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Kl])||void 0===n?void 0:n.stringValue)===Bl}function Xl(e){const t=e.mapValue.fields[Gl];return Yl(t)?Xl(t):t}function Jl(e){const t=zl(e.mapValue.fields[Ql].timestampValue);return new Ra(t.seconds,t.nanos)}class $l{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Zl="(default)";class ec{constructor(e,t){this.projectId=e,this.database=t||Zl}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Zl}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}const tc="__type__",nc="__max__",rc={mapValue:{fields:{__type__:{stringValue:nc}}}},ic="__vector__",sc="value";function oc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yl(e)?4:Ec(e)?9007199254740991:_c(e)?10:11:aa(28295,{value:e})}function ac(e,t){if(e===t)return!0;const n=oc(e);if(n!==oc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jl(e).isEqual(Jl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=zl(e.timestampValue),r=zl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hl(e.bytesValue).isEqual(Hl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wl(e.geoPointValue.latitude)===Wl(t.geoPointValue.latitude)&&Wl(e.geoPointValue.longitude)===Wl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wl(e.integerValue)===Wl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Wl(e.doubleValue),r=Wl(t.doubleValue);return n===r?tl(n)===tl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Aa(e.arrayValue.values||[],t.arrayValue.values||[],ac);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nl(n)!==Nl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ac(n[i],r[i])))return!1;return!0}(e,t);default:return aa(52216,{left:e})}}function lc(e,t){return void 0!==(e.values||[]).find((e=>ac(e,t)))}function cc(e,t){if(e===t)return 0;const n=oc(e),r=oc(t);if(n!==r)return Sa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Wl(e.integerValue||e.doubleValue),r=Wl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return uc(e.timestampValue,t.timestampValue);case 4:return uc(Jl(e),Jl(t));case 5:return Ca(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hl(e),r=Hl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sa(n[i],r[i]);if(0!==e)return e}return Sa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sa(Wl(e.latitude),Wl(t.latitude));return 0!==n?n:Sa(Wl(e.longitude),Wl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return hc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[sc])||void 0===n?void 0:n.arrayValue,c=null===(r=a[sc])||void 0===r?void 0:r.arrayValue,u=Sa((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:hc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===rc.mapValue&&t===rc.mapValue)return 0;if(e===rc.mapValue)return 1;if(t===rc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ca(r[o],s[o]);if(0!==e)return e;const t=cc(n[r[o]],i[s[o]]);if(0!==t)return t}return Sa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw aa(23264,{Pe:n})}}function uc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sa(e,t);const n=zl(e),r=zl(t),i=Sa(n.seconds,r.seconds);return 0!==i?i:Sa(n.nanos,r.nanos)}function hc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cc(n[i],r[i]);if(e)return e}return Sa(n.length,r.length)}function dc(e){return pc(e)}function pc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=zl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ja.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=pc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(pc(e.fields[i]));return n+"}"}(e.mapValue):aa(61005,{value:e})}function fc(e){switch(oc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xl(e);return t?16+fc(t):16;case 5:return 2*e.stringValue.length;case 6:return Hl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+fc(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Pl(e.fields,((e,n)=>{t+=e.length+fc(n)})),t}(e.mapValue);default:throw aa(13486,{value:e})}}function mc(e){return!!e&&"integerValue"in e}function gc(e){return!!e&&"arrayValue"in e}function yc(e){return!!e&&"nullValue"in e}function vc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wc(e){return!!e&&"mapValue"in e}function _c(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[tc])||void 0===n?void 0:n.stringValue)===ic}function bc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Pl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=bc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ec(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===nc}class kc{constructor(e){this.value=e}static empty(){return new kc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=qa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=bc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());wc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ac(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Pl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new kc(bc(this.value))}}function Tc(e){const t=[];return Pl(e.fields,((e,n)=>{const r=new qa([e]);if(wc(n)){const e=Tc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ql(t)}class Sc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Sc(e,0,Oa.min(),Oa.min(),Oa.min(),kc.empty(),0)}static newFoundDocument(e,t,n,r){return new Sc(e,1,t,Oa.min(),n,r,0)}static newNoDocument(e,t){return new Sc(e,2,t,Oa.min(),Oa.min(),kc.empty(),0)}static newUnknownDocument(e,t){return new Sc(e,3,t,Oa.min(),Oa.min(),kc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Cc{constructor(e,t){this.position=e,this.inclusive=t}}function Ic(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ja.comparator(ja.fromName(o.referenceValue),n.key):cc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function xc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ac(e.position[n],t.position[n]))return!1;return!0}class Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Nc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pc{}class Rc extends Pc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Uc(e,t,n):"array-contains"===t?new Hc(e,n):"in"===t?new Bc(e,n):"not-in"===t?new Kc(e,n):"array-contains-any"===t?new Gc(e,n):new Rc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Vc(e,n):new zc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(cc(t,this.value)):null!==t&&oc(this.value)===oc(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return aa(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oc extends Pc{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Oc(e,t)}matches(e){return Dc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Dc(e){return"and"===e.op}function Lc(e){return Mc(e)&&Dc(e)}function Mc(e){for(const t of e.filters)if(t instanceof Oc)return!1;return!0}function Fc(e){if(e instanceof Rc)return e.field.canonicalString()+e.op.toString()+dc(e.value);if(Lc(e))return e.filters.map((e=>Fc(e))).join(",");{const t=e.filters.map((e=>Fc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function qc(e,t){return e instanceof Rc?function(e,t){return t instanceof Rc&&e.op===t.op&&e.field.isEqual(t.field)&&ac(e.value,t.value)}(e,t):e instanceof Oc?function(e,t){return t instanceof Oc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&qc(n,t.filters[r])),!0)}(e,t):void aa(19439)}function jc(e){return e instanceof Rc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(dc(e.value))}(e):e instanceof Oc?function(e){return e.op.toString()+" {"+e.getFilters().map(jc).join(" ,")+"}"}(e):"Filter"}class Uc extends Rc{constructor(e,t,n){super(e,t,n),this.key=ja.fromName(n.referenceValue)}matches(e){const t=ja.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vc extends Rc{constructor(e,t){super(e,"in",t),this.keys=Wc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zc extends Rc{constructor(e,t){super(e,"not-in",t),this.keys=Wc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ja.fromName(e.referenceValue)))}class Hc extends Rc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gc(t)&&lc(t.arrayValue,this.value)}}class Bc extends Rc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lc(this.value.arrayValue,t)}}class Kc extends Rc{constructor(e,t){super(e,"not-in",t)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!lc(this.value.arrayValue,t)}}class Gc extends Rc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>lc(this.value.arrayValue,e)))}}class Qc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Ie=null}}function Yc(e){return new Qc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xc(e){const t=ua(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Fc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),el(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>dc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>dc(e))).join(",")),t.Ie=e}return t.Ie}function Jc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Nc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!qc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xc(e.startAt,t.startAt)&&xc(e.endAt,t.endAt)}function $c(e){return ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function eu(e,t,n,r,i,s,o,a){return new Zc(e,t,n,r,i,s,o,a)}function tu(e){return new Zc(e)}function nu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ru(e){return null!==e.collectionGroup}function iu(e){const t=ua(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ml(qa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Ac(r,n))})),e.has(qa.keyField().canonicalString())||t.Ee.push(new Ac(qa.keyField(),n))}return t.Ee}function su(e){const t=ua(e);return t.de||(t.de=ou(t,iu(e))),t.de}function ou(e,t){if("F"===e.limitType)return Yc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ac(e.field,t)}));const n=e.endAt?new Cc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cc(e.startAt.position,e.startAt.inclusive):null;return Yc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function au(e,t,n){return new Zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lu(e,t){return Jc(su(e),su(t))&&e.limitType===t.limitType}function cu(e){return"".concat(Xc(su(e)),"|lt:").concat(e.limitType)}function uu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>jc(e))).join(", "),"]")),el(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>dc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>dc(e))).join(",")),"Target(".concat(t,")")}(su(e)),"; limitType=").concat(e.limitType,")")}function hu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ja.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of iu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ic(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,iu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ic(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,iu(e),t))}(e,t)}function du(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pu(e){return(t,n)=>{let r=!1;for(const i of iu(e)){const e=fu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function fu(e,t,n){const r=e.field.isKeyField()?ja.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cc(r,i):aa(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return aa(19790,{direction:e.dir})}}class mu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Rl(this.inner)}size(){return this.innerSize}}const gu=new Ol(ja.comparator);function yu(){return gu}const vu=new Ol(ja.comparator);function wu(){let e=vu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function _u(e){let t=vu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bu(){return ku()}function Eu(){return ku()}function ku(){return new mu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Tu=new Ol(ja.comparator),Su=new Ml(ja.comparator);function Cu(){let e=Su;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Iu=new Ml(Sa);function xu(){return Iu}function Au(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(t)?"-0":t}}function Nu(e){return{integerValue:""+e}}function Pu(e,t){return nl(t)?Nu(t):Au(e,t)}class Ru{constructor(){this._=void 0}}function Ou(e,t,n){return e instanceof Mu?function(e,t){const n={fields:{[Kl]:{stringValue:Bl},[Ql]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yl(t)&&(t=Xl(t)),t&&(n.fields[Gl]=t),{mapValue:n}}(n,t):e instanceof Fu?qu(e,t):e instanceof ju?Uu(e,t):function(e,t){const n=Lu(e,t),r=zu(n)+zu(e.Re);return mc(n)&&mc(e.Re)?Nu(r):Au(e.serializer,r)}(e,t)}function Du(e,t,n){return e instanceof Fu?qu(e,t):e instanceof ju?Uu(e,t):n}function Lu(e,t){return e instanceof Vu?function(e){return mc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Mu extends Ru{}class Fu extends Ru{constructor(e){super(),this.elements=e}}function qu(e,t){const n=Wu(t);for(const r of e.elements)n.some((e=>ac(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ju extends Ru{constructor(e){super(),this.elements=e}}function Uu(e,t){let n=Wu(t);for(const r of e.elements)n=n.filter((e=>!ac(e,r)));return{arrayValue:{values:n}}}class Vu extends Ru{constructor(e,t){super(),this.serializer=e,this.Re=t}}function zu(e){return Wl(e.integerValue||e.doubleValue)}function Wu(e){return gc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Hu{constructor(e,t){this.field=e,this.transform=t}}class Bu{constructor(e,t){this.version=e,this.transformResults=t}}class Ku{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ku}static exists(e){return new Ku(void 0,e)}static updateTime(e){return new Ku(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Qu{}function Yu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sh(e.key,Ku.none()):new eh(e.key,e.data,Ku.none());{const n=e.data,r=kc.empty();let i=new Ml(qa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new th(e.key,r,new ql(i.toArray()),Ku.none())}}function Xu(e,t,n){e instanceof eh?function(e,t,n){const r=e.value.clone(),i=rh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof th?function(e,t,n){if(!Gu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ju(e,t,n,r){return e instanceof eh?function(e,t,n,r){if(!Gu(e.precondition,t))return n;const i=e.value.clone(),s=ih(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof th?function(e,t,n,r){if(!Gu(e.precondition,t))return n;const i=ih(e.fieldTransforms,r,t),s=t.data;return s.setAll(nh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $u(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Lu(r.transform,e||null);null!=i&&(null===n&&(n=kc.empty()),n.set(r.field,i))}return n||null}function Zu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Aa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fu&&t instanceof Fu||e instanceof ju&&t instanceof ju?Aa(e.elements,t.elements,ac):e instanceof Vu&&t instanceof Vu?ac(e.Re,t.Re):e instanceof Mu&&t instanceof Mu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class eh extends Qu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class th extends Qu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function rh(e,t,n){const r=new Map;ca(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Du(o,a,n[i]))}return r}function ih(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ou(e,s,t))}return r}class sh extends Qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oh extends Qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ah{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Xu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Eu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Yu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Oa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Cu())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,((e,t)=>Zu(e,t)))&&Aa(this.baseMutations,e.baseMutations,((e,t)=>Zu(e,t)))}}class lh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ca(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Tu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new lh(e,t,n,r)}}class ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class uh{constructor(e,t){this.count=e,this.unchangedNames=t}}var hh,dh;function ph(e){switch(e){case ha.OK:return aa(64938);case ha.CANCELLED:case ha.UNKNOWN:case ha.DEADLINE_EXCEEDED:case ha.RESOURCE_EXHAUSTED:case ha.INTERNAL:case ha.UNAVAILABLE:case ha.UNAUTHENTICATED:return!1;case ha.INVALID_ARGUMENT:case ha.NOT_FOUND:case ha.ALREADY_EXISTS:case ha.PERMISSION_DENIED:case ha.FAILED_PRECONDITION:case ha.ABORTED:case ha.OUT_OF_RANGE:case ha.UNIMPLEMENTED:case ha.DATA_LOSS:return!0;default:return aa(15467,{code:e})}}function fh(e){if(void 0===e)return ia("GRPC error has no .code"),ha.UNKNOWN;switch(e){case hh.OK:return ha.OK;case hh.CANCELLED:return ha.CANCELLED;case hh.UNKNOWN:return ha.UNKNOWN;case hh.DEADLINE_EXCEEDED:return ha.DEADLINE_EXCEEDED;case hh.RESOURCE_EXHAUSTED:return ha.RESOURCE_EXHAUSTED;case hh.INTERNAL:return ha.INTERNAL;case hh.UNAVAILABLE:return ha.UNAVAILABLE;case hh.UNAUTHENTICATED:return ha.UNAUTHENTICATED;case hh.INVALID_ARGUMENT:return ha.INVALID_ARGUMENT;case hh.NOT_FOUND:return ha.NOT_FOUND;case hh.ALREADY_EXISTS:return ha.ALREADY_EXISTS;case hh.PERMISSION_DENIED:return ha.PERMISSION_DENIED;case hh.FAILED_PRECONDITION:return ha.FAILED_PRECONDITION;case hh.ABORTED:return ha.ABORTED;case hh.OUT_OF_RANGE:return ha.OUT_OF_RANGE;case hh.UNIMPLEMENTED:return ha.UNIMPLEMENTED;case hh.DATA_LOSS:return ha.DATA_LOSS;default:return aa(39323,{code:e})}}(dh=hh||(hh={}))[dh.OK=0]="OK",dh[dh.CANCELLED=1]="CANCELLED",dh[dh.UNKNOWN=2]="UNKNOWN",dh[dh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dh[dh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dh[dh.NOT_FOUND=5]="NOT_FOUND",dh[dh.ALREADY_EXISTS=6]="ALREADY_EXISTS",dh[dh.PERMISSION_DENIED=7]="PERMISSION_DENIED",dh[dh.UNAUTHENTICATED=16]="UNAUTHENTICATED",dh[dh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dh[dh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dh[dh.ABORTED=10]="ABORTED",dh[dh.OUT_OF_RANGE=11]="OUT_OF_RANGE",dh[dh.UNIMPLEMENTED=12]="UNIMPLEMENTED",dh[dh.INTERNAL=13]="INTERNAL",dh[dh.UNAVAILABLE=14]="UNAVAILABLE",dh[dh.DATA_LOSS=15]="DATA_LOSS";let mh=null;const gh=new Fo([4294967295,4294967295],0);function yh(e){const t=ka().encode(e),n=new qo;return n.update(t),new Uint8Array(n.digest())}function vh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fo([n,r],0),new Fo([i,s],0)]}class wh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new _h("Invalid padding: ".concat(t));if(n<0)throw new _h("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new _h("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new _h("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Fo.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Fo.fromNumber(n)));return 1===r.compare(gh)&&(r=new Fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=yh(e),[n,r]=vh(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new wh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=yh(e),[n,r]=vh(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Eh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bh(Oa.min(),r,new Ol(Sa),yu(),Cu())}}class Eh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Eh(n,t,Cu(),Cu(),Cu())}}class kh{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Th{constructor(e,t){this.targetId=e,this.Ce=t}}class Sh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ul.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ch{constructor(){this.Fe=0,this.Me=Ah(),this.xe=Ul.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Cu(),t=Cu(),n=Cu();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:aa(38017,{changeType:i})}})),new Eh(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Ah()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ca(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ih{constructor(e){this.ze=e,this.je=new Map,this.He=yu(),this.Je=xh(),this.Ye=xh(),this.Ze=new Ol(Sa)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:aa(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if($c(i))if(0===n){const e=new ja(i.path);this.tt(t,e,Sc.newNoDocument(e,Oa.min()))}else ca(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==mh||mh.ht(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Hl(n).toUint8Array()}catch(e){if(e instanceof jl)return sa("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new wh(s,r,i)}catch(e){return sa(e instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.pe?null:o}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&$c(i.target)){const t=new ja(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Sc.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Cu();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new bh(e,t,this.Ze,this.He,n);return this.He=yu(),this.Je=xh(),this.Ye=xh(),this.Ze=new Ol(Sa),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ch,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ml(Sa),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ml(Sa),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||ra("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ch),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function xh(){return new Ol(ja.comparator)}function Ah(){return new Ol(ja.comparator)}const Nh={asc:"ASCENDING",desc:"DESCENDING"},Ph={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rh={and:"AND",or:"OR"};class Oh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dh(e,t){return e.useProto3Json||el(t)?t:{value:t}}function Lh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fh(e,t){return Lh(e,t.toTimestamp())}function qh(e){return ca(!!e,49232),Oa.fromTimestamp(function(e){const t=zl(e);return new Ra(t.seconds,t.nanos)}(e))}function jh(e,t){return Uh(e,t).canonicalString()}function Uh(e,t){const n=function(e){return new Ma(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vh(e){const t=Ma.fromString(e);return ca(ad(t),10190,{key:t.toString()}),t}function zh(e,t){return jh(e.databaseId,t.path)}function Wh(e,t){const n=Vh(t);if(n.get(1)!==e.databaseId.projectId)throw new da(ha.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new da(ha.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ja(Gh(n))}function Hh(e,t){return jh(e.databaseId,t)}function Bh(e){const t=Vh(e);return 4===t.length?Ma.emptyPath():Gh(t)}function Kh(e){return new Ma(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gh(e){return ca(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Qh(e,t,n){return{name:zh(e,t),fields:n.value.mapValue.fields}}function Yh(e,t){let n;if(t instanceof eh)n={update:Qh(e,t.key,t.value)};else if(t instanceof sh)n={delete:zh(e,t.key)};else if(t instanceof th)n={update:Qh(e,t.key,t.data),updateMask:od(t.fieldMask)};else{if(!(t instanceof oh))return aa(16599,{ft:t.type});n={verify:zh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Mu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ju)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vu)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw aa(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:aa(27497)}(e,t.precondition)),n}function Xh(e,t){return{documents:[Hh(e,t.path)]}}function Jh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hh(e,i);const s=function(e){if(0!==e.length)return sd(Oc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:rd(e.field),direction:ed(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function $h(e){let t=Bh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ca(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Zh(e);return t instanceof Oc&&Lc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ac(id(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,el(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Cc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Cc(n,t)}(n.endAt)),eu(t,i,o,s,a,"F",l,c)}function Zh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=id(e.unaryFilter.field);return Rc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=id(e.unaryFilter.field);return Rc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=id(e.unaryFilter.field);return Rc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=id(e.unaryFilter.field);return Rc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return aa(61313);default:return aa(60726)}}(e):void 0!==e.fieldFilter?function(e){return Rc.create(id(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return aa(58110);default:return aa(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Oc.create(e.compositeFilter.filters.map((e=>Zh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return aa(1026)}}(e.compositeFilter.op))}(e):aa(30097,{filter:e})}function ed(e){return Nh[e]}function td(e){return Ph[e]}function nd(e){return Rh[e]}function rd(e){return{fieldPath:e.canonicalString()}}function id(e){return qa.fromServerFormat(e.fieldPath)}function sd(e){return e instanceof Rc?function(e){if("=="===e.op){if(vc(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NAN"}};if(yc(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vc(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NOT_NAN"}};if(yc(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rd(e.field),op:td(e.op),value:e.value}}}(e):e instanceof Oc?function(e){const t=e.getFilters().map((e=>sd(e)));return 1===t.length?t[0]:{compositeFilter:{op:nd(e.op),filters:t}}}(e):aa(54877,{filter:e})}function od(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ad(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ld{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Oa.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ul.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ld(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cd{constructor(e){this.wt=e}}function ud(e){const t=$h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?au(t,t.limit,"L"):t}class hd{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Wl(e.integerValue));else if("doubleValue"in e){const n=Wl(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),tl(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=zl(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Hl(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Ec(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):_c(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):aa(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=sc,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Wl(o)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),ja.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}hd.Wt=new hd;class dd{constructor(){this.Cn=new pd}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ya.resolve()}getCollectionParents(e,t){return Ya.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ya.resolve()}deleteFieldIndex(e,t){return Ya.resolve()}deleteAllFieldIndexes(e){return Ya.resolve()}createTargetIndexes(e,t){return Ya.resolve()}getDocumentsMatchingTarget(e,t){return Ya.resolve(null)}getIndexType(e,t){return Ya.resolve(0)}getFieldIndexes(e,t){return Ya.resolve([])}getNextCollectionGroupToUpdate(e){return Ya.resolve(null)}getMinOffset(e,t){return Ya.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,t){return Ya.resolve(Ha.min())}updateCollectionGroup(e,t,n){return Ya.resolve()}updateIndexEntries(e,t){return Ya.resolve()}}class pd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ml(Ma.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ml(Ma.comparator)).toArray()}}new Uint8Array(0);const fd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},md=41943040;class gd{static withCacheSize(e){return new gd(e,gd.DEFAULT_COLLECTION_PERCENTILE,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}gd.DEFAULT_COLLECTION_PERCENTILE=10,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gd.DEFAULT=new gd(md,gd.DEFAULT_COLLECTION_PERCENTILE,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gd.DISABLED=new gd(-1,0,0);class yd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new yd(0)}static lr(){return new yd(-1)}}const vd="LruGarbageCollector",wd=1048576;function _d(e,t){let[n,r]=e,[i,s]=t;const o=Sa(n,i);return 0===o?Sa(r,s):o}class bd{constructor(e){this.Er=e,this.buffer=new Ml(_d),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();_d(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ed{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){ra(vd,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ja(e)?ra(vd,"Ignoring IndexedDB error during garbage collection: ",e):await Qa(e)}await this.mr(3e5)}))}}class kd{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ya.resolve($a.le);const n=new bd(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ra("LruGarbageCollector","Garbage collection skipped; disabled"),Ya.resolve(fd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ra("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),fd):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ra("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),na()<=Ut.DEBUG&&ra("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Ya.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Td(e,t){return new kd(e,t)}class Sd{constructor(){this.changes=new mu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ya.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Id{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ju(n.mutation,e,ql.empty(),Ra.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Cu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cu();const r=bu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=wu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Cu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=yu();const s=ku(),o=ku();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof th)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ju(o.mutation,t,o.mutation.getFieldMask(),Ra.now())):s.set(t.key,ql.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Cd(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ku();let r=new Ol(((e,t)=>e-t)),i=Cu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ql.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Cu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Eu();l.forEach((e=>{if(!i.has(e)){const r=Yu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ya.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ru(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ya.resolve(bu());let o=Ua,a=i;return s.next((t=>Ya.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ya.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Cu()))).next((e=>({batchId:o,changes:_u(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ja(t)).next((e=>{let t=wu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=wu();return this.indexManager.getCollectionParents(e,i).next((o=>Ya.forEach(o,(o=>{const a=function(e,t){return new Zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Sc.newInvalidDocument(r)))}));let n=wu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Ju(s.mutation,r,ql.empty(),Ra.now()),hu(t,r)&&(n=n.insert(e,r))})),n}))}}class xd{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Ya.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:qh(e.createTime)}}(t)),Ya.resolve()}getNamedQuery(e,t){return Ya.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:ud(e.bundledQuery),readTime:qh(e.readTime)}}(t)),Ya.resolve()}}class Ad{constructor(){this.overlays=new Ol(ja.comparator),this.Qr=new Map}getOverlay(e,t){return Ya.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bu();return Ya.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Ya.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),Ya.resolve()}getOverlaysForCollection(e,t,n){const r=bu(),i=t.length+1,s=new ja(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ya.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ol(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=bu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ya.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ch(t,n));let i=this.Qr.get(t);void 0===i&&(i=Cu(),this.Qr.set(t,i)),this.Qr.set(t,i.add(n.key))}}class Nd{constructor(){this.sessionToken=Ul.EMPTY_BYTE_STRING}getSessionToken(e){return Ya.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ya.resolve()}}class Pd{constructor(){this.$r=new Ml(Rd.Ur),this.Kr=new Ml(Rd.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Rd(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Rd(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new ja(new Ma([])),n=new Rd(t,e),r=new Rd(t,e+1),i=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),i.push(e.key)})),i}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ja(new Ma([])),n=new Rd(t,e),r=new Rd(t,e+1);let i=Cu();return this.Kr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Rd(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Rd{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ja.comparator(e.key,t.key)||Sa(e.Zr,t.Zr)}static Wr(e,t){return Sa(e.Zr,t.Zr)||ja.comparator(e.key,t.key)}}class Od{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Ml(Rd.Ur)}checkEmpty(e){return Ya.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ah(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Xr=this.Xr.add(new Rd(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ya.resolve(s)}lookupMutationBatch(e,t){return Ya.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),i=r<0?0:r;return Ya.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ya.resolve(0===this.mutationQueue.length?Za:this.nr-1)}getAllMutationBatches(e){return Ya.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Rd(t,0),r=new Rd(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);i.push(t)})),Ya.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ml(Sa);return t.forEach((e=>{const t=new Rd(e,0),r=new Rd(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),Ya.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ja.isDocumentKey(i)||(i=i.child(""));const s=new Rd(new ja(i),0);let o=new Ml(Sa);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Zr)),!0)}),s),Ya.resolve(this.ni(o))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ca(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return Ya.forEach(t.mutations,(r=>{const i=new Rd(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Rd(t,0),r=this.Xr.firstAfterOrEqual(n);return Ya.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ya.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Dd{constructor(e){this.ii=e,this.docs=new Ol(ja.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ya.resolve(n?n.document.mutableCopy():Sc.newInvalidDocument(t))}getEntries(e,t){let n=yu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Sc.newInvalidDocument(e))})),Ya.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=yu();const s=t.path,o=new ja(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ba(Wa(o),n)<=0||(r.has(o.key)||hu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ya.resolve(i)}getAllFromCollectionGroup(e,t,n,r){aa(9500)}si(e,t){return Ya.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ld(this)}getSize(e){return Ya.resolve(this.size)}}class Ld extends Sd{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),Ya.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class Md{constructor(e){this.persistence=e,this.oi=new mu((e=>Xc(e)),Jc),this.lastRemoteSnapshotVersion=Oa.min(),this.highestTargetId=0,this._i=0,this.ai=new Pd,this.targetCount=0,this.ui=yd.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),Ya.resolve()}getLastRemoteSnapshotVersion(e){return Ya.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ya.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Ya.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),Ya.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new yd(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Ya.resolve()}updateTargetData(e,t){return this.Tr(t),Ya.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Ya.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.oi.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.oi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ya.waitFor(i).next((()=>r))}getTargetCount(e){return Ya.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return Ya.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),Ya.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ya.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Ya.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return Ya.resolve(n)}containsKey(e,t){return Ya.resolve(this.ai.containsKey(t))}}class Fd{constructor(e,t){this.ci={},this.overlays={},this.li=new $a(0),this.hi=!1,this.hi=!0,this.Pi=new Nd,this.referenceDelegate=e(this),this.Ti=new Md(this),this.indexManager=new dd,this.remoteDocumentCache=function(e){return new Dd(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new cd(t),this.Ei=new xd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ad,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Od(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){ra("MemoryPersistence","Starting transaction:",e);const r=new qd(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return Ya.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class qd extends Ga{constructor(e){super(),this.currentSequenceNumber=e}}class jd{constructor(e){this.persistence=e,this.Vi=new Pd,this.mi=null}static fi(e){return new jd(e)}get gi(){if(this.mi)return this.mi;throw aa(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),Ya.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),Ya.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Ya.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ya.forEach(this.gi,(n=>{const r=ja.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,Oa.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return Ya.or([()=>Ya.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ud{constructor(e,t){this.persistence=e,this.yi=new mu((e=>il(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Td(this,t)}static fi(e,t){return new Ud(e,t)}di(){}Ai(e){return Ya.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}br(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return Ya.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?Ya.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Oa.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Ya.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Ya.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Ya.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Ya.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fc(e.data.value)),t}Dr(e,t,n){return Ya.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return Ya.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Cu(),r=Cu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vd(e,t.fromCache,n,r)}}class zd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Wd{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=dt()?8:Xa(at())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ws(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.bs(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new zd;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>i.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(na()<=Ut.DEBUG&&ra("QueryEngine","SDK will not create cache indexes for query:",uu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Ya.resolve()):(na()<=Ut.DEBUG&&ra("QueryEngine","Query:",uu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(na()<=Ut.DEBUG&&ra("QueryEngine","The SDK decides to create cache indexes for query:",uu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,su(t))):Ya.resolve())}ws(e,t){if(nu(t))return Ya.resolve(null);let n=su(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=au(t,null,"F"),n=su(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Cu(...r);return this.ys.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.vs(t,r);return this.Cs(t,s,i,n.readTime)?this.ws(e,au(t,null,"F")):this.Fs(e,s,t,n)}))))})))))}bs(e,t,n,r){return nu(t)||r.isEqual(Oa.min())?Ya.resolve(null):this.ys.getDocuments(e,n).next((i=>{const s=this.vs(t,i);return this.Cs(t,s,n,r)?Ya.resolve(null):(na()<=Ut.DEBUG&&ra("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uu(t)),this.Fs(e,s,t,za(r,Ua)).next((e=>e)))}))}vs(e,t){let n=new Ml(pu(e));return t.forEach(((t,r)=>{hu(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return na()<=Ut.DEBUG&&ra("QueryEngine","Using full collection scan to execute query:",uu(t)),this.ys.getDocumentsMatchingQuery(e,t,Ha.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Hd="LocalStore";class Bd{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Ol(Sa),this.Os=new mu((e=>Xc(e)),Jc),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Id(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function Kd(e,t,n,r){return new Bd(e,t,n,r)}async function Gd(e,t){const n=ua(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Cu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ks:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Qd(e){const t=ua(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function Yd(e,t,n){let r=Cu(),i=Cu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=yu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Oa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ra(Hd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{qs:r,Qs:i}}))}function Xd(e,t){const n=ua(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Za),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Jd(e,t){const n=ua(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((i=>i?(r=i,Ya.resolve(r)):n.Ti.allocateTargetId(e).next((i=>(r=new ld(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function $d(e,t,n){const r=ua(e),i=r.xs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ja(e))throw e;ra(Hd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(i.target)}function Zd(e,t,n){const r=ua(e);let i=Oa.min(),s=Cu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ua(e),i=r.Os.get(n);return void 0!==i?Ya.resolve(r.xs.get(i)):r.Ti.getTargetData(t,n)}(r,e,su(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?i:Oa.min(),n?s:Cu()))).next((e=>(ep(r,du(t),e),{documents:e,$s:s})))))}function ep(e,t,n){let r=e.Ns.get(t)||Oa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class tp{constructor(){this.activeTargetIds=xu()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(){this.xo=new tp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new tp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rp{No(e){}shutdown(){}}const ip="ConnectivityMonitor";class sp{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ra(ip,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ra(ip,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let op=null;function ap(){return null===op?op=268435456+Math.round(2147483648*Math.random()):op++,"0x"+op.toString(16)}const lp="RestConnection",cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class up{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===Zl?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,i){const s=ap(),o=this.jo(e,t.toUriEncodedString());ra(lp,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(a,r,i);const{host:l}=new URL(o),c=tt(l);return this.Jo(e,o,a,n,c).then((t=>(ra(lp,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw sa(lp,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Yo(e,t,n,r,i,s){return this.zo(e,t,n,r,i)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ea,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=cp[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class hp{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const dp="WebChannelConnection";class pp extends up{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=ap();return new Promise(((i,o)=>{const a=new Vo;a.setWithCredentials(!0),a.listenOnce(Wo.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ho.NO_ERROR:const t=a.getResponseJson();ra(dp,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Ho.TIMEOUT:ra(dp,"RPC '".concat(e,"' ").concat(s," timed out")),o(new da(ha.DEADLINE_EXCEEDED,"Request time out"));break;case Ho.HTTP_ERROR:const n=a.getStatus();if(ra(dp,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ha).indexOf(t)>=0?t:ha.UNKNOWN}(t.status);o(new da(e,t.message))}else o(new da(ha.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new da(ha.UNAVAILABLE,"Connection failed."));break;default:aa(9055,{h_:e,streamId:s,P_:a.getLastErrorCode(),T_:a.getLastError()})}}finally{ra(dp,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);ra(dp,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)}))}I_(e,t,n){const r=ap(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qo(),o=Go(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Ho(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");ra(dp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.E_(u);let h=!1,d=!1;const p=new hp({Zo:t=>{d?ra(dp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ra(dp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ra(dp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,zo.EventType.OPEN,(()=>{d||(ra(dp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.__())})),f(u,zo.EventType.CLOSE,(()=>{d||(d=!0,ra(dp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.u_(),this.d_(u))})),f(u,zo.EventType.ERROR,(t=>{d||(d=!0,sa(dp,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.u_(new da(ha.UNAVAILABLE,"The operation could not be completed")))})),f(u,zo.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ca(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ra(dp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=hh[e];if(void 0!==t)return fh(t)}(t),i=o.message;void 0===n&&(n=ha.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,p.u_(new da(n,i)),u.close()}else ra(dp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.c_(i)}})),f(o,Ko.STAT_EVENT,(t=>{t.stat===Bo.PROXY?ra(dp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Bo.NOPROXY&&ra(dp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{p.a_()}),0),p}terminate(){this.l_.forEach((e=>e.close())),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter((t=>t===e))}}function fp(){return"undefined"!=typeof document?document:null}function mp(e){return new Oh(e,!0)}class gp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&ra("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.g_=Date.now(),e()))),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const yp="PersistentStream";class vp{constructor(e,t,n,r,i,s,o,a){this.xi=e,this.S_=n,this.D_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new gp(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,(()=>this.q_())))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===ha.RESOURCE_EXHAUSTED?(ia(t.toString()),ia("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===ha.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)}),(t=>{e((()=>{const e=new da(ha.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)}))}))}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,(()=>(this.N_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.j_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.M_?this.J_(e):this.onNext(e)))}))}B_(){this.state=5,this.x_.y_((async()=>{this.state=0,this.start()}))}j_(e){return ra(yp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget((()=>this.v_===e?t():(ra(yp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wp extends vp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:aa(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ca(void 0===t||"string"==typeof t,58123),Ul.fromBase64String(t||"")):(ca(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ul.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ha.UNKNOWN:fh(e.code);return new da(t,e.message||"")}(o);n=new Sh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wh(e,r.document.name),s=qh(r.document.updateTime),o=r.document.createTime?qh(r.document.createTime):Oa.min(),a=new kc({mapValue:{fields:r.document.fields}}),l=Sc.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Wh(e,r.document),s=r.readTime?qh(r.readTime):Oa.min(),o=Sc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Wh(e,r.document),s=r.removedTargetIds||[];n=new kh([],s,i,null)}else{if(!("filter"in t))return aa(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new uh(r,i),o=e.targetId;n=new Th(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Oa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Oa.min():t.readTime?qh(t.readTime):Oa.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=Kh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=$c(r)?{documents:Xh(e,r)}:{query:Jh(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mh(e,t.resumeToken);const r=Dh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Oa.min())>0){n.readTime=Lh(e,t.snapshotVersion.toTimestamp());const r=Dh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return aa(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=Kh(this.serializer),t.removeTarget=e,this.Q_(t)}}class _p extends vp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ca(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ca(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){ca(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(ca(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?qh(e.updateTime):qh(t);return n.isEqual(Oa.min())&&(n=qh(t)),new Bu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=qh(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=Kh(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Yh(this.serializer,e)))};this.Q_(t)}}class bp{}class Ep extends bp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new da(ha.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.zo(e,Uh(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new da(ha.UNKNOWN,e.toString())}))}Yo(e,t,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Yo(e,Uh(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new da(ha.UNKNOWN,e.toString())}))}terminate(){this.sa=!0,this.connection.terminate()}}class kp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve()))))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(ia(t),this.ua=!1):ra("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const Tp="RemoteStore";class Sp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No((e=>{n.enqueueAndForget((async()=>{Dp(this)&&(ra(Tp,"Restarting streams for network reachability change."),await async function(e){const t=ua(e);t.da.add(4),await Ip(t),t.Va.set("Unknown"),t.da.delete(4),await Cp(t)}(this))}))})),this.Va=new kp(n,r)}}async function Cp(e){if(Dp(e))for(const t of e.Aa)await t(!0)}async function Ip(e){for(const t of e.Aa)await t(!1)}function xp(e,t){const n=ua(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Op(n)?Rp(n):Zp(n).N_()&&Np(n,t))}function Ap(e,t){const n=ua(e),r=Zp(n);n.Ea.delete(t),r.N_()&&Pp(n,t),0===n.Ea.size&&(r.N_()?r.k_():Dp(n)&&n.Va.set("Unknown"))}function Np(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Oa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zp(e).Z_(t)}function Pp(e,t){e.ma.Ke(t),Zp(e).X_(t)}function Rp(e){e.ma=new Ih({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Zp(e).start(),e.Va.ca()}function Op(e){return Dp(e)&&!Zp(e).O_()&&e.Ea.size>0}function Dp(e){return 0===ua(e).da.size}function Lp(e){e.ma=void 0}async function Mp(e){e.Va.set("Online")}async function Fp(e){e.Ea.forEach(((t,n)=>{Np(e,t)}))}async function qp(e,t){Lp(e),Op(e)?(e.Va.Pa(t),Rp(e)):e.Va.set("Unknown")}async function jp(e,t,n){if(e.Va.set("Online"),t instanceof Sh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){ra(Tp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Up(e,n)}else if(t instanceof kh?e.ma.Xe(t):t instanceof Th?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Oa.min()))try{const t=await Qd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ea.get(r);i&&e.Ea.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(Ul.EMPTY_BYTE_STRING,r.snapshotVersion)),Pp(e,t);const i=new ld(r.target,t,n,r.sequenceNumber);Np(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ra(Tp,"Failed to raise snapshot:",t),await Up(e,t)}}async function Up(e,t,n){if(!Ja(t))throw t;e.da.add(1),await Ip(e),e.Va.set("Offline"),n||(n=()=>Qd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ra(Tp,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Cp(e)}))}function Vp(e,t){return t().catch((n=>Up(e,n,t)))}async function zp(e){const t=ua(e),n=ef(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Za;for(;Wp(t);)try{const e=await Xd(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,Hp(t,e)}catch(e){await Up(t,e)}Bp(t)&&Kp(t)}function Wp(e){return Dp(e)&&e.Ia.length<10}function Hp(e,t){e.Ia.push(t);const n=ef(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Bp(e){return Dp(e)&&!ef(e).O_()&&e.Ia.length>0}function Kp(e){ef(e).start()}async function Gp(e){ef(e).ia()}async function Qp(e){const t=ef(e);for(const n of e.Ia)t.ta(n.mutations)}async function Yp(e,t,n){const r=e.Ia.shift(),i=lh.from(r,t,n);await Vp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await zp(e)}async function Xp(e,t){t&&ef(e).ea&&await async function(e,t){if(function(e){return ph(e)&&e!==ha.ABORTED}(t.code)){const n=e.Ia.shift();ef(e).L_(),await Vp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await zp(e)}}(e,t),Bp(e)&&Kp(e)}async function Jp(e,t){const n=ua(e);n.asyncQueue.verifyOperationInProgress(),ra(Tp,"RemoteStore received new credentials");const r=Dp(n);n.da.add(3),await Ip(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Cp(n)}async function $p(e,t){const n=ua(e);t?(n.da.delete(2),await Cp(n)):t||(n.da.add(2),await Ip(n),n.Va.set("Unknown"))}function Zp(e){return e.fa||(e.fa=function(e,t,n){const r=ua(e);return r.oa(),new wp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:Mp.bind(null,e),n_:Fp.bind(null,e),i_:qp.bind(null,e),Y_:jp.bind(null,e)}),e.Aa.push((async t=>{t?(e.fa.L_(),Op(e)?Rp(e):e.Va.set("Unknown")):(await e.fa.stop(),Lp(e))}))),e.fa}function ef(e){return e.ga||(e.ga=function(e,t,n){const r=ua(e);return r.oa(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:Gp.bind(null,e),i_:Xp.bind(null,e),na:Qp.bind(null,e),ra:Yp.bind(null,e)}),e.Aa.push((async t=>{t?(e.ga.L_(),await zp(e)):(await e.ga.stop(),e.Ia.length>0&&(ra(Tp,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]))}))),e.ga}class tf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new tf(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new da(ha.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nf(e,t){if(ia("AsyncQueue","".concat(t,": ").concat(e)),Ja(e))return new da(ha.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class rf{static emptySet(e){return new rf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ja.comparator(t.key,n.key):(e,t)=>ja.comparator(e.key,t.key),this.keyedMap=wu(),this.sortedSet=new Ol(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sf{constructor(){this.pa=new Ol(ja.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):aa(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class of{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new of(e,t,rf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class af{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some((e=>e.va()))}}class lf{constructor(){this.queries=cf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=ua(e),r=n.queries;n.queries=cf(),r.forEach(((e,n)=>{for(const r of n.Sa)r.onError(t)}))}(this,new da(ha.ABORTED,"Firestore shutting down"))}}function cf(){return new mu((e=>cu(e)),lu)}async function uf(e,t){const n=ua(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Da()&&t.va()&&(r=2):(s=new af,r=t.va()?0:1);try{switch(r){case 0:s.ba=await n.onListen(i,!0);break;case 1:s.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=nf(e,"Initialization of query '".concat(uu(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.Fa(n.onlineState),s.ba&&t.Ma(s.ba)&&ff(n)}async function hf(e,t){const n=ua(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.va()?0:1:!s.Da()&&t.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function df(e,t){const n=ua(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(i)&&(r=!0);t.ba=i}}r&&ff(n)}function pf(e,t,n){const r=ua(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function ff(e){e.Ca.forEach((e=>{e.next()}))}var mf,gf;(gf=mf||(mf={})).xa="default",gf.Cache="cache";class yf{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new of(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=of.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==mf.Cache}}class vf{constructor(e){this.key=e}}class wf{constructor(e){this.key=e}}class _f{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Cu(),this.mutatedKeys=Cu(),this.Za=pu(e),this.Xa=new rf(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new sf,r=t?t.Xa:this.Xa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=hu(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.ru(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Za(u,a)>0||l&&this.Za(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Xa:s,nu:n,Cs:o,mutatedKeys:i}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const s=e.nu.wa();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return aa(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc))),this.iu(n),r=null!=r&&r;const o=t&&!r?this.su():[],a=0===this.Ya.size&&this.current&&!r?1:0,l=a!==this.Ja;return this.Ja=a,0!==s.length||l?{snapshot:new of(this.query,e.Xa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:o}:{ou:o}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new sf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Cu(),this.Xa.forEach((e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))}));const t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new wf(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new vf(n))})),t}au(e){this.Ha=e.$s,this.Ya=Cu();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return of.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const bf="SyncEngine";class Ef{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kf{constructor(e){this.key=e,this.cu=!1}}class Tf{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new mu((e=>cu(e)),lu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ol(ja.comparator),this.Eu=new Map,this.du=new Pd,this.Au={},this.Ru=new Map,this.Vu=yd.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function Sf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Kf(e);let i;const s=r.hu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=await If(r,t,n,!0),i}async function Cf(e,t){const n=Kf(e);await If(n,t,!0,!1)}async function If(e,t,n,r){const i=await Jd(e.localStore,su(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await xf(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&xp(e.remoteStore,i),a}async function xf(e,t,n,r,i){e.fu=(t,n,r)=>async function(e,t,n,r){let i=t.view.tu(n);i.Cs&&(i=await Zd(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.tu(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Uf(e,t.targetId,a.ou),a.snapshot}(e,t,n,r);const s=await Zd(e.localStore,t,!0),o=new _f(t,s.$s),a=o.tu(s.documents),l=Eh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Uf(e,n,c.ou);const u=new Ef(t,n,o);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function Af(e,t,n){const r=ua(e),i=r.hu.get(t),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter((e=>!lu(e,t)))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $d(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ap(r.remoteStore,i.targetId),qf(r,i.targetId)})).catch(Qa)):(qf(r,i.targetId),await $d(r.localStore,i.targetId,!0))}async function Nf(e,t){const n=ua(e),r=n.hu.get(t),i=n.Pu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function Pf(e,t){const n=ua(e);try{const e=await function(e,t){const n=ua(e),r=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ti.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ti.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Ul.EMPTY_BYTE_STRING,Oa.min()).withLastLimboFreeSnapshotVersion(Oa.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Ti.updateTargetData(e,c))}));let a=yu(),l=Cu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Yd(e,s,t.documentUpdates).next((e=>{a=e.qs,l=e.Qs}))),!r.isEqual(Oa.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ya.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.xs=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Eu.get(t);r&&(ca(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?ca(r.cu,14607):e.removedDocuments.size>0&&(ca(r.cu,42227),r.cu=!1))})),await Wf(n,e,t)}catch(e){await Qa(e)}}function Rf(e,t,n){const r=ua(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach(((n,r)=>{const i=r.view.Fa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ua(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Sa)i.Fa(t)&&(r=!0)})),r&&ff(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Of(e,t,n){const r=ua(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new Ol(ja.comparator);e=e.insert(s,Sc.newNoDocument(s,Oa.min()));const n=Cu().add(s),i=new bh(Oa.min(),new Map,new Ol(Sa),e,n);await Pf(r,i),r.Iu=r.Iu.remove(s),r.Eu.delete(t),zf(r)}else await $d(r.localStore,t,!1).then((()=>qf(r,t,n))).catch(Qa)}async function Df(e,t){const n=ua(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ua(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ya.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ca(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Cu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ff(n,r,null),Mf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wf(n,e)}catch(e){await Qa(e)}}async function Lf(e,t,n){const r=ua(e);try{const e=await function(e,t){const n=ua(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ca(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ff(r,t,n),Mf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wf(r,e)}catch(n){await Qa(n)}}function Mf(e,t){(e.Ru.get(t)||[]).forEach((e=>{e.resolve()})),e.Ru.delete(t)}function Ff(e,t,n){const r=ua(e);let i=r.Au[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Au[r.currentUser.toKey()]=i}}function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach((t=>{e.du.containsKey(t)||jf(e,t)}))}function jf(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(Ap(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),zf(e))}function Uf(e,t,n){for(const r of n)r instanceof vf?(e.du.addReference(r.key,t),Vf(e,r)):r instanceof wf?(ra(bf,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||jf(e,r.key)):aa(19791,{pu:r})}function Vf(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(ra(bf,"New document in limbo: "+n),e.Tu.add(r),zf(e))}function zf(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new ja(Ma.fromString(t)),r=e.Vu.next();e.Eu.set(r,new kf(n)),e.Iu=e.Iu.insert(n,r),xp(e.remoteStore,new ld(su(tu(n.path)),r,"TargetPurposeLimboResolution",$a.le))}}async function Wf(e,t,n){const r=ua(e),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach(((e,a)=>{o.push(r.fu(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Vd.Rs(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.lu.Y_(i),await async function(e,t){const n=ua(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ya.forEach(t,(t=>Ya.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ya.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ja(e))throw e;ra(Hd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,i)}}}(r.localStore,s))}async function Hf(e,t){const n=ua(e);if(!n.currentUser.isEqual(t)){ra(bf,"User change. New user:",t.toKey());const e=await Gd(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach((e=>{e.forEach((e=>{e.reject(new da(ha.CANCELLED,t))}))})),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wf(n,e.ks)}}function Bf(e,t){const n=ua(e),r=n.Eu.get(t);if(r&&r.cu)return Cu().add(r.key);{let e=Cu();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}function Kf(e){const t=ua(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Of.bind(null,t),t.lu.Y_=df.bind(null,t.eventManager),t.lu.gu=pf.bind(null,t.eventManager),t}function Gf(e){const t=ua(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Df.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lf.bind(null,t),t}class Qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Kd(this.persistence,new Wd,e.initialUser,this.serializer)}Su(e){return new Fd(jd.fi,this.serializer)}bu(e){return new np}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qf.provider={build:()=>new Qf};class Yf extends Qf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ca(this.persistence.referenceDelegate instanceof Ud,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ed(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?gd.withCacheSize(this.cacheSizeBytes):gd.DEFAULT;return new Fd((e=>Ud.fi(e,t)),this.serializer)}}class Xf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Rf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hf.bind(null,this.syncEngine),await $p(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new lf}createDatastore(e){const t=mp(e.databaseInfo.databaseId),n=function(e){return new pp(e)}(e.databaseInfo);return function(e,t,n,r){return new Ep(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Sp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Rf(this.syncEngine,e,0)),sp.C()?new sp:new rp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Tf(e,t,n,r,i,s);return o&&(a.mu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ua(e);ra(Tp,"RemoteStore shutting down."),t.da.add(5),await Ip(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Xf.provider={build:()=>new Xf};class Jf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ia("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const $f="FirestoreClient";class Zf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zo.UNAUTHENTICATED,this.clientId=Ta.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{ra($f,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ra($f,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=nf(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function em(e,t){e.asyncQueue.verifyOperationInProgress(),ra($f,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Gd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function tm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nm(e);ra($f,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Jp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Jp(t.remoteStore,n))),e._onlineComponents=t}async function nm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ra($f,"Using user provided OfflineComponentProvider");try{await em(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ha.FAILED_PRECONDITION||e.code===ha.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await em(e,new Qf)}}else ra($f,"Using default OfflineComponentProvider"),await em(e,new Yf(void 0));return e._offlineComponents}async function rm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ra($f,"Using user provided OnlineComponentProvider"),await tm(e,e._uninitializedComponentsProvider._online)):(ra($f,"Using default OnlineComponentProvider"),await tm(e,new Xf))),e._onlineComponents}function im(e){return rm(e).then((e=>e.syncEngine))}async function sm(e){const t=await rm(e),n=t.eventManager;return n.onListen=Sf.bind(null,t.syncEngine),n.onUnlisten=Af.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Cf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Nf.bind(null,t.syncEngine),n}function om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Jf({next:a=>{s.xu(),t.enqueueAndForget((()=>hf(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new da(ha.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new da(ha.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new yf(tu(n.path),s,{includeMetadataChanges:!0,Qa:!0});return uf(e,o)}(await sm(e),e.asyncQueue,t,n,r))),r.promise}function am(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const lm=new Map;function cm(e,t,n){if(!n)throw new da(ha.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function um(e){if(!ja.isDocumentKey(e))throw new da(ha.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":aa(12329,{type:typeof e})}function dm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new da(ha.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hm(e);throw new da(ha.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}const pm="firestore.googleapis.com",fm=!0;class mm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new da(ha.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pm,this.ssl=fm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:fm;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=md;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<wd)throw new da(ha.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new da(ha.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=am(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new da(ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new da(ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new da(ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new da(ha.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new da(ha.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ma;switch(e.type){case"firstParty":return new wa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new da(ha.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lm.get(e);t&&(ra("ComponentProvider","Removing Datastore"),lm.delete(e),t.terminate())}(this),Promise.resolve()}}class ym{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ym(this.firestore,e,this._query)}}class vm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vm(this.firestore,e,this._key)}}class wm extends ym{constructor(e,t,n){super(e,t,tu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vm(this.firestore,null,new ja(e))}withConverter(e){return new wm(this.firestore,e,this._path)}}function _m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Dt(e),1===arguments.length&&(t=Ta.newId()),cm("doc","path",t),e instanceof gm){const n=Ma.fromString(t,...r);return um(n),new vm(e,null,new ja(n))}{if(!(e instanceof vm||e instanceof wm))throw new da(ha.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ma.fromString(t,...r));return um(n),new vm(e.firestore,e instanceof wm?e.converter:null,new ja(n))}}const bm="AsyncQueue";class Em{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new gp(this,"async_queue_retry"),this.rc=()=>{const e=fp();e&&ra(bm,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=fp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=fp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise((()=>{}));const t=new pa;return this._c((()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ju.push(e),this.ac())))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(xb){if(!Ja(xb))throw xb;ra(bm,"Operation failed with retryable error: "+xb)}this.Ju.length>0&&this.x_.y_((()=>this.ac()))}}_c(e){const t=this.sc.then((()=>(this.ec=!0,e().catch((e=>{throw this.Xu=e,this.ec=!1,ia("INTERNAL UNHANDLED ERROR: ",km(e)),e})).then((e=>(this.ec=!1,e))))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=tf.createAndSchedule(this,e,t,n,(e=>this.uc(e)));return this.Zu.push(r),r}oc(){this.Xu&&aa(47125,{cc:km(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then((()=>{this.Zu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()}))}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function km(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Tm extends gm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Em,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Em(e),this._firestoreClient=void 0,await e}}}function Sm(e){if(e._terminated)throw new da(ha.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Cm(e),e._firestoreClient}function Cm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new $l(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,am(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Zf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Im{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Im(Ul.fromBase64String(e))}catch(e){throw new da(ha.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Im(Ul.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new da(ha.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Am{constructor(e){this._methodName=e}}class Nm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new da(ha.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new da(ha.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sa(this._lat,e._lat)||Sa(this._long,e._long)}}class Pm{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Rm=/^__.*__$/;class Om{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new th(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}class Dm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new th(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw aa(40011,{Ic:e})}}class Mm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Jm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(Lm(this.Ic)&&Rm.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Fm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mp(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mm({Ic:e,methodName:t,wc:n,path:qa.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qm(e){const t=e._freezeSettings(),n=mp(e._databaseId);return new Fm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.bc(s.merge||s.mergeFields?2:0,t,n,i);Gm("Data must be an object, but it was:",o,r);const a=Bm(r,o);let l,c;if(s.merge)l=new ql(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Qm(t,r,n);if(!o.contains(i))throw new da(ha.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));$m(e,i)||e.push(i)}l=new ql(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Om(new kc(a),l,c)}class Um extends Am{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Um}}class Vm extends Am{_toFieldTransform(e){return new Hu(e.path,new Mu)}isEqual(e){return e instanceof Vm}}function zm(e,t,n,r){const i=e.bc(1,t,n);Gm("Data must be an object, but it was:",i,r);const s=[],o=kc.empty();Pl(r,((e,r)=>{const a=Xm(t,e,n);r=Dt(r);const l=i.mc(a);if(r instanceof Um)s.push(a);else{const e=Hm(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ql(s);return new Dm(o,a,i.fieldTransforms)}function Wm(e,t,n,r,i,s){const o=e.bc(1,t,n),a=[Qm(t,r,n)],l=[i];if(s.length%2!=0)throw new da(ha.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Qm(t,s[d])),l.push(s[d+1]);const c=[],u=kc.empty();for(let d=a.length-1;d>=0;--d)if(!$m(c,a[d])){const e=a[d];let t=l[d];t=Dt(t);const n=o.mc(e);if(t instanceof Um)c.push(e);else{const r=Hm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ql(c);return new Dm(u,h,o.fieldTransforms)}function Hm(e,t){if(Km(e=Dt(e)))return Gm("Unsupported field value:",t,e),Bm(e,t);if(e instanceof Am)return function(e,t){if(!Lm(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hm(i,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Dt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Pu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ra.fromDate(e);return{timestampValue:Lh(t.serializer,n)}}if(e instanceof Ra){const n=new Ra(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lh(t.serializer,n)}}if(e instanceof Nm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Im)return{bytesValue:Mh(t.serializer,e._byteString)};if(e instanceof vm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:jh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Pm)return function(e,t){return{mapValue:{fields:{[tc]:{stringValue:ic},[sc]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return Au(t.serializer,e)}))}}}}}}(e,t);throw t.gc("Unsupported field value: ".concat(hm(e)))}(e,t)}function Bm(e,t){const n={};return Rl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pl(e,((e,r)=>{const i=Hm(r,t.Ac(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Km(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ra||e instanceof Nm||e instanceof Im||e instanceof vm||e instanceof Am||e instanceof Pm)}function Gm(e,t,n){if(!Km(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hm(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Qm(e,t,n){if((t=Dt(t))instanceof xm)return t._internalPath;if("string"==typeof t)return Xm(e,t);throw Jm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ym=new RegExp("[~\\*/\\[\\]]");function Xm(e,t,n){if(t.search(Ym)>=0)throw Jm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xm(...t.split("."))._internalPath}catch(r){throw Jm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new da(ha.INVALID_ARGUMENT,a+e+l)}function $m(e,t){return e.some((e=>e.isEqual(t)))}class Zm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eg extends Zm{data(){return super.data()}}function tg(e,t){return"string"==typeof t?Xm(e,t):t instanceof xm?t._internalPath:t._delegate._internalPath}class ng{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw aa(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[sc].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Wl(e.doubleValue)));return new Pm(i)}convertGeoPoint(e){return new Nm(Wl(e.latitude),Wl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=zl(e);return new Ra(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ma.fromString(e);ca(ad(n),9688,{name:e});const r=new ec(n.get(1),n.get(3)),i=new ja(n.popFirst(5));return r.isEqual(t)||ia("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function rg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sg extends Zm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class og extends sg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function ag(e){e=dm(e,vm);const t=dm(e.firestore,Tm);return om(Sm(t),e._key).then((n=>ug(t,e,n)))}class lg extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new Im(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vm(this.firestore,null,t)}}function cg(e,t){return function(e,t){const n=new pa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Gf(e);try{const e=await function(e,t){const n=ua(e),r=Ra.now(),i=t.reduce(((e,t)=>e.add(t.key)),Cu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=yu(),l=Cu();return n.Bs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=$u(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new th(e.key,t,Tc(t.value.mapValue),Ku.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:_u(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new Ol(Sa)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wf(r,e.changes),await zp(r.remoteStore)}catch(e){const t=nf(e,"Failed to persist write");n.reject(t)}}(await im(e),t,n))),n.promise}(Sm(e),t)}function ug(e,t,n){const r=n.docs.get(t._key),i=new lg(e);return new sg(e,i,t._key,r,new ig(n.hasPendingWrites,n.fromCache),t.converter)}function hg(){return new Vm("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ea=e}(Xn),Bn(new Lt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Tm(new ya(e.getProvider("auth-internal")),new ba(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new da(ha.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zn(Jo,$o,e),Zn(Jo,$o,"esm2017")}();Zn("firebase","11.9.0","app");const dg="@firebase/database",pg="1.0.19";let fg="";function mg(e){fg=e}class gg{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:yt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yg{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return _t(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const vg=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new gg(t)}}catch(xb){}return new yg},wg=vg("localStorage"),_g=vg("sessionStorage"),bg=new Bt("@firebase/database"),Eg=function(){let e=1;return function(){return e++}}(),kg=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,qe(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new At;n.update(t);const r=n.digest();return Ve.encodeByteArray(r)},Tg=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Tg.apply(null,n):e+="object"===typeof n?vt(n):n,e+=" "}return e};let Sg=null,Cg=!0;const Ig=function(e,t){qe(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(bg.logLevel=Ut.VERBOSE,Sg=bg.log.bind(bg),t&&_g.set("logging_enabled",!0)):"function"===typeof e?Sg=e:(Sg=null,_g.remove("logging_enabled"))},xg=function(){if(!0===Cg&&(Cg=!1,null===Sg&&!0===_g.get("logging_enabled")&&Ig(!0)),Sg){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Tg.apply(null,t);Sg(r)}},Ag=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];xg(e,...n)}},Ng=function(){const e="FIREBASE INTERNAL ERROR: "+Tg(...arguments);bg.error(e)},Pg=function(){const e="FIREBASE FATAL ERROR: ".concat(Tg(...arguments));throw bg.error(e),new Error(e)},Rg=function(){const e="FIREBASE WARNING: "+Tg(...arguments);bg.warn(e)},Og=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Dg="[MIN_NAME]",Lg="[MAX_NAME]",Mg=function(e,t){if(e===t)return 0;if(e===Dg||t===Lg)return-1;if(t===Dg||e===Lg)return 1;{const n=Hg(e),r=Hg(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Fg=function(e,t){return e===t?0:e<t?-1:1},qg=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+vt(t))},jg=function(e){if("object"!==typeof e||null===e)return vt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=vt(t[r]),n+=":",n+=jg(e[t[r]]);return n+="}",n},Ug=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Vg(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const zg=function(e){qe(!Og(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Wg=new RegExp("^-?(0*)\\d{1,10}$"),Hg=function(e){if(Wg.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Bg=function(e){try{e()}catch(xb){setTimeout((()=>{const t=xb.stack||"";throw Rg("Exception was thrown by user callback.",t),xb}),Math.floor(0))}},Kg=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Gg{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Gn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Rg('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Qg{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(xg("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rg(e)}}class Yg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yg.OWNER="owner";const Xg="5",Jg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$g="ac",Zg="websocket",ey="long_polling";class ty{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function ny(e,t,n){let r;if(qe("string"===typeof t,"typeof type must == string"),qe("object"===typeof n,"typeof params must == object"),t===Zg)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ey)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Vg(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class ry{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_t(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ke(this.counters_)}}const iy={},sy={};function oy(e){const t=e.toString();return iy[t]||(iy[t]=new ry),iy[t]}class ay{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Bg((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ly="start";class cy{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ag(e),this.stats_=oy(t),this.urlFn=e=>(this.appCheckToken&&(e[$g]=this.appCheckToken),ny(t,ey,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ay(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ht()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new uy((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ly)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ly]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xg,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[$g]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Jg.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cy.forceAllow_=!0}static forceDisallow(){cy.forceDisallow_=!0}static isAvailable(){return!ht()&&(!!cy.forceAllow_||!cy.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=vt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=We(t),r=Ug(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ht())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=vt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uy{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ht())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Eg(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=uy.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(xb){xg("frame writing exception"),xb.stack&&xg(xb.stack),xg(xb)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xg("No IE domain setting required")}catch(xb){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){ht()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{xg("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(xb){}}),Math.floor(1))}}let hy=null;"undefined"!==typeof MozWebSocket?hy=MozWebSocket:"undefined"!==typeof WebSocket&&(hy=WebSocket);class dy{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ag(this.connId),this.stats_=oy(t),this.connURL=dy.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Xg,!ht()&&"undefined"!==typeof location&&location.hostname&&Jg.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[$g]=r),i&&(s.p=i),ny(e,Zg,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wg.set("previous_websocket_failure",!0);try{let e;if(ht()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Xg,"/").concat(fg,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new hy(this.connURL,[],e)}catch(xb){this.log_("Error instantiating WebSocket.");const t=xb.message||xb.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){dy.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==hy&&!dy.forceDisallow_}static previouslyFailed(){return wg.isInMemoryStorage||!0===wg.get("previous_websocket_failure")}markConnectionHealthy(){wg.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=yt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(qe(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=vt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ug(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(xb){this.log_("Exception thrown from WebSocket.send():",xb.message||xb.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dy.responsesRequiredToBeHealthy=2,dy.healthyTimeout=3e4;class py{static get ALL_TRANSPORTS(){return[cy,dy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=dy&&dy.isAvailable();let n=t&&!dy.previouslyFailed();if(e.webSocketOnly&&(t||Rg("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[dy];else{const e=this.transports_=[];for(const t of py.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);py.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}py.globalTransportInitialized_=!1;class fy{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ag("c:"+this.id+":"),this.transportManager_=new py(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Kg((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qg("t",e),n=qg("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qg("t",e),n=qg("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qg("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ng("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ng("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xg!==n&&Rg("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Kg((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kg((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class my{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class gy{constructor(e){this.allowedEvents_=e,this.listeners_={},qe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){qe(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class yy extends gy{static getInstance(){return new yy}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||lt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return qe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class vy{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wy(){return new vy("")}function _y(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function by(e){return e.pieces_.length-e.pieceNum_}function Ey(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new vy(e.pieces_,t)}function ky(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Sy(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new vy(t,0)}function Cy(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof vy)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new vy(n,0)}function Iy(e){return e.pieceNum_>=e.pieces_.length}function xy(e,t){const n=_y(e),r=_y(t);if(null===n)return t;if(n===r)return xy(Ey(e),Ey(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ay(e,t){if(by(e)!==by(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ny(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(by(e)>by(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Py{constructor(e,t){this.errorPrefix_=t,this.parts_=Ty(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ot(this.parts_[n]);Ry(this)}}function Ry(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Oy(e))}function Oy(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Dy extends gy{static getInstance(){return new Dy}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return qe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ly=1e3;class My extends my{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=My.nextPersistentConnectionId_++,this.log_=Ag("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ly,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ht())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Dy.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&yy.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(vt(i)),qe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new et,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),qe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),qe(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;My.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&_t(e,"w")){const n=bt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Rg("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=wt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=wt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),qe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ng("Unrecognized action received from server: "+vt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){qe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ly,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ly,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ly),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+My.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){qe(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?xg("getToken() completed but was canceled"):(xg("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new fy(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Rg(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Ng){this.log_("Failed to get token: "+Ng),s||(this.repoInfo_.nodeAdmin&&Rg(Ng),a())}}}interrupt(e){xg("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xg("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Et(this.interruptReasons_)&&(this.reconnectDelay_=Ly,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>jg(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new vy(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){xg("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){xg("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ht()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fg.replace(/\./g,"-")]=1,lt()?e["framework.cordova"]=1:ut()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yy.getInstance().currentlyOnline();return Et(this.interruptReasons_)&&e}}My.nextPersistentConnectionId_=0,My.nextConnectionId_=0;class Fy{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Fy(e,t)}}class qy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Fy(Dg,e),r=new Fy(Dg,t);return 0!==this.compare(n,r)}minPost(){return Fy.MIN}}let jy;class Uy extends qy{static get __EMPTY_NODE(){return jy}static set __EMPTY_NODE(e){jy=e}compare(e,t){return Mg(e.name,t.name)}isDefinedOn(e){throw je("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Fy.MIN}maxPost(){return new Fy(Lg,jy)}makePost(e,t){return qe("string"===typeof e,"KeyIndex indexValue must always be a string."),new Fy(e,jy)}toString(){return".key"}}const Vy=new Uy;class zy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Wy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wy.RED,this.left=null!=r?r:Hy.EMPTY_NODE,this.right=null!=i?i:Hy.EMPTY_NODE}copy(e,t,n,r,i){return new Wy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hy.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Hy.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Wy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Wy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Wy.RED=!0,Wy.BLACK=!1;class Hy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hy.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Hy(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Wy.BLACK,null,null))}remove(e){return new Hy(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wy.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zy(this.root_,null,this.comparator_,!0,e)}}function By(e,t){return Mg(e.name,t.name)}function Ky(e,t){return Mg(e,t)}let Gy;Hy.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Wy(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qy=function(e){return"number"===typeof e?"number:"+zg(e):"string:"+e},Yy=function(e){if(e.isLeafNode()){const t=e.val();qe("string"===typeof t||"number"===typeof t||"object"===typeof t&&_t(t,".sv"),"Priority must be a string or number.")}else qe(e===Gy||e.isEmpty(),"priority of unexpected type.");qe(e===Gy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xy,Jy,$y;class Zy{static set __childrenNodeConstructor(e){Xy=e}static get __childrenNodeConstructor(){return Xy}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zy.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,qe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Zy(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Zy.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Iy(e)?this:".priority"===_y(e)?this.priorityNode_:Zy.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Zy.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=_y(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(qe(".priority"!==n||1===by(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Zy.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ey(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qy(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?zg(this.value_):this.value_,this.lazyHash_=kg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Zy.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zy.__childrenNodeConstructor?-1:(qe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Zy.VALUE_TYPE_ORDER.indexOf(t),i=Zy.VALUE_TYPE_ORDER.indexOf(n);return qe(r>=0,"Unknown leaf type: "+t),qe(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Zy.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ev=new class extends qy{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Mg(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Fy.MIN}maxPost(){return new Fy(Lg,new Zy("[PRIORITY-POST]",$y))}makePost(e,t){const n=Jy(e);return new Fy(t,new Zy("[PRIORITY-POST]",n))}toString(){return".priority"}},tv=Math.log(2);class nv{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/tv,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rv=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Wy(a,o.node,Wy.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Wy(a,o.node,Wy.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Wy(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Wy.BLACK):(a(r,Wy.BLACK),a(r,Wy.RED))}return s}(new nv(e.length));return new Hy(r||t,s)};let iv;const sv={};class ov{static get Default(){return qe(sv&&ev,"ChildrenNode.ts has not been loaded"),iv=iv||new ov({".priority":sv},{".priority":ev}),iv}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=bt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hy?t:null}hasIndex(e){return _t(this.indexSet_,e.toString())}addIndex(e,t){qe(e!==Vy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Fy.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?rv(n,e.getCompare()):sv;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new ov(c,l)}addToIndexes(e,t){const n=kt(this.indexes_,((n,r)=>{const i=bt(this.indexSet_,r);if(qe(i,"Missing index implementation for "+r),n===sv){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Fy.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),rv(n,i.getCompare())}return sv}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Fy(e.name,r))),i.insert(e,e.node)}}));return new ov(n,this.indexSet_)}removeFromIndexes(e,t){const n=kt(this.indexes_,(n=>{if(n===sv)return n;{const r=t.get(e.name);return r?n.remove(new Fy(e.name,r)):n}}));return new ov(n,this.indexSet_)}}let av;class lv{static get EMPTY_NODE(){return av||(av=new lv(new Hy(Ky),null,ov.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yy(this.priorityNode_),this.children_.isEmpty()&&qe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||av}updatePriority(e){return this.children_.isEmpty()?this:new lv(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?av:t}}getChild(e){const t=_y(e);return null===t?this:this.getImmediateChild(t).getChild(Ey(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(qe(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Fy(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?av:this.priorityNode_;return new lv(r,s,i)}}updateChild(e,t){const n=_y(e);if(null===n)return t;{qe(".priority"!==_y(e)||1===by(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Ey(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(ev,((s,o)=>{t[s]=o.val(e),n++,i&&lv.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qy(this.getPriority().val())+":"),this.forEachChild(ev,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":kg(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Fy(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Fy(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Fy(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Fy.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Fy.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cv?-1:0}withIndex(e){if(e===Vy||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new lv(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Vy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ev),n=t.getIterator(ev);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Vy?null:this.indexMap_.get(e.toString())}}lv.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const cv=new class extends lv{constructor(){super(new Hy(Ky),lv.EMPTY_NODE,ov.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lv.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Fy,{MIN:{value:new Fy(Dg,lv.EMPTY_NODE)},MAX:{value:new Fy(Lg,cv)}}),Uy.__EMPTY_NODE=lv.EMPTY_NODE,Zy.__childrenNodeConstructor=lv,Gy=cv,function(e){$y=e}(cv);function uv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lv.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),qe(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Zy(e,uv(t))}if(e instanceof Array){let n=lv.EMPTY_NODE;return Vg(e,((t,r)=>{if(_t(e,t)&&"."!==t.substring(0,1)){const e=uv(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(uv(t))}{const n=[];let r=!1;if(Vg(e,((e,t)=>{if("."!==e.substring(0,1)){const i=uv(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Fy(e,i)))}})),0===n.length)return lv.EMPTY_NODE;const i=rv(n,By,(e=>e.name),Ky);if(r){const e=rv(n,ev.getCompare());return new lv(i,uv(t),new ov({".priority":e},{".priority":ev}))}return new lv(i,uv(t),ov.Default)}}!function(e){Jy=e}(uv);class hv extends qy{constructor(e){super(),this.indexPath_=e,qe(!Iy(e)&&".priority"!==_y(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Mg(e.name,t.name):i}makePost(e,t){const n=uv(e),r=lv.EMPTY_NODE.updateChild(this.indexPath_,n);return new Fy(t,r)}maxPost(){const e=lv.EMPTY_NODE.updateChild(this.indexPath_,cv);return new Fy(Lg,e)}toString(){return Ty(this.indexPath_,0).join("/")}}const dv=new class extends qy{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Mg(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Fy.MIN}maxPost(){return Fy.MAX}makePost(e,t){const n=uv(e);return new Fy(t,n)}toString(){return".value"}};function pv(e){return{type:"value",snapshotNode:e}}function fv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mv(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class yv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ev}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return qe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return qe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dg}hasEnd(){return this.endSet_}getIndexEndValue(){return qe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return qe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return qe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ev}copy(){const e=new yv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vv(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ev?n="$priority":e.index_===dv?n="$value":e.index_===Vy?n="$key":(qe(e.index_ instanceof hv,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=vt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=vt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+vt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=vt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+vt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function wv(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ev&&(t.i=e.index_.toString()),t}class _v extends my{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(qe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ag("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=_v.getListenId_(e,n),o={};this.listens_[s]=o;const a=vv(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),bt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=_v.getListenId_(e,t);delete this.listens_[n]}get(e){const t=vv(e._queryParams),n=e._path.toString(),r=new et;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ct(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=yt(a.responseText)}catch(xb){Rg("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Rg("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class bv{constructor(){this.rootNode_=lv.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ev(){return{value:null,children:new Map}}function kv(e,t,n){if(Iy(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=_y(t);e.children.has(r)||e.children.set(r,Ev());kv(e.children.get(r),t=Ey(t),n)}}function Tv(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Tv(r,new vy(t.toString()+"/"+e),n)}))}class Sv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vg(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Cv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sv(e);const n=1e4+2e4*Math.random();Kg(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Vg(e,((e,r)=>{r>0&&_t(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Kg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Iv;function xv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Iv||(Iv={}));class Av{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Iv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Iy(this.path)){if(null!=this.affectedTree.value)return qe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vy(e));return new Av(wy(),t,this.revert)}}return qe(_y(this.path)===e,"operationForChild called for unrelated child."),new Av(Ey(this.path),this.affectedTree,this.revert)}}class Nv{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Iv.OVERWRITE}operationForChild(e){return Iy(this.path)?new Nv(this.source,wy(),this.snap.getImmediateChild(e)):new Nv(this.source,Ey(this.path),this.snap)}}class Pv{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Iv.MERGE}operationForChild(e){if(Iy(this.path)){const t=this.children.subtree(new vy(e));return t.isEmpty()?null:t.value?new Nv(this.source,wy(),t.value):new Pv(this.source,wy(),t)}return qe(_y(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pv(this.source,Ey(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rv{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Iy(e))return this.isFullyInitialized()&&!this.filtered_;const t=_y(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Ov(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw je("Should only compare child_ events.");const r=new Fy(t.childName,t.snapshotNode),i=new Fy(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Dv(e,t){return{eventCache:e,serverCache:t}}function Lv(e,t,n,r){return Dv(new Rv(t,n,r),e.serverCache)}function Mv(e,t,n,r){return Dv(e.eventCache,new Rv(t,n,r))}function Fv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function qv(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let jv;class Uv{static fromObject(e){let t=new Uv(null);return Vg(e,((e,n)=>{t=t.set(new vy(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(jv||(jv=new Hy(Fg)),jv);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wy(),value:this.value};if(Iy(e))return null;{const n=_y(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Ey(e),t);if(null!=i){return{path:Cy(new vy(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Iy(e))return this;{const t=_y(e),n=this.children.get(t);return null!==n?n.subtree(Ey(e)):new Uv(null)}}set(e,t){if(Iy(e))return new Uv(t,this.children);{const n=_y(e),r=(this.children.get(n)||new Uv(null)).set(Ey(e),t),i=this.children.insert(n,r);return new Uv(this.value,i)}}remove(e){if(Iy(e))return this.children.isEmpty()?new Uv(null):new Uv(null,this.children);{const t=_y(e),n=this.children.get(t);if(n){const r=n.remove(Ey(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Uv(null):new Uv(this.value,i)}return this}}get(e){if(Iy(e))return this.value;{const t=_y(e),n=this.children.get(t);return n?n.get(Ey(e)):null}}setTree(e,t){if(Iy(e))return t;{const n=_y(e),r=(this.children.get(n)||new Uv(null)).setTree(Ey(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Uv(this.value,i)}}fold(e){return this.fold_(wy(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Cy(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,wy(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Iy(e))return null;{const r=_y(e),i=this.children.get(r);return i?i.findOnPath_(Ey(e),Cy(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wy(),t)}foreachOnPath_(e,t,n){if(Iy(e))return this;{this.value&&n(t,this.value);const r=_y(e),i=this.children.get(r);return i?i.foreachOnPath_(Ey(e),Cy(t,r),n):new Uv(null)}}foreach(e){this.foreach_(wy(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Cy(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Vv{constructor(e){this.writeTree_=e}static empty(){return new Vv(new Uv(null))}}function zv(e,t,n){if(Iy(t))return new Vv(new Uv(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=xy(i,t);return s=s.updateChild(o,n),new Vv(e.writeTree_.set(i,s))}{const r=new Uv(n),i=e.writeTree_.setTree(t,r);return new Vv(i)}}}function Wv(e,t,n){let r=e;return Vg(n,((e,n)=>{r=zv(r,Cy(t,e),n)})),r}function Hv(e,t){if(Iy(t))return Vv.empty();{const n=e.writeTree_.setTree(t,new Uv(null));return new Vv(n)}}function Bv(e,t){return null!=Kv(e,t)}function Kv(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xy(n.path,t)):null}function Gv(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ev,((e,n)=>{t.push(new Fy(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Fy(e,n.value))})),t}function Qv(e,t){if(Iy(t))return e;{const n=Kv(e,t);return new Vv(null!=n?new Uv(n):e.writeTree_.subtree(t))}}function Yv(e){return e.writeTree_.isEmpty()}function Xv(e,t){return Jv(wy(),e.writeTree_,t)}function Jv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(qe(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Jv(Cy(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Cy(e,".priority"),r)),n}}function $v(e,t){return hw(t,e)}function Zv(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));qe(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&ew(t,r.path)?i=!1:Ny(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=nw(e.allWrites,tw,wy()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Hv(e.visibleWrites,r.path);else{Vg(r.children,(t=>{e.visibleWrites=Hv(e.visibleWrites,Cy(r.path,t))}))}return!0}return!1}function ew(e,t){if(e.snap)return Ny(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ny(Cy(e.path,n),t))return!0;return!1}function tw(e){return e.visible}function nw(e,t,n){let r=Vv.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Ny(n,e)?(t=xy(n,e),r=zv(r,t,s.snap)):Ny(e,n)&&(t=xy(e,n),r=zv(r,wy(),s.snap.getChild(t)));else{if(!s.children)throw je("WriteRecord should have .snap or .children");if(Ny(n,e))t=xy(n,e),r=Wv(r,t,s.children);else if(Ny(e,n))if(t=xy(e,n),Iy(t))r=Wv(r,wy(),s.children);else{const e=bt(s.children,_y(t));if(e){const n=e.getChild(Ey(t));r=zv(r,wy(),n)}}}}}return r}function rw(e,t,n,r,i){if(r||i){const s=Qv(e.visibleWrites,t);if(!i&&Yv(s))return n;if(i||null!=n||Bv(s,wy())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ny(e.path,t)||Ny(t,e.path))};return Xv(nw(e.allWrites,s,t),n||lv.EMPTY_NODE)}return null}{const r=Kv(e.visibleWrites,t);if(null!=r)return r;{const r=Qv(e.visibleWrites,t);if(Yv(r))return n;if(null!=n||Bv(r,wy())){return Xv(r,n||lv.EMPTY_NODE)}return null}}}function iw(e,t,n,r){return rw(e.writeTree,e.treePath,t,n,r)}function sw(e,t){return function(e,t,n){let r=lv.EMPTY_NODE;const i=Kv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ev,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Qv(e.visibleWrites,t);return n.forEachChild(ev,((e,t)=>{const n=Xv(Qv(i,new vy(e)),t);r=r.updateImmediateChild(e,n)})),Gv(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Gv(Qv(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ow(e,t,n,r){return function(e,t,n,r,i){qe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Cy(t,n);if(Bv(e.visibleWrites,s))return null;{const t=Qv(e.visibleWrites,s);return Yv(t)?i.getChild(n):Xv(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function aw(e,t){return function(e,t){return Kv(e.visibleWrites,t)}(e.writeTree,Cy(e.treePath,t))}function lw(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Qv(e.visibleWrites,t),c=Kv(l,wy());if(null!=c)a=c;else{if(null==n)return[];a=Xv(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function cw(e,t,n){return function(e,t,n,r){const i=Cy(t,n),s=Kv(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Xv(Qv(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function uw(e,t){return hw(Cy(e.treePath,t),e.writeTree)}function hw(e,t){return{treePath:e,writeTree:t}}class dw{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;qe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),qe(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mv(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,fv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw je("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gv(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const pw=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class fw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Rv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cw(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qv(this.viewCache_),i=lw(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function mw(e,t,n,r,i){const s=new dw;let o,a;if(n.type===Iv.OVERWRITE){const l=n;l.source.fromUser?o=vw(e,t,l.path,l.snap,r,i,s):(qe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Iy(l.path),o=yw(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Iv.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=Cy(n,r);ww(t,_y(c))&&(a=vw(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=Cy(n,r);ww(t,_y(c))||(a=vw(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(qe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=bw(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Iv.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=aw(r,n))return t;{const a=new fw(r,t,i),l=t.eventCache.getNode();let c;if(Iy(n)||".priority"===_y(n)){let n;if(t.serverCache.isFullyInitialized())n=iw(r,qv(t));else{const e=t.serverCache.getNode();qe(e instanceof lv,"serverChildren would be complete if leaf node"),n=sw(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=_y(n);let u=cw(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,Ey(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,lv.EMPTY_NODE,Ey(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=iw(r,qv(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=aw(r,wy()),Lv(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=aw(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Iy(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return yw(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Iy(n)){let r=new Uv(null);return l.getNode().forEachChild(Vy,((e,t)=>{r=r.set(new vy(e),t)})),bw(e,t,n,r,i,s,a,o)}return t}{let c=new Uv(null);return r.foreach(((e,t)=>{const r=Cy(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),bw(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Iv.LISTEN_COMPLETE)throw je("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Mv(t,s.getNode(),s.isFullyInitialized()||Iy(n),s.isFiltered());return gw(e,o,n,r,pw,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Fv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pv(Fv(t)))}}(t,o,l),{viewCache:o,changes:l}}function gw(e,t,n,r,i,s){const o=t.eventCache;if(null!=aw(r,n))return t;{let a,l;if(Iy(n))if(qe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=qv(t),i=sw(r,n instanceof lv?n:lv.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=iw(r,qv(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=_y(n);if(".priority"===c){qe(1===by(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=ow(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=Ey(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=ow(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=cw(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Lv(t,a,o.isFullyInitialized()||Iy(n),e.filter.filtersNodes())}}function yw(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Iy(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=_y(n);if(!l.isCompleteForPath(n)&&by(n)>1)return t;const i=Ey(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,pw,null)}const h=Mv(t,c,l.isFullyInitialized()||Iy(n),u.filtersNodes());return gw(e,h,n,i,new fw(i,h,s),a)}function vw(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new fw(i,t,s);if(Iy(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Lv(t,c,!0,e.filter.filtersNodes());else{const i=_y(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Lv(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Ey(n),c=a.getNode().getImmediateChild(i);let h;if(Iy(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===ky(s)&&e.getChild(Sy(s)).isEmpty()?e:e.updateChild(s,r):lv.EMPTY_NODE}if(c.equals(h))l=t;else{l=Lv(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function ww(e,t){return e.eventCache.isCompleteForChild(t)}function _w(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function bw(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Iy(n)?r:new Uv(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=_w(0,t.serverCache.getNode().getImmediateChild(n),r);c=yw(e,c,new vy(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=_w(0,t.serverCache.getNode().getImmediateChild(n),r);c=yw(e,c,new vy(n),l,i,s,o,a)}})),c}function Ew(e,t){const n=qv(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Iy(t)&&!n.getImmediateChild(_y(t)).isEmpty())?n.getChild(t):null}function kw(e,t,n,r){t.type===Iv.MERGE&&null!==t.source.queryId&&(qe(qv(e.viewCache_),"We should always have a full cache before handling merges"),qe(Fv(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=mw(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,qe(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),qe(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),qe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Tw(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Tw(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ov(e,i,"child_removed",t,r,n),Ov(e,i,"child_added",t,r,n),Ov(e,i,"child_moved",s,r,n),Ov(e,i,"child_changed",t,r,n),Ov(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Sw,Cw;function Iw(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return qe(null!=s,"SyncTree gave us an op for an invalid query."),kw(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(kw(s,t,n,r));return i}}function xw(e,t){let n=null;for(const r of e.views.values())n=n||Ew(r,t);return n}class Aw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Uv(null),this.pendingWriteTree_={visibleWrites:Vv.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Nw(e,t,n,r,i){return function(e,t,n,r,i){qe(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=zv(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Lw(e,new Nv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Zv(e.pendingWriteTree_,t)){let t=new Uv(null);return null!=r.snap?t=t.set(wy(),!0):Vg(r.children,(e=>{t=t.set(new vy(e),!0)})),Lw(e,new Av(r.path,t,n))}return[]}function Rw(e,t,n){return Lw(e,new Nv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ow(e,t,n,r){const i=qw(e,r);if(null!=i){const r=jw(i),s=r.path,o=r.queryId,a=xy(s,t);return Uw(e,s,new Nv(xv(o),a,n))}return[]}function Dw(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=xw(n,xy(e,t));if(r)return r}));return rw(r,t,i,n,!0)}function Lw(e,t){return Mw(t,e.syncPointTree_,null,$v(e.pendingWriteTree_,wy()))}function Mw(e,t,n,r){if(Iy(e.path))return Fw(e,t,n,r);{const i=t.get(wy());null==n&&null!=i&&(n=xw(i,wy()));let s=[];const o=_y(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=uw(r,o);s=s.concat(Mw(a,l,e,t))}return i&&(s=s.concat(Iw(i,e,r,n))),s}}function Fw(e,t,n,r){const i=t.get(wy());null==n&&null!=i&&(n=xw(i,wy()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=uw(r,t),l=e.operationForChild(t);l&&(s=s.concat(Fw(l,i,o,a)))})),i&&(s=s.concat(Iw(i,e,r,n))),s}function qw(e,t){return e.tagToQueryMap.get(t)}function jw(e){const t=e.indexOf("$");return qe(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new vy(e.substr(0,t))}}function Uw(e,t,n){const r=e.syncPointTree_.get(t);qe(r,"Missing sync point for query tag that we're tracking");return Iw(r,n,$v(e.pendingWriteTree_,t),null)}class Vw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Vw(t)}node(){return this.node_}}class zw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Cy(this.path_,e);return new zw(this.syncTree_,t)}node(){return Dw(this.syncTree_,this.path_)}}const Ww=function(e,t,n){return e&&"object"===typeof e?(qe(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Hw(e[".sv"],t,n):"object"===typeof e[".sv"]?Bw(e[".sv"],t):void qe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Hw=function(e,t,n){if("timestamp"===e)return n.timestamp;qe(!1,"Unexpected server value: "+e)},Bw=function(e,t,n){e.hasOwnProperty("increment")||qe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&qe(!1,"Unexpected increment value: "+r);const i=t.node();if(qe(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Kw=function(e,t,n,r){return Qw(t,new zw(n,e),r)},Gw=function(e,t,n){return Qw(e,new Vw(t),n)};function Qw(e,t,n){const r=e.getPriority().val(),i=Ww(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Ww(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Zy(s,uv(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Zy(i))),r.forEachChild(ev,((e,r)=>{const i=Qw(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class Yw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Xw(e,t){let n=t instanceof vy?t:new vy(t),r=e,i=_y(n);for(;null!==i;){const e=bt(r.node.children,i)||{children:{},childCount:0};r=new Yw(i,r,e),n=Ey(n),i=_y(n)}return r}function Jw(e){return e.node.value}function $w(e,t){e.node.value=t,r_(e)}function Zw(e){return e.node.childCount>0}function e_(e,t){Vg(e.node.children,((n,r)=>{t(new Yw(n,e,r))}))}function t_(e,t,n,r){n&&!r&&t(e),e_(e,(e=>{t_(e,t,!0,r)})),n&&r&&t(e)}function n_(e){return new vy(null===e.parent?e.name:n_(e.parent)+"/"+e.name)}function r_(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Jw(e)&&!Zw(e)}(n),i=_t(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,r_(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,r_(e))}(e.parent,e.name,e)}const i_=/[\[\].#$\/\u0000-\u001F\u007F]/,s_=/[\[\].#$\u0000-\u001F\u007F]/,o_=10485760,a_=function(e){return"string"===typeof e&&0!==e.length&&!i_.test(e)},l_=function(e){return"string"===typeof e&&0!==e.length&&!s_.test(e)},c_=function(e,t,n){const r=n instanceof vy?new Py(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Oy(r));if("function"===typeof t)throw new Error(e+"contains a function "+Oy(r)+" with contents = "+t.toString());if(Og(t))throw new Error(e+"contains "+t.toString()+" "+Oy(r));if("string"===typeof t&&t.length>o_/3&&Ot(t)>o_)throw new Error(e+"contains a string greater than "+o_+" utf8 bytes "+Oy(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Vg(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!a_(t)))throw new Error(e+" contains an invalid key ("+t+") "+Oy(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ot(t),Ry(e)}(r,t),c_(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Ot(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Oy(r)+" in addition to actual children.")}},u_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!a_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),l_(e)}(n))throw new Error(Rt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class h_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function d_(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Ay(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function p_(e,t,n){d_(e,n),f_(e,(e=>Ny(e,t)||Ny(t,e)))}function f_(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(m_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function m_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Sg&&xg("event: "+n.toString()),Bg(r)}}}const g_="repo_interrupt";class y_{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new h_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ev(),this.transactionQueueTree_=new Yw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v_(e,t,n){if(e.stats_=oy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new _v(e.repoInfo_,((t,n,r,i)=>{b_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>E_(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vt(n)}catch(xb){throw new Error("Invalid authOverride provided: "+xb)}}e.persistentConnection_=new My(e.repoInfo_,t,((t,n,r,i)=>{b_(e,t,n,r,i)}),(t=>{E_(e,t)}),(t=>{!function(e,t){Vg(t,((t,n)=>{k_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return sy[n]||(sy[n]=t()),sy[n]}(e.repoInfo_,(()=>new Cv(e.stats_,e.server_))),e.infoData_=new bv,e.infoSyncTree_=new Aw({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Rw(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),k_(e,"connected",!1),e.serverSyncTree_=new Aw({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);p_(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function w_(e){const t=e.infoData_.getNode(new vy(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function __(e){return(t=(t={timestamp:w_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function b_(e,t,n,r,i){e.dataUpdateCount++;const s=new vy(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=kt(n,(e=>uv(e)));o=function(e,t,n,r){const i=qw(e,r);if(i){const r=jw(i),s=r.path,o=r.queryId,a=xy(s,t),l=Uv.fromObject(n);return Uw(e,s,new Pv(xv(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=uv(n);o=Ow(e.serverSyncTree_,s,t,i)}else if(r){const t=kt(n,(e=>uv(e)));o=function(e,t,n){const r=Uv.fromObject(n);return Lw(e,new Pv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=uv(n);o=Rw(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=A_(e,s)),p_(e.eventQueue_,a,o)}function E_(e,t){k_(e,"connected",t),!1===t&&function(e){C_(e,"onDisconnectEvents");const t=__(e),n=Ev();Tv(e.onDisconnect_,wy(),((r,i)=>{const s=Kw(r,i,e.serverSyncTree_,t);kv(n,r,s)}));let r=[];Tv(n,wy(),((t,n)=>{r=r.concat(Rw(e.serverSyncTree_,t,n));const i=D_(e,t);A_(e,i)})),e.onDisconnect_=Ev(),p_(e.eventQueue_,wy(),r)}(e)}function k_(e,t,n){const r=new vy("/.info/"+t),i=uv(n);e.infoData_.updateSnapshot(r,i);const s=Rw(e.infoSyncTree_,r,i);p_(e.eventQueue_,r,s)}function T_(e){return e.nextWriteId_++}function S_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(g_)}function C_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];xg(t,...r)}function I_(e,t,n){return Dw(e.serverSyncTree_,t,n)||lv.EMPTY_NODE}function x_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||O_(e,t),Jw(t)){const n=P_(e,t);qe(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=I_(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];qe(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=xy(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{C_(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Pw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();O_(e,Xw(e.transactionQueueTree_,t)),x_(e,e.transactionQueueTree_),p_(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Bg(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Rg("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}A_(e,t)}}),o)}(e,n_(t),n)}else Zw(t)&&e_(t,(t=>{x_(e,t)}))}function A_(e,t){const n=N_(e,t),r=n_(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=xy(n,s.path);let u,h=!1;if(qe(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(Pw(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,u="maxretry",i=i.concat(Pw(e.serverSyncTree_,s.currentWriteId,!0));else{const n=I_(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){c_("transaction failed: Data returned ",r,s.path);let t=uv(r);"object"===typeof r&&null!=r&&_t(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=__(e),c=Gw(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=T_(e),o.splice(o.indexOf(a),1),i=i.concat(Nw(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Pw(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(Pw(e.serverSyncTree_,s.currentWriteId,!0))}p_(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;O_(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Bg(r[l]);x_(e,e.transactionQueueTree_)}(e,P_(e,n),r),r}function N_(e,t){let n,r=e.transactionQueueTree_;for(n=_y(t);null!==n&&void 0===Jw(r);)r=Xw(r,n),n=_y(t=Ey(t));return r}function P_(e,t){const n=[];return R_(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function R_(e,t,n){const r=Jw(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);e_(t,(t=>{R_(e,t,n)}))}function O_(e,t){const n=Jw(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,$w(t,n.length>0?n:void 0)}e_(t,(t=>{O_(e,t)}))}function D_(e,t){const n=n_(N_(e,t)),r=Xw(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{L_(e,t)})),L_(e,r),t_(r,(t=>{L_(e,t)})),n}function L_(e,t){const n=Jw(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(qe(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(qe(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Pw(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?$w(t,void 0):n.length=s+1,p_(e.eventQueue_,n_(t),i);for(let e=0;e<r.length;e++)Bg(r[e])}}const M_=function(e,t){const n=F_(e),r=n.namespace;"firebase.com"===n.domain&&Pg(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Pg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rg("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ty(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new vy(n.pathString)}},F_=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(xb){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rg("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},q_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class j_{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Iy(this._path)?null:ky(this._path)}get ref(){return new U_(this._repo,this._path)}get _queryIdentifier(){const e=wv(this._queryParams),t=jg(e);return"{}"===t?"default":t}get _queryObject(){return wv(this._queryParams)}isEqual(e){if(!((e=Dt(e))instanceof j_))return!1;const t=this._repo===e._repo,n=Ay(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class U_ extends j_{constructor(e,t){super(e,t,new yv,!1)}get parent(){const e=Sy(this._path);return null===e?null:new U_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){qe(!Sw,"__referenceConstructor has already been defined"),Sw=e}(U_),function(e){qe(!Cw,"__referenceConstructor has already been defined"),Cw=e}(U_);const V_={};let z_=!1;function W_(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Pg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xg("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=M_(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=M_(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Yg(Yg.OWNER):new Qg(e.name,e.options,t);u_("Invalid Firebase Database URL",l),Iy(l.path)||Pg("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=V_[t.name];i||(i={},V_[t.name]=i);let s=i[e.toURLString()];s&&Pg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new y_(e,z_,n,r),i[e.toURLString()]=s,s}(c,e,u,new Gg(e,n));return new H_(h,e)}class H_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(v_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new U_(this._repo,wy())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=V_[t];n&&n[e.key]===e||Pg("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),S_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pg("Cannot call "+e+" on a deleted database.")}}My.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},My.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){mg(Xn),Bn(new Lt("database",((e,t)=>{let{instanceIdentifier:n}=t;return W_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Zn(dg,pg,e),Zn(dg,pg,"esm2017")}();const B_=Jn({apiKey:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyC795j1Xf7TJv354A3z8i8y0Q9VVbDpmHQ",authDomain:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"dudupe-504ce.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_DATABASE_URL||"https://dudupe-504ce-default-rtdb.firebaseio.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"dudupe-504ce",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"dudupe-504ce.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"716564438315",appId:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:716564438315:web:6a0d20ae5cc22ff479f96e",measurementId:{NODE_ENV:"production",PUBLIC_URL:"/dudupe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MEASUREMENT_ID||"G-JQTVGV6MBH"}),K_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n();const t=Kn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Kn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Tt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;gr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ao,persistence:[qs,vs,ks]}),r=Ze("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Oo)return;const r=null===t||void 0===t?void 0:t.token;Do!==r&&(Do=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Dt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Dt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=Xe("auth");return s&&Fi(n,"http://".concat(s)),n}(B_),G_=function(e,t){const n="object"==typeof e?e:$n(),r="string"==typeof e?e:t||Zl,i=Kn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Je("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=dm(e,gm);const s=tt(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&(nt("https://".concat(l)),ot("Firestore",!0)),o.host!==pm&&o.host!==l&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Tt(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Zo.MOCK_USER;else{t=rt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new da(ha.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zo(s)}e._authCredentials=new ga(new fa(t,n))}}(i,...e)}return i}(B_);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n(),t=arguments.length>1?arguments[1]:void 0;const n=Kn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Je("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Dt(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Tt(r,s.repoInfo_.emulatorOptions))return;Pg("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Pg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Yg(Yg.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:rt(r.mockUserToken,e.app.options.projectId);o=new Yg(t)}tt(t)&&(nt(t),ot("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=tt(t.substring(0,i));e.repoInfo_=new ty(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}}(B_);const Q_=new class{constructor(){this.currentUser=null}async register(e,t,n){try{const i=await async function(e,t,n){if(Gn(e.app))return Promise.reject(wr(e));const r=Si(e),i=Li(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rs,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ds(e),t})),o=await is._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(K_,e,t),s=i.user;await ps(s,{displayName:n});try{await this.createUserDocument(s,{displayName:n})}catch(r){console.warn("Could not create user document in Firestore:",r)}return{success:!0,user:s,message:"Account created successfully!"}}catch(Ng){return{success:!1,error:Ng.code,message:this.getErrorMessage(Ng.code)}}}async login(e,t){try{const n=await function(e,t,n){return Gn(e.app)?Promise.reject(wr(e)):hs(Dt(e),Xi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ds(e),t}))}(K_,e,t);return{success:!0,user:n.user,message:"Logged in successfully!"}}catch(Ng){return{success:!1,error:Ng.code,message:this.getErrorMessage(Ng.code)}}}async logout(){try{return await function(e){return Dt(e).signOut()}(K_),{success:!0,message:"Logged out successfully!"}}catch(Ng){return{success:!1,error:Ng.code,message:this.getErrorMessage(Ng.code)}}}async createUserDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;const n=_m(G_,"users",e.uid);try{if(!(await ag(n)).exists()){const{displayName:r,email:i}=e,s=hg();console.log("Creating user document for:",e.uid),await function(e,t,n){e=dm(e,vm);const r=dm(e.firestore,Tm),i=rg(e.converter,t,n);return cg(r,[jm(qm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ku.none())])}(n,Ae({displayName:r||t.displayName||"Anonymous",email:i,createdAt:s,lastLoginAt:s,totalXP:0,currentStreak:0,longestStreak:0,lessonsCompleted:0,averageAccuracy:0,totalTimeSpent:0,achievements:[],preferences:{selectedLanguage:null,notifications:!0,soundEnabled:!0},progress:{}},t)),console.log("User document created successfully")}}catch(Ng){throw console.error("Error with user document:",Ng.code,Ng.message),"permission-denied"===Ng.code&&console.error("Firestore permission denied. Check security rules."),Ng}return n}async getUserData(e){try{const t=_m(G_,"users",e),n=await ag(t);return n.exists()?{success:!0,data:n.data()}:{success:!1,message:"User data not found"}}catch(Ng){return console.warn("Could not fetch user data from Firestore:",Ng),{success:!1,error:Ng.code||"offline",message:"Could not connect to database. Using local authentication only."}}}async updateUserData(e,t){try{const n=_m(G_,"users",e);return await function(e,t,n){e=dm(e,vm);const r=dm(e.firestore,Tm),i=qm(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Dt(t))||t instanceof xm?Wm(i,"updateDoc",e._key,t,n,a):zm(i,"updateDoc",e._key,t),cg(r,[s.toMutation(e._key,Ku.exists(!0))])}(n,Ae(Ae({},t),{},{lastUpdated:hg()})),{success:!0,message:"User data updated successfully"}}catch(Ng){return{success:!1,error:Ng.code,message:"Error updating user data"}}}onAuthStateChange(e){return function(e,t,n,r){return Dt(e).onAuthStateChanged(t,n,r)}(K_,e)}getCurrentUser(){return K_.currentUser}getErrorMessage(e){return{"auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters long.","auth/invalid-email":"Please enter a valid email address.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/user-disabled":"This account has been disabled.","auth/operation-not-allowed":"This operation is not allowed.","auth/invalid-credential":"Invalid email or password.","auth/missing-password":"Please enter your password.","auth/missing-email":"Please enter your email address."}[e]||"An unexpected error occurred. Please try again."}},Y_=Q_;var X_=n(579);const J_=(0,i.createContext)(),$_=()=>{const e=(0,i.useContext)(J_);if(!e)throw new Error("useApp must be used within an AppProvider");return e},Z_=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(5),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[h,d]=(0,i.useState)(null),[p,f]=(0,i.useState)(!0),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(De.getUserStats()),[w,_]=(0,i.useState)([]),[b,E]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e=Y_.onAuthStateChange((async e=>{if(Pe("=== AUTH STATE CHANGE ==="),Pe("User:",e?"Logged in":"Logged out"),Pe("User ID:",null===e||void 0===e?void 0:e.uid),Pe("========================"),f(!0),e){u(e),await Y_.createUserDocument(e);const n=await Y_.getUserData(e.uid);var t;if(Pe("Firestore user data result:",n),n.success)d(n.data),Pe("User data loaded:",n.data),null!==(t=n.data.preferences)&&void 0!==t&&t.selectedLanguage&&r(n.data.preferences.selectedLanguage),n.data.progress&&(Pe("Syncing cloud progress with local tracker..."),De.syncWithCloudData(n.data.progress),k());else console.error("Failed to load user data:",n.error)}else u(null),d(null);f(!1),g(!0)}));return()=>e()}),[]),(0,i.useEffect)((()=>{if(!m)return;const e=localStorage.getItem("lulearn-data");if(e)try{var t,n;const i=JSON.parse(e);null!==h&&void 0!==h&&null!==(t=h.preferences)&&void 0!==t&&t.selectedLanguage||r(i.selectedLanguage||null),o(i.hearts||5),(i.xp||(null===(n=i.completedLessons)||void 0===n?void 0:n.length)>0)&&Pe("Migrating legacy progress data...")}catch(Ng){Re("Failed to load legacy data:",Ng)}k()}),[m,h]);const k=()=>{Pe("=== UPDATE USER STATS DEBUG ===");const e=De.getUserStats();Pe("progressTracker.getUserStats() returned:",e),v(e),Pe("userStats state updated to:",e),Pe("=== END UPDATE USER STATS DEBUG ===")},T=async()=>{if(!c)return;Pe("=== SYNC TO CLOUD DEBUG ===");const e=De.exportProgress(),t=De.getUserStats();Pe("Raw progressTracker.getUserStats():",t),Pe("Raw progressTracker.exportProgress():",e),Pe("Syncing progress to cloud:",{totalXP:t.totalXP,currentStreak:t.currentStreak,lessonsCompleted:t.lessonsCompleted,averageAccuracy:t.averageAccuracy,longestStreak:t.longestStreak,totalTimeSpent:t.totalTimeSpent,level:t.level});const n={progress:e,totalXP:t.totalXP,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lessonsCompleted:t.lessonsCompleted,averageAccuracy:t.averageAccuracy,totalTimeSpent:t.totalTimeSpent,level:t.level,lastSyncAt:(new Date).toISOString()};Pe("Full update data being sent to Firestore:",n);try{const e=await Y_.updateUserData(c.uid,n);Pe("Firestore update result:",e),Pe("Progress synced to cloud successfully")}catch(Ng){console.error("Error syncing to cloud:",Ng)}Pe("=== END SYNC TO CLOUD DEBUG ===")},S=()=>{o(5)},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;De.recordExercisePerformance(e,t,n),k()},I={user:c,userData:h,loading:p,authChecked:m,handleAuthSuccess:async e=>{u(e);const t=await Y_.getUserData(e.uid);t.success&&(d(t.data),await T())},handleLogout:()=>{u(null),d(null),r(null)},selectedLanguage:n,setSelectedLanguage:async e=>{r(e),c&&(await Y_.updateUserData(c.uid,{preferences:Ae(Ae({},null===h||void 0===h?void 0:h.preferences),{},{selectedLanguage:e})}),d((t=>Ae(Ae({},t),{},{preferences:Ae(Ae({},null===t||void 0===t?void 0:t.preferences),{},{selectedLanguage:e})}))))},currentLesson:a,setCurrentLesson:l,hearts:s,setHearts:o,loseHeart:()=>{o((e=>Math.max(0,e-1)))},resetHearts:S,userStats:y,achievements:w,dismissAchievements:()=>{_([])},updateUserStats:k,syncProgressToCloud:T,completeLesson:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!n)return void Re("No language selected for lesson completion");Pe("=== COMPLETING LESSON ==="),Pe("Lesson ID:",e),Pe("Accuracy:",t),Pe("Time spent:",r),Pe("Current userData before:",h);const i=(null===a||void 0===a?void 0:a.xp)||15,s=Math.floor(t/100*i*.5),o=i+s;Pe("XP calculation:",{baseXP:i,accuracyBonus:s,totalXP:o});const l=De.completeLesson(n.id,e,o,t,r);Pe("Progress tracker updated:",l);const u=De.checkAchievements(n.id,e,t);if(u.length>0&&_(u),Pe("Updating user stats from progress tracker..."),k(),S(),c){Pe("Syncing progress to Firestore..."),await T(),Pe("Refreshing user data from Firestore...");const e=await Y_.getUserData(c.uid);e.success?(Pe("Previous userData:",h),Pe("New userData from Firestore:",e.data),d(e.data),Pe("User data state updated")):console.error("Failed to refresh user data:",e.error)}return Pe("=== LESSON COMPLETION DONE ==="),l},isLessonCompleted:e=>!!n&&De.isLessonCompleted(n.id,e),getLessonCompletion:e=>n?De.getLessonCompletion(n.id,e):null,getLanguageProgress:()=>n?De.getLanguageProgress(n.id):null,startExercise:()=>{E(Date.now())},endExercise:(e,t)=>{const n=b?(Date.now()-b)/1e3:0;return C(e,t,n),E(null),n},recordExerciseResult:C,getExerciseStats:()=>De.getExerciseStats(),clearAllProgress:()=>!!De.clearAllProgress()&&(k(),_([]),!0),exportProgress:()=>De.exportProgress(),importProgress:e=>!!De.importProgress(e)&&(k(),!0),gainXP:e=>{k()},xp:y.totalXP,streak:y.currentStreak,completedLessons:new Set,title:"\ud83c\udf89 Welcome to Lulearn!",message:"Start your language learning journey with Luna the Fox! Complete lessons, earn XP, and unlock achievements."};return(0,X_.jsx)(J_.Provider,{value:I,children:t})},eb=()=>{const e=ee();return(0,X_.jsx)("div",{className:"welcome-screen",children:(0,X_.jsxs)("div",{className:"welcome-content",children:[(0,X_.jsxs)("div",{className:"lulearn-logo",children:[(0,X_.jsx)("div",{className:"luna-character",children:"\ud83e\udd8a"}),(0,X_.jsx)("h1",{className:"app-title",children:"Lulearn"}),(0,X_.jsx)("p",{className:"app-subtitle",children:"Learn languages with Luna!"})]}),(0,X_.jsx)("button",{className:"get-started-btn",onClick:()=>{e("/language-selection")},children:"Get Started"})]})})},tb=[{id:"english",name:"English for Portuguese Speakers",flag:"\ud83c\uddfa\ud83c\uddf8",nativeName:"Ingl\xeas para Brasileiros"}],nb={english:[{id:1,title:"Basic Greetings - Sauda\xe7\xf5es B\xe1sicas",description:"Learn how to greet people and introduce yourself. (Aprenda a cumprimentar as pessoas e a se apresentar.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'oi' in English? (Como se diz 'oi' em ingl\xeas?)",correctAnswer:"Hi",options:["Bye","Yes","Hi","Thanks"],audio:null},{id:2,type:"multiple-choice",question:"What is a common way to ask 'tudo bem?'? (Qual \xe9 uma forma comum de perguntar 'tudo bem?')",correctAnswer:"How are you?",options:["Who are you?","What is this?","How are you?","Where are you?"],audio:null},{id:3,type:"translation",question:'Translate to English: "Meu nome \xe9 Maria."',correctAnswer:"My name is Maria.",options:["Her name is Maria.","My name is Maria.","I am Maria.","You are Maria."],audio:null},{id:4,type:"image-match",question:"Which one means 'adeus'? (Qual deles significa 'adeus'?) \ud83d\udc4b",correctAnswer:"goodbye",options:[{id:"hello",text:"\ud83d\udc4b",label:"Hello"},{id:"goodbye",text:"\ud83d\udc4b",label:"Goodbye"},{id:"thanks",text:"\ud83d\ude4f",label:"Thank you"},{id:"sorry",text:"\ud83d\ude14",label:"Sorry"}],audio:null},{id:5,type:"fill-blank",question:'Complete: "___ you for your help." (Obrigado(a) pela sua ajuda.)',correctAnswer:"Thank",options:["Please","Sorry","Welcome","Thank"],audio:null},{id:6,type:"multiple-choice",question:"How do you respond to 'Thank you'? (Como voc\xea responde a 'Thank you'?)",correctAnswer:"You're welcome",options:["You're welcome","Good morning","Excuse me","I am fine"],audio:null},{id:7,type:"translation",question:'Translate to English: "Bom dia."',correctAnswer:"Good morning.",options:["Good night.","Good afternoon.","Good morning.","Good evening."],audio:null},{id:8,type:"fill-blank",question:'Complete: "What ___ your name?" (Qual \xe9 o seu nome?)',correctAnswer:"is",options:["are","is","am","name"],audio:null},{id:9,type:"typing",question:'Type this in English: "Prazer em conhecer voc\xea." (Nice to meet you.)',correctAnswer:"Nice to meet you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "are / you / How / ?" (Como voc\xea est\xe1?)',correctAnswer:"How are you?",words:["are","you","How","?"],options:[],audio:null}]},{id:2,title:"Numbers and Counting (1-20) - N\xfameros e Contagem (1-20)",description:"Learn to count and use numbers from one to twenty. (Aprenda a contar e usar n\xfameros de um a vinte.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"image-match",question:"What number is this? (Que n\xfamero \xe9 este?) \ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",correctAnswer:"three",options:[{id:"one",text:"\ud83c\udf4e",label:"One"},{id:"five",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Five"},{id:"three",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Three"},{id:"ten",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Ten"}],audio:null},{id:2,type:"multiple-choice",question:"What is the number '11'? (Qual \xe9 o n\xfamero '11'?)",correctAnswer:"Eleven",options:["Twelve","Ten","Seven","Eleven"],audio:null},{id:3,type:"multiple-choice",question:"How do you write 'vinte' in English? (Como se escreve 'vinte' em ingl\xeas?)",correctAnswer:"Twenty",options:["Twelve","Two","Twenty","Thirteen"],audio:null},{id:4,type:"translation",question:'Translate to English: "Eu tenho cinco gatos."',correctAnswer:"I have five cats.",options:["I have five cats.","She has five dogs.","I see five cats.","I have four cats."],audio:null},{id:5,type:"fill-blank",question:'Complete: "There are ___ days in a week." (Existem sete dias em uma semana.)',correctAnswer:"seven",options:["six","seven","eight","ten"],audio:null},{id:6,type:"translation",question:'Translate to English: "Dezesseis"',correctAnswer:"Sixteen",options:["Sixty","Six","Sixteen","Seventeen"],audio:null},{id:7,type:"multiple-choice",question:"Which number comes after fourteen? (Qual n\xfamero vem depois de catorze?)",correctAnswer:"Fifteen",options:["Thirteen","Fifteen","Sixteen","Fifty"],audio:null},{id:8,type:"typing",question:'Type this in English: "Ele tem dezoito anos." (He is eighteen years old.)',correctAnswer:"He is eighteen years old.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "I need ___ dollars." (Eu preciso de doze d\xf3lares.)',correctAnswer:"twelve",options:["twenty","two","twelve","ten"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "She has two brothers." (Ela tem dois irm\xe3os.)',correctAnswer:"She has two brothers.",words:["brothers","She","two","has"],options:[],audio:null}]},{id:3,title:"Common Objects - Objetos Comuns",description:"Learn the names of everyday objects around you. (Aprenda os nomes de objetos do dia a dia ao seu redor.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83d\udcd6",correctAnswer:"book",options:[{id:"pen",text:"\ud83d\udd8a\ufe0f",label:"Pen"},{id:"book",text:"\ud83d\udcd6",label:"Book"},{id:"car",text:"\ud83d\ude97",label:"Car"},{id:"house",text:"\ud83c\udfe0",label:"House"}],audio:null},{id:2,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83d\udd11",correctAnswer:"key",options:[{id:"phone",text:"\ud83d\udcf1",label:"Phone"},{id:"door",text:"\ud83d\udeaa",label:"Door"},{id:"key",text:"\ud83d\udd11",label:"Key"},{id:"window",text:"\ud83d\uddbc\ufe0f",label:"Window"}],audio:null},{id:3,type:"multiple-choice",question:"What do you sit on? (No que voc\xea se senta?)",correctAnswer:"A chair",options:["A table","A chair","A window","A door"],audio:null},{id:4,type:"multiple-choice",question:"How do you say 'mesa' in English? (Como se diz 'mesa' em ingl\xeas?)",correctAnswer:"Table",options:["Chair","Desk","Table","Floor"],audio:null},{id:5,type:"translation",question:'Translate to English: "Onde est\xe1 meu celular?"',correctAnswer:"Where is my phone?",options:["What is my phone?","Where is my phone?","This is my phone.","Is that your phone?"],audio:null},{id:6,type:"fill-blank",question:'Complete: "The ___ is on the table." (O livro est\xe1 sobre a mesa.)',correctAnswer:"book",options:["pen","cat","book","key"],audio:null},{id:7,type:"multiple-choice",question:"What do you use to write? (O que voc\xea usa para escrever?)",correctAnswer:"A pen",options:["A pen","A book","A fork","A car"],audio:null},{id:8,type:"translation",question:'Translate to English: "uma casa grande"',correctAnswer:"a big house",options:["a small house","a big car","a blue house","a big house"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu abro a porta." (I open the door.)',correctAnswer:"I open the door.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / my / This / car / ." (Este \xe9 meu carro.)',correctAnswer:"This is my car.",words:["is","my","This","car","."],options:[],audio:null}]},{id:4,title:"The Family - A Fam\xedlia",description:"Learn vocabulary for family members. (Aprenda o vocabul\xe1rio para os membros da fam\xedlia.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'm\xe3e' in English? (Como se diz 'm\xe3e' em ingl\xeas?)",correctAnswer:"Mother",options:["Father","Sister","Brother","Mother"],audio:null},{id:2,type:"multiple-choice",question:"Your mother's son is your... (O filho da sua m\xe3e \xe9 seu...)",correctAnswer:"Brother",options:["Sister","Brother","Father","Son"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu amo minha fam\xedlia."',correctAnswer:"I love my family.",options:["I like my family.","I love my family.","I have a family.","This is my family."],audio:null},{id:4,type:"image-match",question:"Who is this? (Quem \xe9 este?) \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",correctAnswer:"family",options:[{id:"family",text:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",label:"Family"},{id:"friends",text:"\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1",label:"Friends"},{id:"baby",text:"\ud83d\udc76",label:"Baby"},{id:"doctor",text:"\ud83d\udc68\u200d\u2695\ufe0f",label:"Doctor"}],audio:null},{id:5,type:"fill-blank",question:'Complete: "He is my ___. His name is John." (Ele \xe9 meu pai. O nome dele \xe9 John.)',correctAnswer:"father",options:["mother","sister","father","son"],audio:null},{id:6,type:"multiple-choice",question:"How do you say 'av\xf3' in English? (Como se diz 'av\xf3' em ingl\xeas?)",correctAnswer:"Grandmother",options:["Grandfather","Grandmother","Mother","Aunt"],audio:null},{id:7,type:"translation",question:'Translate to English: "Ela tem uma irm\xe3 e dois irm\xe3os."',correctAnswer:"She has one sister and two brothers.",options:["She has one sister and two brothers.","He has a sister.","She has two sisters and one brother.","They have a sister."],audio:null},{id:8,type:"typing",question:'Type this in English: "Meu av\xf4 \xe9 velho." (My grandfather is old.)',correctAnswer:"My grandfather is old.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "My father\'s wife is my ___." (A esposa do meu pai \xe9 minha m\xe3e.)',correctAnswer:"mother",options:["aunt","sister","mother","daughter"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "My sister is a doctor." (Minha irm\xe3 \xe9 m\xe9dica.)',correctAnswer:"My sister is a doctor.",words:["is","doctor","My","a","sister"],options:[],audio:null}]},{id:5,title:"Food and Drink - Comida e Bebida",description:"Learn basic vocabulary for food and drinks. (Aprenda vocabul\xe1rio b\xe1sico para comidas e bebidas.)",difficulty:"beginner",xp:15,exercises:[{id:1,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83c\udf4e",correctAnswer:"apple",options:[{id:"banana",text:"\ud83c\udf4c",label:"Banana"},{id:"apple",text:"\ud83c\udf4e",label:"Apple"},{id:"orange",text:"\ud83c\udf4a",label:"Orange"},{id:"grape",text:"\ud83c\udf47",label:"Grape"}],audio:null},{id:2,type:"image-match",question:"What drink is this? (Que bebida \xe9 esta?) \u2615",correctAnswer:"coffee",options:[{id:"water",text:"\ud83d\udca7",label:"Water"},{id:"milk",text:"\ud83e\udd5b",label:"Milk"},{id:"juice",text:"\ud83e\uddc3",label:"Juice"},{id:"coffee",text:"\u2615",label:"Coffee"}],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'p\xe3o' in English? (Como se diz 'p\xe3o' em ingl\xeas?)",correctAnswer:"Bread",options:["Rice","Cheese","Bread","Meat"],audio:null},{id:4,type:"multiple-choice",question:"Which of these is a vegetable? (Qual destes \xe9 um vegetal?)",correctAnswer:"Carrot",options:["Apple","Carrot","Banana","Orange"],audio:null},{id:5,type:"translation",question:'Translate to English: "Eu bebo \xe1gua."',correctAnswer:"I drink water.",options:["I eat water.","I drink milk.","I drink water.","I want water."],audio:null},{id:6,type:"fill-blank",question:'Complete: "I eat ___ for breakfast." (Eu como p\xe3o no caf\xe9 da manh\xe3.)',correctAnswer:"bread",options:["water","juice","bread","coffee"],audio:null},{id:7,type:"translation",question:'Translate to English: "Queijo e presunto."',correctAnswer:"Cheese and ham.",options:["Cheese and ham.","Chicken and fish.","Bread and butter.","Salt and pepper."],audio:null},{id:8,type:"multiple-choice",question:"What do you say when you are thirsty? (O que voc\xea diz quando est\xe1 com sede?)",correctAnswer:"I want to drink water.",options:["I am hungry.","I want to drink water.","I am tired.","I want to eat."],audio:null},{id:9,type:"typing",question:'Type this in English: "O peixe \xe9 delicioso." (The fish is delicious.)',correctAnswer:"The fish is delicious.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "like / I / apples / ." (Eu gosto de ma\xe7\xe3s.)',correctAnswer:"I like apples.",words:["like","I","apples","."],options:[],audio:null}]},{id:6,title:"Daily Routines (Present Simple) - Rotinas Di\xe1rias",description:"Talk about your daily activities using the Present Simple tense. (Fale sobre suas atividades di\xe1rias usando o tempo Presente Simples.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'Eu acordo \xe0s 7 da manh\xe3'? (How do you say 'Eu acordo \xe0s 7 da manh\xe3'?)",correctAnswer:"I wake up at 7 AM.",options:["I woke up at 7 AM.","I will wake up at 7 AM.","I wake up at 7 AM.","I am waking up at 7 AM."],audio:null},{id:2,type:"multiple-choice",question:"Which sentence is correct for 'ela trabalha'? (Qual frase est\xe1 correta para 'ela trabalha'?)",correctAnswer:"She works.",options:["She work.","She works.","She is work.","She working."],audio:null},{id:3,type:"translation",question:'Translate to English: "N\xf3s tomamos caf\xe9 da manh\xe3 juntos."',correctAnswer:"We eat breakfast together.",options:["We eating breakfast.","We eat breakfast together.","We eats breakfast.","We are eat breakfast."],audio:null},{id:4,type:"fill-blank",question:'Complete: "He ___ to school every day." (Ele vai para a escola todos os dias.)',correctAnswer:"goes",options:["go","goes","is going","went"],audio:null},{id:5,type:"image-match",question:"What is this activity? (Que atividade \xe9 esta?)  brushing teeth \ud83e\uddb7",correctAnswer:"brush",options:[{id:"eat",text:"\ud83c\udf7d\ufe0f",label:"Eat breakfast"},{id:"sleep",text:"\ud83d\ude34",label:"Go to sleep"},{id:"work",text:"\ud83d\udcbb",label:"Go to work"},{id:"brush",text:"\ud83e\uddb7",label:"Brush teeth"}],audio:null},{id:6,type:"multiple-choice",question:"What does 'I take a shower' mean? (O que significa 'I take a shower'?)",correctAnswer:"Eu tomo banho.",options:["Eu tomo caf\xe9.","Eu pego um \xf4nibus.","Eu tomo banho.","Eu vou para casa."],audio:null},{id:7,type:"translation",question:'Translate to English: "Eles n\xe3o assistem TV \xe0 noite."',correctAnswer:"They do not watch TV at night.",options:["They does not watch TV.","They watch TV.","They do not watch TV at night.","They are not watching TV."],audio:null},{id:8,type:"fill-blank",question:'Complete: "___ you speak English?" (Voc\xea fala ingl\xeas?)',correctAnswer:"Do",options:["Does","Are","Is","Do"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu vou para a cama \xe0s 11 da noite." (I go to bed at 11 PM.)',correctAnswer:"I go to bed at 11 PM.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "work / I / from / to / Friday / Monday / ." (Eu trabalho de segunda a sexta.)',correctAnswer:"I work from Monday to Friday.",words:["work","I","from","to","Friday","Monday","."],options:[],audio:null}]},{id:7,title:"Places in the City - Lugares na Cidade",description:"Learn to name and talk about places in a city. (Aprenda a nomear e falar sobre lugares em uma cidade.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"image-match",question:"Where do you buy food? (Onde voc\xea compra comida?) \ud83d\uded2",correctAnswer:"supermarket",options:[{id:"park",text:"\ud83c\udf33",label:"Park"},{id:"supermarket",text:"\ud83d\uded2",label:"Supermarket"},{id:"hospital",text:"\ud83c\udfe5",label:"Hospital"},{id:"school",text:"\ud83c\udfeb",label:"School"}],audio:null},{id:2,type:"multiple-choice",question:"Where can you watch movies? (Onde voc\xea pode assistir a filmes?)",correctAnswer:"At the movie theater.",options:["At the bank.","At the post office.","At the movie theater.","At the gym."],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'banco' in English? (Como se diz 'banco' em ingl\xeas?)",correctAnswer:"Bank",options:["Park","Beach","Bank","Bookstore"],audio:null},{id:4,type:"translation",question:'Translate to English: "O hospital fica perto do parque."',correctAnswer:"The hospital is near the park.",options:["The hospital is far from the park.","The hospital is near the park.","The school is near the park.","The hospital is the park."],audio:null},{id:5,type:"fill-blank",question:'Complete: "I am going to the ___ to read books." (Eu vou \xe0 biblioteca para ler livros.)',correctAnswer:"library",options:["restaurant","library","airport","station"],audio:null},{id:6,type:"multiple-choice",question:"A place with many restaurants and shops is a... (Um lugar com muitos restaurantes e lojas \xe9 um...)",correctAnswer:"shopping mall",options:["museum","shopping mall","church","factory"],audio:null},{id:7,type:"translation",question:'Translate to English: "Existe uma farm\xe1cia nesta rua?"',correctAnswer:"Is there a pharmacy on this street?",options:["Where is the pharmacy?","Is there a pharmacy on this street?","I need a pharmacy.","The pharmacy is on the street."],audio:null},{id:8,type:"typing",question:'Type this in English: "N\xf3s vamos para a esta\xe7\xe3o de trem." (We are going to the train station.)',correctAnswer:"We are going to the train station.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "She works at the post ___. " (Ela trabalha nos correios.)',correctAnswer:"office",options:["station","park","office","store"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "The museum is next to the bank." (O museu fica ao lado do banco.)',correctAnswer:"The museum is next to the bank.",words:["is","next to","The museum","the bank."],options:[],audio:null}]},{id:8,title:"Asking for Directions - Pedindo Dire\xe7\xf5es",description:"Learn phrases to ask for and give directions. (Aprenda frases para pedir e dar dire\xe7\xf5es.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask 'Onde \xe9 o banheiro?'? (How do you ask 'Onde \xe9 o banheiro?'?)",correctAnswer:"Where is the restroom?",options:["When is the restroom?","Where is the restroom?","Who is in the restroom?","What is a restroom?"],audio:null},{id:2,type:"image-match",question:"What does this sign mean? (O que esta placa significa?) \u27a1\ufe0f",correctAnswer:"turn-right",options:[{id:"go-straight",text:"\u2b06\ufe0f",label:"Go straight"},{id:"turn-left",text:"\u2b05\ufe0f",label:"Turn left"},{id:"turn-right",text:"\u27a1\ufe0f",label:"Turn right"},{id:"stop",text:"\ud83d\uded1",label:"Stop"}],audio:null},{id:3,type:"multiple-choice",question:"What does 'Go straight ahead' mean? (O que significa 'Go straight ahead'?)",correctAnswer:"Siga em frente",options:["Vire \xe0 esquerda","Vire \xe0 direita","Siga em frente","Pare aqui"],audio:null},{id:4,type:"fill-blank",question:'Complete: "The bank is ___ the corner." (O banco fica na esquina.)',correctAnswer:"on",options:["in","at","on","under"],audio:null},{id:5,type:"translation",question:'Translate to English: "Vire \xe0 esquerda no pr\xf3ximo sem\xe1foro."',correctAnswer:"Turn left at the next traffic light.",options:["Turn right at the traffic light.","Go straight at the next light.","Turn left at the next traffic light.","Stop at the left traffic light."],audio:null},{id:6,type:"multiple-choice",question:"How do you say '\xc9 longe daqui?'? (How do you say '\xc9 longe daqui?'?)",correctAnswer:"Is it far from here?",options:["Is it far from here?","Is it near here?","How far is it?","It is not far."],audio:null},{id:7,type:"translation",question:'Translate to English: "O hotel fica em frente \xe0 esta\xe7\xe3o."',correctAnswer:"The hotel is across from the station.",options:["The hotel is next to the station.","The hotel is behind the station.","The hotel is across from the station.","The hotel is in the station."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Excuse me, how do I ___ to the museum?" (Com licen\xe7a, como eu chego ao museu?)',correctAnswer:"get",options:["go","find","get","walk"],audio:null},{id:9,type:"typing",question:'Type this in English: "Voc\xea pode me mostrar no mapa?" (Can you show me on the map?)',correctAnswer:"Can you show me on the map?",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / behind / The / school / the / park / ." (A escola fica atr\xe1s do parque.)',correctAnswer:"The school is behind the park.",words:["is","behind","The","school","the","park","."],options:[],audio:null}]},{id:9,title:"Talking About Hobbies (Present Continuous) - Falando sobre Hobbies",description:"Describe actions happening now using the Present Continuous. (Descreva a\xe7\xf5es que est\xe3o acontecendo agora usando o Presente Cont\xednuo.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"What is he doing? (O que ele est\xe1 fazendo?) \ud83d\udc68\u200d\ud83d\udcbb",correctAnswer:"He is working.",options:["He is sleeping.","He is eating.","He is working.","He is reading."],audio:null},{id:2,type:"multiple-choice",question:"How do you say 'Eles est\xe3o jogando futebol'? (How do you say 'Eles est\xe3o jogando futebol'?)",correctAnswer:"They are playing soccer.",options:["They play soccer.","They are playing soccer.","They played soccer.","They will play soccer."],audio:null},{id:3,type:"image-match",question:"What is she doing? (O que ela est\xe1 fazendo?) \ud83c\udfa7",correctAnswer:"listening",options:[{id:"singing",text:"\ud83c\udfa4",label:"She is singing."},{id:"listening",text:"\ud83c\udfa7",label:"She is listening to music."},{id:"dancing",text:"\ud83d\udc83",label:"She is dancing."},{id:"watching",text:"\ud83d\udcfa",label:"She is watching TV."}],audio:null},{id:4,type:"translation",question:'Translate to English: "Eu estou lendo um livro interessante."',correctAnswer:"I am reading an interesting book.",options:["I read an interesting book.","I will read a book.","I am reading an interesting book.","I am writing a book."],audio:null},{id:5,type:"fill-blank",question:'Complete: "What ___ you doing?" (O que voc\xea est\xe1 fazendo?)',correctAnswer:"are",options:["is","am","are","do"],audio:null},{id:6,type:"multiple-choice",question:"Which sentence is correct? (Qual frase est\xe1 correta?)",correctAnswer:"We are studying English.",options:["We is studying English.","We studying English.","We are studying English.","We are study English."],audio:null},{id:7,type:"translation",question:'Translate to English: "O telefone n\xe3o est\xe1 funcionando."',correctAnswer:"The telephone is not working.",options:["The telephone does not work.","The telephone is not working.","The telephone not working.","The telephone will not work."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Look! It ___ raining." (Olhe! Est\xe1 chovendo.)',correctAnswer:"is",options:["is","are","am","be"],audio:null},{id:9,type:"typing",question:'Type this in English: "Ela est\xe1 cozinhando o jantar agora." (She is cooking dinner now.)',correctAnswer:"She is cooking dinner now.",options:[],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "The children are playing in the park." (As crian\xe7as est\xe3o brincando no parque.)',correctAnswer:"The children are playing in the park.",words:["The children","are","playing","in the park."],options:[],audio:null}]},{id:10,title:"Describing People (Adjectives) - Descrevendo Pessoas",description:"Learn adjectives to describe people's appearance and personality. (Aprenda adjetivos para descrever a apar\xeancia e personalidade das pessoas.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'alto' in English? (Como se diz 'alto' em ingl\xeas?)",correctAnswer:"Tall",options:["Short","Tall","Young","Old"],audio:null},{id:2,type:"multiple-choice",question:"The opposite of 'happy' is... (O oposto de 'feliz' \xe9...)",correctAnswer:"Sad",options:["Angry","Tired","Sad","Excited"],audio:null},{id:3,type:"image-match",question:"How would you describe him? (Como voc\xea o descreveria?) \ud83d\ude0a",correctAnswer:"happy",options:[{id:"happy",text:"\ud83d\ude0a",label:"Happy"},{id:"sad",text:"\ud83d\ude22",label:"Sad"},{id:"angry",text:"\ud83d\ude20",label:"Angry"},{id:"tired",text:"\ud83d\ude34",label:"Tired"}],audio:null},{id:4,type:"translation",question:'Translate to English: "Minha irm\xe3 tem cabelo comprido."',correctAnswer:"My sister has long hair.",options:["My sister is long hair.","My sister has short hair.","My sister has long hair.","My brother has long hair."],audio:null},{id:5,type:"fill-blank",question:'Complete: "He is a very ___ person. Everyone likes him." (Ele \xe9 uma pessoa muito amig\xe1vel. Todo mundo gosta dele.)',correctAnswer:"friendly",options:["shy","serious","friendly","quiet"],audio:null},{id:6,type:"multiple-choice",question:"What is a synonym for 'intelligent'? (Qual \xe9 um sin\xf4nimo para 'inteligente'?)",correctAnswer:"Smart",options:["Funny","Kind","Smart","Brave"],audio:null},{id:7,type:"translation",question:'Translate to English: "Eles s\xe3o jovens e fortes."',correctAnswer:"They are young and strong.",options:["They are old and weak.","They are young and strong.","She is young and strong.","They are young and happy."],audio:null},{id:8,type:"fill-blank",question:'Complete: "She has beautiful blue ___." (Ela tem lindos olhos azuis.)',correctAnswer:"eyes",options:["hair","eyes","hands","ears"],audio:null},{id:9,type:"typing",question:'Type this in English: "Meu professor \xe9 muito paciente." (My teacher is very patient.)',correctAnswer:"My teacher is very patient.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / a / man / kind / He / ." (Ele \xe9 um homem gentil.)',correctAnswer:"He is a kind man.",words:["is","a","man","kind","He","."],options:[],audio:null}]},{id:11,title:"Shopping for Clothes - Comprando Roupas",description:"Learn vocabulary and phrases for shopping for clothes. (Aprenda vocabul\xe1rio e frases para comprar roupas.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask for the price? (Como voc\xea pergunta o pre\xe7o?)",correctAnswer:"How much is it?",options:["How many is it?","How much is it?","What price this?","Is this expensive?"],audio:null},{id:2,type:"image-match",question:"What is this piece of clothing? (Que pe\xe7a de roupa \xe9 esta?) \ud83d\udc55",correctAnswer:"t-shirt",options:[{id:"t-shirt",text:"\ud83d\udc55",label:"T-shirt"},{id:"pants",text:"\ud83d\udc56",label:"Pants"},{id:"dress",text:"\ud83d\udc57",label:"Dress"},{id:"shoes",text:"\ud83d\udc5f",label:"Shoes"}],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'Eu gostaria de experimentar isto'? (How do you say 'Eu gostaria de experimentar isto'?)",correctAnswer:"I would like to try this on.",options:["I want to buy this.","I would like to try this on.","I can see this.","I like this one."],audio:null},{id:4,type:"translation",question:'Translate to English: "Voc\xea tem isso em um tamanho menor?"',correctAnswer:"Do you have this in a smaller size?",options:["Do you have this in a bigger size?","Do you have this in another color?","Do you have this in a smaller size?","Can I have a small one?"],audio:null},{id:5,type:"fill-blank",question:'Complete: "The ___ room is over there." (O provador fica logo ali.)',correctAnswer:"fitting",options:["changing","trying","fitting","test"],audio:null},{id:6,type:"multiple-choice",question:"What do you wear on your feet? (O que voc\xea usa nos seus p\xe9s?)",correctAnswer:"Shoes",options:["Hats","Gloves","Scarves","Shoes"],audio:null},{id:7,type:"translation",question:'Translate to English: "Vou levar esta camisa."',correctAnswer:"I'll take this shirt.",options:["I'll take this shirt.","I'll leave this shirt.","I see that shirt.","I want a shirt."],audio:null},{id:8,type:"fill-blank",question:'Complete: "This dress is too ___. Do you have a cheaper one?" (Este vestido \xe9 muito caro. Voc\xea tem um mais barato?)',correctAnswer:"expensive",options:["cheap","big","small","expensive"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu estou apenas olhando, obrigado." (I\'m just looking, thank you.)',correctAnswer:"I'm just looking, thank you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "credit / Do / accept / card / you / ?" (Voc\xeas aceitam cart\xe3o de cr\xe9dito?)',correctAnswer:"Do you accept credit card?",words:["credit","Do","accept","card","you","?"],options:[],audio:null}]},{id:12,title:"Past Events (Past Simple) - Eventos Passados",description:"Talk about completed actions in the past using the Past Simple tense. (Fale sobre a\xe7\xf5es conclu\xeddas no passado usando o Passado Simples.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you change 'go' to the Past Simple? (Como voc\xea muda 'go' para o Passado Simples?)",correctAnswer:"went",options:["goed","gone","went","was go"],audio:null},{id:2,type:"multiple-choice",question:"Which sentence is in the past? (Qual frase est\xe1 no passado?)",correctAnswer:"She visited her grandmother last week.",options:["She visits her grandmother.","She is visiting her grandmother.","She will visit her grandmother.","She visited her grandmother last week."],audio:null},{id:3,type:"translation",question:'Translate to English: "N\xf3s n\xe3o fomos \xe0 festa."',correctAnswer:"We did not go to the party.",options:["We do not go to the party.","We did not go to the party.","We were not at the party.","We will not go to the party."],audio:null},{id:4,type:"fill-blank",question:'Complete: "I ___ a great movie yesterday." (Eu vi um \xf3timo filme ontem.)',correctAnswer:"saw",options:["see","seen","saw","was seeing"],audio:null},{id:5,type:"image-match",question:"What did they do yesterday? (O que eles fizeram ontem?) \u2708\ufe0f",correctAnswer:"traveled",options:[{id:"worked",text:"\ud83d\udcbc",label:"They worked."},{id:"studied",text:"\ud83d\udcda",label:"They studied."},{id:"traveled",text:"\u2708\ufe0f",label:"They traveled."},{id:"cooked",text:"\ud83c\udf73",label:"They cooked."}],audio:null},{id:6,type:"multiple-choice",question:"How do you ask a question about the past? (Como voc\xea faz uma pergunta sobre o passado?)",correctAnswer:"Did you eat breakfast?",options:["Do you eat breakfast?","Did you eat breakfast?","Have you eat breakfast?","You did eat breakfast?"],audio:null},{id:7,type:"translation",question:'Translate to English: "Ele comprou um carro novo no ano passado."',correctAnswer:"He bought a new car last year.",options:["He buys a new car last year.","He bought a new car last year.","He has bought a new car.","He will buy a new car."],audio:null},{id:8,type:"fill-blank",question:'Complete: "What did you ___ on the weekend?" (O que voc\xea fez no fim de semana?)',correctAnswer:"do",options:["did","done","do","doing"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu estudei ingl\xeas por tr\xeas horas." (I studied English for three hours.)',correctAnswer:"I studied English for three hours.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "night / TV / watched / last / They / ." (Eles assistiram TV na noite passada.)',correctAnswer:"They watched TV last night.",words:["night","TV","watched","last","They","."],options:[],audio:null}]},{id:13,title:"Future Plans (Going to vs. Will) - Planos Futuros",description:"Learn to talk about future plans and predictions. (Aprenda a falar sobre planos e previs\xf5es futuras.)",difficulty:"intermediate",xp:20,exercises:[{id:1,type:"multiple-choice",question:"For a plan you have already decided, you use... (Para um plano que voc\xea j\xe1 decidiu, voc\xea usa...)",correctAnswer:"going to",options:["will","going to","would","can"],audio:null},{id:2,type:"multiple-choice",question:"Choose the correct sentence for a future plan. (Escolha a frase correta para um plano futuro.)",correctAnswer:"I am going to travel to Japan next year.",options:["I am going to travel to Japan next year.","I will travel to Japan next year.","I travel to Japan next year.","I traveled to Japan next year."],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu acho que vai chover amanh\xe3."',correctAnswer:"I think it will rain tomorrow.",options:["I think it is going to rain tomorrow.","I think it will rain tomorrow.","I think it rains tomorrow.","I think it is raining."],audio:null},{id:4,type:"fill-blank",question:'Complete: "She ___ be a doctor when she grows up." (Ela vai ser m\xe9dica quando crescer.)',correctAnswer:"is going to",options:["will","is going to","is","goes to"],audio:null},{id:5,type:"image-match",question:"What is his plan for the weekend? (Qual o plano dele para o fim de semana?) \ud83c\udfa3",correctAnswer:"go-fishing",options:[{id:"go-fishing",text:"\ud83c\udfa3",label:"He is going to go fishing."},{id:"play-soccer",text:"\u26bd",label:"He is going to play soccer."},{id:"go-shopping",text:"\ud83d\udecd\ufe0f",label:"He is going to go shopping."},{id:"read-book",text:"\ud83d\udcd6",label:"He is going to read a book."}],audio:null},{id:6,type:"multiple-choice",question:"For a spontaneous decision made at the moment of speaking, you use... (Para uma decis\xe3o espont\xe2nea feita no momento da fala, voc\xea usa...)",correctAnswer:"will",options:["will","going to","am","do"],audio:null},{id:7,type:"translation",question:'Translate to English: "N\xf3s n\xe3o vamos sair esta noite."',correctAnswer:"We are not going to go out tonight.",options:["We will not go out tonight.","We do not go out tonight.","We are not going to go out tonight.","We did not go out tonight."],audio:null},{id:8,type:"fill-blank",question:'Complete: "The phone is ringing. I ___ get it!" (O telefone est\xe1 tocando. Eu vou atender!)',correctAnswer:"will",options:["am going to","will","do","am"],audio:null},{id:9,type:"typing",question:'Type this in English: "O que voc\xea vai fazer depois da aula?" (What are you going to do after class?)',correctAnswer:"What are you going to do after class?",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "help / you / I / will / ." (Eu vou te ajudar.)',correctAnswer:"I will help you.",words:["help","you","I","will","."],options:[],audio:null}]},{id:14,title:"At the Restaurant - No Restaurante",description:"Learn useful phrases for ordering food and dining at a restaurant. (Aprenda frases \xfateis para pedir comida e jantar em um restaurante.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask for the menu? (Como voc\xea pede o card\xe1pio?)",correctAnswer:"Can I have the menu, please?",options:["Where is the menu?","Can I have the menu, please?","Give me the menu.","I want to see a menu."],audio:null},{id:2,type:"multiple-choice",question:"When you are ready to pay, you ask for... (Quando voc\xea est\xe1 pronto para pagar, voc\xea pede...)",correctAnswer:"The bill",options:["The food","The table","The bill","The waiter"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu gostaria de uma mesa para dois."',correctAnswer:"I would like a table for two.",options:["I want a table with two.","I would like a table for two.","I have two tables.","Can I have two tables?"],audio:null},{id:4,type:"fill-blank",question:'Complete: "Are you ready to ___?" (Voc\xea est\xe1 pronto para pedir?)',correctAnswer:"order",options:["eat","pay","order","leave"],audio:null},{id:5,type:"image-match",question:"What is this? (O que \xe9 isto?) \ud83c\udf74",correctAnswer:"cutlery",options:[{id:"plate",text:"\ud83c\udf7d\ufe0f",label:"Plate"},{id:"glass",text:"\ud83c\udf77",label:"Glass"},{id:"cutlery",text:"\ud83c\udf74",label:"Cutlery (Fork and Knife)"},{id:"napkin",text:"\ub0c5\ud0a8",label:"Napkin"}],audio:null},{id:6,type:"multiple-choice",question:"What does ' appetizer' mean? (O que significa 'appetizer'?)",correctAnswer:"Entrada",options:["Prato principal","Sobremesa","Bebida","Entrada"],audio:null},{id:7,type:"translation",question:'Translate to English: "A conta, por favor."',correctAnswer:"The check, please.",options:["The menu, please.","The check, please.","The food, please.","More water, please."],audio:null},{id:8,type:"fill-blank",question:'Complete: "For the main ___, I\'ll have the steak." (Para o prato principal, eu quero o bife.)',correctAnswer:"course",options:["dish","food","course","plate"],audio:null},{id:9,type:"typing",question:'Type this in English: "Tudo estava delicioso, obrigado." (Everything was delicious, thank you.)',correctAnswer:"Everything was delicious, thank you.",options:[],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "I would like to order a pizza." (Eu gostaria de pedir uma pizza.)',correctAnswer:"I would like to order a pizza.",words:["order","a","pizza","I would like to"],options:[],audio:null}]},{id:15,title:"Weather and Seasons - O Tempo e as Esta\xe7\xf5es",description:"Learn how to talk about the weather and the four seasons. (Aprenda a falar sobre o tempo e as quatro esta\xe7\xf5es.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"image-match",question:"What's the weather like? (Como est\xe1 o tempo?) \u2600\ufe0f",correctAnswer:"sunny",options:[{id:"sunny",text:"\u2600\ufe0f",label:"It's sunny."},{id:"rainy",text:"\ud83c\udf27\ufe0f",label:"It's rainy."},{id:"cloudy",text:"\u2601\ufe0f",label:"It's cloudy."},{id:"snowy",text:"\u2744\ufe0f",label:"It's snowy."}],audio:null},{id:2,type:"multiple-choice",question:"How do you say 'est\xe1 ventando' in English? (Como se diz 'est\xe1 ventando' em ingl\xeas?)",correctAnswer:"It's windy.",options:["It's cold.","It's windy.","It's hot.","It's foggy."],audio:null},{id:3,type:"multiple-choice",question:"Which season comes after summer? (Qual esta\xe7\xe3o vem depois do ver\xe3o?)",correctAnswer:"Autumn / Fall",options:["Winter","Spring","Autumn / Fall","Summer"],audio:null},{id:4,type:"translation",question:'Translate to English: "Qual \xe9 a temperatura hoje?"',correctAnswer:"What's the temperature today?",options:["How is the weather?","What's the temperature today?","Is it hot today?","What's the day today?"],audio:null},{id:5,type:"fill-blank",question:'Complete: "In winter, it is often very ___." (No inverno, geralmente faz muito frio.)',correctAnswer:"cold",options:["hot","warm","cold","cool"],audio:null},{id:6,type:"multiple-choice",question:"Flowers bloom in the... (As flores desabrocham na...)",correctAnswer:"Spring",options:["Summer","Autumn","Winter","Spring"],audio:null},{id:7,type:"translation",question:'Translate to English: "Leve um guarda-chuva, parece que vai chover."',correctAnswer:"Take an umbrella, it looks like it's going to rain.",options:["Take an umbrella, it is sunny.","Take a coat, it is cold.","Take an umbrella, it looks like it's going to rain.","Do not take an umbrella."],audio:null},{id:8,type:"fill-blank",question:'Complete: "It\'s about 25 ___ Celsius today." (Est\xe1 cerca de 25 graus Celsius hoje.)',correctAnswer:"degrees",options:["percent","numbers","degrees","levels"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu amo o clima quente do ver\xe3o." (I love the hot weather in summer.)',correctAnswer:"I love the hot weather in summer.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / like / the / today / What / weather / ?" (Como est\xe1 o tempo hoje?)',correctAnswer:"What is the weather like today?",words:["is","like","the","today","What","weather","?"],options:[],audio:null}]},{id:16,title:"Expressing Opinions and Debating - Expressando Opini\xf5es",description:"Learn how to express your opinion, agree, and disagree in English. (Aprenda a expressar sua opini\xe3o, concordar e discordar em ingl\xeas.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"Which phrase is used to introduce your opinion? (Qual frase \xe9 usada para introduzir sua opini\xe3o?)",correctAnswer:"In my opinion...",options:["As a result...","For example...","In my opinion...","On the other hand..."],audio:null},{id:2,type:"multiple-choice",question:"How do you strongly agree with someone? (Como voc\xea concorda veementemente com algu\xe9m?)",correctAnswer:"I couldn't agree more.",options:["I see your point, but...","I'm not so sure about that.","I couldn't agree more.","That's one way to look at it."],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu discordo completamente do que voc\xea disse."',correctAnswer:"I completely disagree with what you said.",options:["I agree with what you said.","I completely disagree with what you said.","I understand a little of what you said.","I don't care what you said."],audio:null},{id:4,type:"fill-blank",question:'Complete: "That\'s a valid ___, but have you considered the alternative?" (Esse \xe9 um argumento v\xe1lido, mas voc\xea considerou a alternativa?)',correctAnswer:"point",options:["idea","point","opinion","thought"],audio:null},{id:5,type:"multiple-choice",question:"What is a polite way to interrupt a conversation? (Qual \xe9 uma maneira educada de interromper uma conversa?)",correctAnswer:"Sorry to interrupt, but...",options:["Stop talking.","Listen to me now.","Sorry to interrupt, but...","I want to say something."],audio:null},{id:6,type:"translation",question:'Translate to English: "Do meu ponto de vista, a tecnologia melhorou nossas vidas."',correctAnswer:"From my point of view, technology has improved our lives.",options:["From my point of view, technology has improved our lives.","In conclusion, technology is good.","I believe technology will be better.","In my experience, technology is difficult."],audio:null},{id:7,type:"fill-blank",question:'Complete: "I\'m afraid I have to ___ with you on that." (Receio ter que discordar de voc\xea sobre isso.)',correctAnswer:"disagree",options:["agree","disagree","argue","speak"],audio:null},{id:8,type:"typing",question:'Type this in English: "Vamos concordar em discordar." (Let\'s agree to disagree.)',correctAnswer:"Let's agree to disagree.",options:[],audio:null},{id:9,type:"multiple-choice",question:"Which phrase asks for clarification? (Qual frase pede esclarecimento?)",correctAnswer:"Could you explain what you mean by that?",options:["I think you are wrong.","That's not true.","I don't understand you.","Could you explain what you mean by that?"],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "see / I / coming / you\'re / from / where / ." (Eu entendo de onde voc\xea vem / seu ponto de vista.)',correctAnswer:"I see where you're coming from.",words:["see","I","coming","you're","from","where","."],options:[],audio:null}]},{id:17,title:"Work and Careers (Job Interviews) - Trabalho e Carreiras",description:"Learn vocabulary and phrases for job interviews and talking about your career. (Aprenda vocabul\xe1rio e frases para entrevistas de emprego e para falar sobre sua carreira.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"A common interview question is: 'What are your greatest ___?' (Uma pergunta comum em entrevistas \xe9: 'Quais s\xe3o suas maiores qualidades?')",correctAnswer:"strengths",options:["weaknesses","strengths","hobbies","problems"],audio:null},{id:2,type:"multiple-choice",question:"The document you send to apply for a job is called a... (O documento que voc\xea envia para se candidatar a um emprego \xe9 chamado de...)",correctAnswer:"resume or CV",options:["letter","application","resume or CV","biography"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu tenho cinco anos de experi\xeancia nesta \xe1rea."',correctAnswer:"I have five years of experience in this field.",options:["I have five years of experience in this field.","I want five years of experience.","I worked for five years ago.","My experience is five years long."],audio:null},{id:4,type:"fill-blank",question:'Complete: "I am a good team ___, and I collaborate well with others." (Eu sou um bom jogador de equipe e colaboro bem com os outros.)',correctAnswer:"player",options:["worker","person","player","member"],audio:null},{id:5,type:"image-match",question:"What is this event called? (Como se chama este evento?) \ud83e\udd1d",correctAnswer:"interview",options:[{id:"meeting",text:"\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1",label:"A meeting"},{id:"interview",text:"\ud83e\udd1d",label:"A job interview"},{id:"presentation",text:"\ud83d\udcca",label:"A presentation"},{id:"training",text:"\ud83c\udf93",label:"A training session"}],audio:null},{id:6,type:"multiple-choice",question:"What is the opposite of 'strength' in a job interview context? (Qual \xe9 o oposto de 'qualidade' em um contexto de entrevista de emprego?)",correctAnswer:"Weakness",options:["Power","Failure","Weakness","Disadvantage"],audio:null},{id:7,type:"translation",question:'Translate to English: "Por que voc\xea quer trabalhar para esta empresa?"',correctAnswer:"Why do you want to work for this company?",options:["Why do you work here?","Do you want to work for this company?","Why do you want to work for this company?","Why is this company good for you?"],audio:null},{id:8,type:"fill-blank",question:'Complete: "I am very proficient ___ Microsoft Office." (Eu sou muito proficiente em Microsoft Office.)',correctAnswer:"in",options:["at","with","in","on"],audio:null},{id:9,type:"typing",question:'Type this in English: "Estou ansioso para ouvir de voc\xea." (I look forward to hearing from you.)',correctAnswer:"I look forward to hearing from you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "have / questions / Do / any / for / me / you / ?" (Voc\xea tem alguma pergunta para mim?)',correctAnswer:"Do you have any questions for me?",words:["have","questions","Do","any","for","me","you","?"],options:[],audio:null}]},{id:18,title:"Conditionals (If Clauses) - Condicionais",description:"Learn to use conditional sentences to talk about possibilities, hypothetical situations, and consequences. (Aprenda a usar frases condicionais para falar sobre possibilidades, situa\xe7\xf5es hipot\xe9ticas e consequ\xeancias.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"Which conditional is used for real possibilities in the future? (Qual condicional \xe9 usada para possibilidades reais no futuro?)",correctAnswer:"First Conditional (If + present, will + verb)",options:["Zero Conditional","First Conditional (If + present, will + verb)","Second Conditional","Third Conditional"],audio:null},{id:2,type:"multiple-choice",question:"Complete the sentence: 'If it rains tomorrow, I ___ at home.' (Complete a frase: 'Se chover amanh\xe3, eu ficarei em casa.')",correctAnswer:"will stay",options:["stay","stayed","will stay","would stay"],audio:null},{id:3,type:"translation",question:'Translate to English: "Se eu ganhasse na loteria, eu viajaria pelo mundo."',correctAnswer:"If I won the lottery, I would travel the world.",options:["If I win the lottery, I will travel the world.","If I won the lottery, I would travel the world.","When I win the lottery, I travel.","If I had won the lottery, I would have traveled."],audio:null},{id:4,type:"fill-blank",question:'Complete: "If I ___ you, I would study harder for the exam." (Se eu fosse voc\xea, eu estudaria mais para a prova.)',correctAnswer:"were",options:["am","was","were","be"],audio:null},{id:5,type:"multiple-choice",question:"Which conditional describes an unreal or hypothetical situation in the present or future? (Qual condicional descreve uma situa\xe7\xe3o irreal ou hipot\xe9tica no presente ou futuro?)",correctAnswer:"Second Conditional (If + past, would + verb)",options:["First Conditional","Second Conditional (If + past, would + verb)","Third Conditional","Zero Conditional"],audio:null},{id:6,type:"translation",question:'Translate to English: "Se voc\xea aquecer gelo, ele derrete."',correctAnswer:"If you heat ice, it melts.",options:["If you heat ice, it will melt.","If you heat ice, it melts.","If you would heat ice, it melted.","If you are heating ice, it is melting."],audio:null},{id:7,type:"fill-blank",question:'Complete: "If she had studied, she ___ the exam." (Se ela tivesse estudado, ela teria passado na prova.)',correctAnswer:"would have passed",options:["would pass","will pass","passed","would have passed"],audio:null},{id:8,type:"typing",question:'Type this in English: "Voc\xea n\xe3o vai conseguir o emprego a menos que se prepare." (You won\'t get the job unless you prepare.)',correctAnswer:"You won't get the job unless you prepare.",options:[],audio:null},{id:9,type:"multiple-choice",question:"Which conditional talks about an unreal past situation and its unreal past result? (Qual condicional fala sobre uma situa\xe7\xe3o passada irreal e seu resultado passado irreal?)",correctAnswer:"Third Conditional (If + past perfect, would have + past participle)",options:["First Conditional","Second Conditional","Third Conditional (If + past perfect, would have + past participle)","Zero Conditional"],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "more / had / If / money, / I / I / travel / would / ." (Se eu tivesse mais dinheiro, eu viajaria.)',correctAnswer:"If I had more money, I would travel.",words:["more","had","If","money,","I","I","travel","would","."],options:[],audio:null}]},{id:19,title:"Phrasal Verbs - Verbos Frasais",description:"Learn common phrasal verbs and their meanings to sound more like a native speaker. (Aprenda verbos frasais comuns e seus significados para soar mais como um falante nativo.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"What does 'give up' mean? (O que 'give up' significa?)",correctAnswer:"To quit or stop trying.",options:["To give a gift.","To look up at something.","To quit or stop trying.","To start something new."],audio:null},{id:2,type:"multiple-choice",question:"Complete the sentence: 'Please ___ your shoes before you enter the house.' (Complete a frase: 'Por favor, tire seus sapatos antes de entrar em casa.')",correctAnswer:"take off",options:["put on","take off","look for","turn on"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu preciso descobrir a verdade."',correctAnswer:"I need to find out the truth.",options:["I need to look for the truth.","I need to find out the truth.","I need to get over the truth.","I need to put up with the truth."],audio:null},{id:4,type:"fill-blank",question:'Complete: "The meeting was called ___ because the manager was sick." (A reuni\xe3o foi cancelada porque o gerente estava doente.)',correctAnswer:"off",options:["up","on","off","out"],audio:null},{id:5,type:"image-match",question:"What is he doing? (O que ele est\xe1 fazendo?) \u23f0",correctAnswer:"waking-up",options:[{id:"waking-up",text:"\u23f0",label:"Waking up"},{id:"giving-up",text:"\ud83c\udff3\ufe0f",label:"Giving up"},{id:"taking-off",text:"\u2708\ufe0f",label:"Taking off"},{id:"turning-on",text:"\ud83d\udca1",label:"Turning on"}],audio:null},{id:6,type:"multiple-choice",question:"What does it mean to 'run into' someone? (O que significa 'run into' algu\xe9m?)",correctAnswer:"To meet someone by chance.",options:["To run faster than someone.","To meet someone by chance.","To have a problem with someone.","To chase someone."],audio:null},{id:7,type:"translation",question:'Translate to English: "N\xe3o desista dos seus sonhos."',correctAnswer:"Don't give up on your dreams.",options:["Don't look for your dreams.","Don't give up on your dreams.","Don't run out of dreams.","Don't put off your dreams."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Can you please look ___ my dog while I\'m away?" (Voc\xea pode por favor cuidar do meu cachorro enquanto eu estiver fora?)',correctAnswer:"after",options:["up","for","after","at"],audio:null},{id:9,type:"typing",question:'Type this in English: "Ele inventou uma desculpa \xf3tima." (He made up a great excuse.)',correctAnswer:"He made up a great excuse.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "off / Turn / lights / the / you / before / leave / ." (Apague as luzes antes de sair.)',correctAnswer:"Turn off the lights before you leave.",words:["off","Turn","lights","the","you","before","leave","."],options:[],audio:null}]},{id:20,title:"Idiomatic Expressions - Express\xf5es Idiom\xe1ticas",description:"Understand and use common English idioms to enrich your vocabulary. (Entenda e use express\xf5es idiom\xe1ticas comuns em ingl\xeas para enriquecer seu vocabul\xe1rio.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"What does 'break a leg' mean? (O que 'break a leg' significa?)",correctAnswer:"Good luck!",options:["Be careful.","You broke your leg.","Work hard.","Good luck!"],audio:null},{id:2,type:"multiple-choice",question:"If something is 'a piece of cake', it is... (Se algo \xe9 'a piece of cake', isso \xe9...)",correctAnswer:"Very easy.",options:["Delicious.","A dessert.","Very easy.","A difficult task."],audio:null},{id:3,type:"translation",question:'Translate the idea: "Est\xe1 chovendo canivetes."',correctAnswer:"It's raining cats and dogs.",options:["It's raining a lot.","It's raining cats and dogs.","The rain is very strong.","It's raining knives."],audio:null},{id:4,type:"fill-blank",question:'Complete: "That new phone costs an arm and a ___. I can\'t afford it." (Aquele novo celular custa os olhos da cara. Eu n\xe3o posso comprar.)',correctAnswer:"leg",options:["hand","foot","leg","head"],audio:null},{id:5,type:"image-match",question:"What idiom does this represent? (Que express\xe3o idiom\xe1tica isso representa?) \ud83e\udd10",correctAnswer:"zip-your-lip",options:[{id:"on-cloud-nine",text:"\u2601\ufe0f",label:"On cloud nine (very happy)"},{id:"zip-your-lip",text:"\ud83e\udd10",label:"Zip your lip (be quiet)"},{id:"cold-feet",text:"\ud83d\udc63",label:"Get cold feet (be nervous)"},{id:"butterflies",text:"\ud83e\udd8b",label:"Have butterflies in your stomach (be nervous)"}],audio:null},{id:6,type:"multiple-choice",question:"What does it mean to 'hit the books'? (O que significa 'hit the books'?)",correctAnswer:"To study hard.",options:["To physically hit books.","To read a lot of books.","To study hard.","To buy books."],audio:null},{id:7,type:"translation",question:'Translate the idea: "Acertou na mosca."',correctAnswer:"You hit the nail on the head.",options:["You are very correct.","You hit the fly.","You hit the nail on the head.","You have a good point."],audio:null},{id:8,type:"fill-blank",question:'Complete: "I only see my cousins once in a blue ___. They live far away." (Eu s\xf3 vejo meus primos muito raramente. Eles moram longe.)',correctAnswer:"moon",options:["sky","moon","year","time"],audio:null},{id:9,type:"typing",question:'Type the meaning of this idiom: "Don\'t judge a book by its cover." (N\xe3o julgue as apar\xeancias.)',correctAnswer:"Don't judge something by its appearance.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order to form an idiom: "is / in / court / The / your / ball / ." (A decis\xe3o \xe9 sua agora.)',correctAnswer:"The ball is in your court.",words:["is","in","court","The","your","ball","."],options:[],audio:null}]},{id:21,title:"Basic Greetings - Sauda\xe7\xf5es B\xe1sicas",description:"Learn how to greet people and introduce yourself. (Aprenda a cumprimentar as pessoas e a se apresentar.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'oi' in English? (Como se diz 'oi' em ingl\xeas?)",correctAnswer:"Hi",options:["Bye","Yes","Hi","Thanks"],audio:null},{id:2,type:"multiple-choice",question:"What is a common way to ask 'tudo bem?'? (Qual \xe9 uma forma comum de perguntar 'tudo bem?')",correctAnswer:"How are you?",options:["Who are you?","What is this?","How are you?","Where are you?"],audio:null},{id:3,type:"translation",question:'Translate to English: "Meu nome \xe9 Maria."',correctAnswer:"My name is Maria.",options:["Her name is Maria.","My name is Maria.","I am Maria.","You are Maria."],audio:null},{id:4,type:"image-match",question:"Which one means 'adeus'? (Qual deles significa 'adeus'?) \ud83d\udc4b",correctAnswer:"goodbye",options:[{id:"hello",text:"\ud83d\udc4b",label:"Hello"},{id:"goodbye",text:"\ud83d\udc4b",label:"Goodbye"},{id:"thanks",text:"\ud83d\ude4f",label:"Thank you"},{id:"sorry",text:"\ud83d\ude14",label:"Sorry"}],audio:null},{id:5,type:"fill-blank",question:'Complete: "___ you for your help." (Obrigado(a) pela sua ajuda.)',correctAnswer:"Thank",options:["Please","Sorry","Welcome","Thank"],audio:null},{id:6,type:"multiple-choice",question:"How do you respond to 'Thank you'? (Como voc\xea responde a 'Thank you'?)",correctAnswer:"You're welcome",options:["You're welcome","Good morning","Excuse me","I am fine"],audio:null},{id:7,type:"translation",question:'Translate to English: "Bom dia."',correctAnswer:"Good morning.",options:["Good night.","Good afternoon.","Good morning.","Good evening."],audio:null},{id:8,type:"fill-blank",question:'Complete: "What ___ your name?" (Qual \xe9 o seu nome?)',correctAnswer:"is",options:["are","is","am","name"],audio:null},{id:9,type:"typing",question:'Type this in English: "Prazer em conhecer voc\xea." (Nice to meet you.)',correctAnswer:"Nice to meet you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "are / you / How / ?" (Como voc\xea est\xe1?)',correctAnswer:"How are you?",words:["are","you","How","?"],options:[],audio:null}]},{id:22,title:"Numbers and Counting (1-20) - N\xfameros e Contagem (1-20)",description:"Learn to count and use numbers from one to twenty. (Aprenda a contar e usar n\xfameros de um a vinte.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"image-match",question:"What number is this? (Que n\xfamero \xe9 este?) \ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",correctAnswer:"three",options:[{id:"one",text:"\ud83c\udf4e",label:"One"},{id:"five",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Five"},{id:"three",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Three"},{id:"ten",text:"\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e\ud83c\udf4e",label:"Ten"}],audio:null},{id:2,type:"multiple-choice",question:"What is the number '11'? (Qual \xe9 o n\xfamero '11'?)",correctAnswer:"Eleven",options:["Twelve","Ten","Seven","Eleven"],audio:null},{id:3,type:"multiple-choice",question:"How do you write 'vinte' in English? (Como se escreve 'vinte' em ingl\xeas?)",correctAnswer:"Twenty",options:["Twelve","Two","Twenty","Thirteen"],audio:null},{id:4,type:"translation",question:'Translate to English: "Eu tenho cinco gatos."',correctAnswer:"I have five cats.",options:["I have five cats.","She has five dogs.","I see five cats.","I have four cats."],audio:null},{id:5,type:"fill-blank",question:'Complete: "There are ___ days in a week." (Existem sete dias em uma semana.)',correctAnswer:"seven",options:["six","seven","eight","ten"],audio:null},{id:6,type:"translation",question:'Translate to English: "Dezesseis"',correctAnswer:"Sixteen",options:["Sixty","Six","Sixteen","Seventeen"],audio:null},{id:7,type:"multiple-choice",question:"Which number comes after fourteen? (Qual n\xfamero vem depois de catorze?)",correctAnswer:"Fifteen",options:["Thirteen","Fifteen","Sixteen","Fifty"],audio:null},{id:8,type:"typing",question:'Type this in English: "Ele tem dezoito anos." (He is eighteen years old.)',correctAnswer:"He is eighteen years old.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "I need ___ dollars." (Eu preciso de doze d\xf3lares.)',correctAnswer:"twelve",options:["twenty","two","twelve","ten"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "She has two brothers." (Ela tem dois irm\xe3os.)',correctAnswer:"She has two brothers.",words:["brothers","She","two","has"],options:[],audio:null}]},{id:23,title:"Common Objects - Objetos Comuns",description:"Learn the names of everyday objects around you. (Aprenda os nomes de objetos do dia a dia ao seu redor.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83d\udcd6",correctAnswer:"book",options:[{id:"pen",text:"\ud83d\udd8a\ufe0f",label:"Pen"},{id:"book",text:"\ud83d\udcd6",label:"Book"},{id:"car",text:"\ud83d\ude97",label:"Car"},{id:"house",text:"\ud83c\udfe0",label:"House"}],audio:null},{id:2,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83d\udd11",correctAnswer:"key",options:[{id:"phone",text:"\ud83d\udcf1",label:"Phone"},{id:"door",text:"\ud83d\udeaa",label:"Door"},{id:"key",text:"\ud83d\udd11",label:"Key"},{id:"window",text:"\ud83d\uddbc\ufe0f",label:"Window"}],audio:null},{id:3,type:"multiple-choice",question:"What do you sit on? (No que voc\xea se senta?)",correctAnswer:"A chair",options:["A table","A chair","A window","A door"],audio:null},{id:4,type:"multiple-choice",question:"How do you say 'mesa' in English? (Como se diz 'mesa' em ingl\xeas?)",correctAnswer:"Table",options:["Chair","Desk","Table","Floor"],audio:null},{id:5,type:"translation",question:'Translate to English: "Onde est\xe1 meu celular?"',correctAnswer:"Where is my phone?",options:["What is my phone?","Where is my phone?","This is my phone.","Is that your phone?"],audio:null},{id:6,type:"fill-blank",question:'Complete: "The ___ is on the table." (O livro est\xe1 sobre a mesa.)',correctAnswer:"book",options:["pen","cat","book","key"],audio:null},{id:7,type:"multiple-choice",question:"What do you use to write? (O que voc\xea usa para escrever?)",correctAnswer:"A pen",options:["A pen","A book","A fork","A car"],audio:null},{id:8,type:"translation",question:'Translate to English: "uma casa grande"',correctAnswer:"a big house",options:["a small house","a big car","a blue house","a big house"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu abro a porta." (I open the door.)',correctAnswer:"I open the door.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / my / This / car / ." (Este \xe9 meu carro.)',correctAnswer:"This is my car.",words:["is","my","This","car","."],options:[],audio:null}]},{id:24,title:"The Family - A Fam\xedlia",description:"Learn vocabulary for family members. (Aprenda o vocabul\xe1rio para os membros da fam\xedlia.)",difficulty:"beginner",xp:10,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'm\xe3e' in English? (Como se diz 'm\xe3e' em ingl\xeas?)",correctAnswer:"Mother",options:["Father","Sister","Brother","Mother"],audio:null},{id:2,type:"multiple-choice",question:"Your mother's son is your... (O filho da sua m\xe3e \xe9 seu...)",correctAnswer:"Brother",options:["Sister","Brother","Father","Son"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu amo minha fam\xedlia."',correctAnswer:"I love my family.",options:["I like my family.","I love my family.","I have a family.","This is my family."],audio:null},{id:4,type:"image-match",question:"Who is this? (Quem \xe9 este?) \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",correctAnswer:"family",options:[{id:"family",text:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",label:"Family"},{id:"friends",text:"\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1",label:"Friends"},{id:"baby",text:"\ud83d\udc76",label:"Baby"},{id:"doctor",text:"\ud83d\udc68\u200d\u2695\ufe0f",label:"Doctor"}],audio:null},{id:5,type:"fill-blank",question:'Complete: "He is my ___. His name is John." (Ele \xe9 meu pai. O nome dele \xe9 John.)',correctAnswer:"father",options:["mother","sister","father","son"],audio:null},{id:6,type:"multiple-choice",question:"How do you say 'av\xf3' in English? (Como se diz 'av\xf3' em ingl\xeas?)",correctAnswer:"Grandmother",options:["Grandfather","Grandmother","Mother","Aunt"],audio:null},{id:7,type:"translation",question:'Translate to English: "Ela tem uma irm\xe3 e dois irm\xe3os."',correctAnswer:"She has one sister and two brothers.",options:["She has one sister and two brothers.","He has a sister.","She has two sisters and one brother.","They have a sister."],audio:null},{id:8,type:"typing",question:'Type this in English: "Meu av\xf4 \xe9 velho." (My grandfather is old.)',correctAnswer:"My grandfather is old.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "My father\'s wife is my ___." (A esposa do meu pai \xe9 minha m\xe3e.)',correctAnswer:"mother",options:["aunt","sister","mother","daughter"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "My sister is a doctor." (Minha irm\xe3 \xe9 m\xe9dica.)',correctAnswer:"My sister is a doctor.",words:["is","doctor","My","a","sister"],options:[],audio:null}]},{id:25,title:"Food and Drink - Comida e Bebida",description:"Learn basic vocabulary for food and drinks. (Aprenda vocabul\xe1rio b\xe1sico para comidas e bebidas.)",difficulty:"beginner",xp:15,exercises:[{id:1,type:"image-match",question:"What is this in English? (O que \xe9 isto em ingl\xeas?) \ud83c\udf4e",correctAnswer:"apple",options:[{id:"banana",text:"\ud83c\udf4c",label:"Banana"},{id:"apple",text:"\ud83c\udf4e",label:"Apple"},{id:"orange",text:"\ud83c\udf4a",label:"Orange"},{id:"grape",text:"\ud83c\udf47",label:"Grape"}],audio:null},{id:2,type:"image-match",question:"What drink is this? (Que bebida \xe9 esta?) \u2615",correctAnswer:"coffee",options:[{id:"water",text:"\ud83d\udca7",label:"Water"},{id:"milk",text:"\ud83e\udd5b",label:"Milk"},{id:"juice",text:"\ud83e\uddc3",label:"Juice"},{id:"coffee",text:"\u2615",label:"Coffee"}],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'p\xe3o' in English? (Como se diz 'p\xe3o' em ingl\xeas?)",correctAnswer:"Bread",options:["Rice","Cheese","Bread","Meat"],audio:null},{id:4,type:"multiple-choice",question:"Which of these is a vegetable? (Qual destes \xe9 um vegetal?)",correctAnswer:"Carrot",options:["Apple","Carrot","Banana","Orange"],audio:null},{id:5,type:"translation",question:'Translate to English: "Eu bebo \xe1gua."',correctAnswer:"I drink water.",options:["I eat water.","I drink milk.","I drink water.","I want water."],audio:null},{id:6,type:"fill-blank",question:'Complete: "I eat ___ for breakfast." (Eu como p\xe3o no caf\xe9 da manh\xe3.)',correctAnswer:"bread",options:["water","juice","bread","coffee"],audio:null},{id:7,type:"translation",question:'Translate to English: "Queijo e presunto."',correctAnswer:"Cheese and ham.",options:["Cheese and ham.","Chicken and fish.","Bread and butter.","Salt and pepper."],audio:null},{id:8,type:"multiple-choice",question:"What do you say when you are thirsty? (O que voc\xea diz quando est\xe1 com sede?)",correctAnswer:"I want to drink water.",options:["I am hungry.","I want to drink water.","I am tired.","I want to eat."],audio:null},{id:9,type:"typing",question:'Type this in English: "O peixe \xe9 delicioso." (The fish is delicious.)',correctAnswer:"The fish is delicious.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "like / I / apples / ." (Eu gosto de ma\xe7\xe3s.)',correctAnswer:"I like apples.",words:["like","I","apples","."],options:[],audio:null}]},{id:26,title:"Daily Routines (Present Simple) - Rotinas Di\xe1rias",description:"Talk about your daily activities using the Present Simple tense. (Fale sobre suas atividades di\xe1rias usando o tempo Presente Simples.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'Eu acordo \xe0s 7 da manh\xe3'? (How do you say 'Eu acordo \xe0s 7 da manh\xe3'?)",correctAnswer:"I wake up at 7 AM.",options:["I woke up at 7 AM.","I will wake up at 7 AM.","I wake up at 7 AM.","I am waking up at 7 AM."],audio:null},{id:2,type:"multiple-choice",question:"Which sentence is correct for 'ela trabalha'? (Qual frase est\xe1 correta para 'ela trabalha'?)",correctAnswer:"She works.",options:["She work.","She works.","She is work.","She working."],audio:null},{id:3,type:"translation",question:'Translate to English: "N\xf3s tomamos caf\xe9 da manh\xe3 juntos."',correctAnswer:"We eat breakfast together.",options:["We eating breakfast.","We eat breakfast together.","We eats breakfast.","We are eat breakfast."],audio:null},{id:4,type:"fill-blank",question:'Complete: "He ___ to school every day." (Ele vai para a escola todos os dias.)',correctAnswer:"goes",options:["go","goes","is going","went"],audio:null},{id:5,type:"image-match",question:"What is this activity? (Que atividade \xe9 esta?)  brushing teeth \ud83e\uddb7",correctAnswer:"brush",options:[{id:"eat",text:"\ud83c\udf7d\ufe0f",label:"Eat breakfast"},{id:"sleep",text:"\ud83d\ude34",label:"Go to sleep"},{id:"work",text:"\ud83d\udcbb",label:"Go to work"},{id:"brush",text:"\ud83e\uddb7",label:"Brush teeth"}],audio:null},{id:6,type:"multiple-choice",question:"What does 'I take a shower' mean? (O que significa 'I take a shower'?)",correctAnswer:"Eu tomo banho.",options:["Eu tomo caf\xe9.","Eu pego um \xf4nibus.","Eu tomo banho.","Eu vou para casa."],audio:null},{id:7,type:"translation",question:'Translate to English: "Eles n\xe3o assistem TV \xe0 noite."',correctAnswer:"They do not watch TV at night.",options:["They does not watch TV.","They watch TV.","They do not watch TV at night.","They are not watching TV."],audio:null},{id:8,type:"fill-blank",question:'Complete: "___ you speak English?" (Voc\xea fala ingl\xeas?)',correctAnswer:"Do",options:["Does","Are","Is","Do"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu vou para a cama \xe0s 11 da noite." (I go to bed at 11 PM.)',correctAnswer:"I go to bed at 11 PM.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "work / I / from / to / Friday / Monday / ." (Eu trabalho de segunda a sexta.)',correctAnswer:"I work from Monday to Friday.",words:["work","I","from","to","Friday","Monday","."],options:[],audio:null}]},{id:27,title:"Places in the City - Lugares na Cidade",description:"Learn to name and talk about places in a city. (Aprenda a nomear e falar sobre lugares em uma cidade.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"image-match",question:"Where do you buy food? (Onde voc\xea compra comida?) \ud83d\uded2",correctAnswer:"supermarket",options:[{id:"park",text:"\ud83c\udf33",label:"Park"},{id:"supermarket",text:"\ud83d\uded2",label:"Supermarket"},{id:"hospital",text:"\ud83c\udfe5",label:"Hospital"},{id:"school",text:"\ud83c\udfeb",label:"School"}],audio:null},{id:2,type:"multiple-choice",question:"Where can you watch movies? (Onde voc\xea pode assistir a filmes?)",correctAnswer:"At the movie theater.",options:["At the bank.","At the post office.","At the movie theater.","At the gym."],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'banco' in English? (Como se diz 'banco' em ingl\xeas?)",correctAnswer:"Bank",options:["Park","Beach","Bank","Bookstore"],audio:null},{id:4,type:"translation",question:'Translate to English: "O hospital fica perto do parque."',correctAnswer:"The hospital is near the park.",options:["The hospital is far from the park.","The hospital is near the park.","The school is near the park.","The hospital is the park."],audio:null},{id:5,type:"fill-blank",question:'Complete: "I am going to the ___ to read books." (Eu vou \xe0 biblioteca para ler livros.)',correctAnswer:"library",options:["restaurant","library","airport","station"],audio:null},{id:6,type:"multiple-choice",question:"A place with many restaurants and shops is a... (Um lugar com muitos restaurantes e lojas \xe9 um...)",correctAnswer:"shopping mall",options:["museum","shopping mall","church","factory"],audio:null},{id:7,type:"translation",question:'Translate to English: "Existe uma farm\xe1cia nesta rua?"',correctAnswer:"Is there a pharmacy on this street?",options:["Where is the pharmacy?","Is there a pharmacy on this street?","I need a pharmacy.","The pharmacy is on the street."],audio:null},{id:8,type:"typing",question:'Type this in English: "N\xf3s vamos para a esta\xe7\xe3o de trem." (We are going to the train station.)',correctAnswer:"We are going to the train station.",options:[],audio:null},{id:9,type:"fill-blank",question:'Complete: "She works at the post ___. " (Ela trabalha nos correios.)',correctAnswer:"office",options:["station","park","office","store"],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "The museum is next to the bank." (O museu fica ao lado do banco.)',correctAnswer:"The museum is next to the bank.",words:["is","next to","The museum","the bank."],options:[],audio:null}]},{id:28,title:"Asking for Directions - Pedindo Dire\xe7\xf5es",description:"Learn phrases to ask for and give directions. (Aprenda frases para pedir e dar dire\xe7\xf5es.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask 'Onde \xe9 o banheiro?'? (How do you ask 'Onde \xe9 o banheiro?'?)",correctAnswer:"Where is the restroom?",options:["When is the restroom?","Where is the restroom?","Who is in the restroom?","What is a restroom?"],audio:null},{id:2,type:"image-match",question:"What does this sign mean? (O que esta placa significa?) \u27a1\ufe0f",correctAnswer:"turn-right",options:[{id:"go-straight",text:"\u2b06\ufe0f",label:"Go straight"},{id:"turn-left",text:"\u2b05\ufe0f",label:"Turn left"},{id:"turn-right",text:"\u27a1\ufe0f",label:"Turn right"},{id:"stop",text:"\ud83d\uded1",label:"Stop"}],audio:null},{id:3,type:"multiple-choice",question:"What does 'Go straight ahead' mean? (O que significa 'Go straight ahead'?)",correctAnswer:"Siga em frente",options:["Vire \xe0 esquerda","Vire \xe0 direita","Siga em frente","Pare aqui"],audio:null},{id:4,type:"fill-blank",question:'Complete: "The bank is ___ the corner." (O banco fica na esquina.)',correctAnswer:"on",options:["in","at","on","under"],audio:null},{id:5,type:"translation",question:'Translate to English: "Vire \xe0 esquerda no pr\xf3ximo sem\xe1foro."',correctAnswer:"Turn left at the next traffic light.",options:["Turn right at the traffic light.","Go straight at the next light.","Turn left at the next traffic light.","Stop at the left traffic light."],audio:null},{id:6,type:"multiple-choice",question:"How do you say '\xc9 longe daqui?'? (How do you say '\xc9 longe daqui?'?)",correctAnswer:"Is it far from here?",options:["Is it far from here?","Is it near here?","How far is it?","It is not far."],audio:null},{id:7,type:"translation",question:'Translate to English: "O hotel fica em frente \xe0 esta\xe7\xe3o."',correctAnswer:"The hotel is across from the station.",options:["The hotel is next to the station.","The hotel is behind the station.","The hotel is across from the station.","The hotel is in the station."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Excuse me, how do I ___ to the museum?" (Com licen\xe7a, como eu chego ao museu?)',correctAnswer:"get",options:["go","find","get","walk"],audio:null},{id:9,type:"typing",question:'Type this in English: "Voc\xea pode me mostrar no mapa?" (Can you show me on the map?)',correctAnswer:"Can you show me on the map?",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / behind / The / school / the / park / ." (A escola fica atr\xe1s do parque.)',correctAnswer:"The school is behind the park.",words:["is","behind","The","school","the","park","."],options:[],audio:null}]},{id:29,title:"Talking About Hobbies (Present Continuous) - Falando sobre Hobbies",description:"Describe actions happening now using the Present Continuous. (Descreva a\xe7\xf5es que est\xe3o acontecendo agora usando o Presente Cont\xednuo.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"What is he doing? (O que ele est\xe1 fazendo?) \ud83d\udc68\u200d\ud83d\udcbb",correctAnswer:"He is working.",options:["He is sleeping.","He is eating.","He is working.","He is reading."],audio:null},{id:2,type:"multiple-choice",question:"How do you say 'Eles est\xe3o jogando futebol'? (How do you say 'Eles est\xe3o jogando futebol'?)",correctAnswer:"They are playing soccer.",options:["They play soccer.","They are playing soccer.","They played soccer.","They will play soccer."],audio:null},{id:3,type:"image-match",question:"What is she doing? (O que ela est\xe1 fazendo?) \ud83c\udfa7",correctAnswer:"listening",options:[{id:"singing",text:"\ud83c\udfa4",label:"She is singing."},{id:"listening",text:"\ud83c\udfa7",label:"She is listening to music."},{id:"dancing",text:"\ud83d\udc83",label:"She is dancing."},{id:"watching",text:"\ud83d\udcfa",label:"She is watching TV."}],audio:null},{id:4,type:"translation",question:'Translate to English: "Eu estou lendo um livro interessante."',correctAnswer:"I am reading an interesting book.",options:["I read an interesting book.","I will read a book.","I am reading an interesting book.","I am writing a book."],audio:null},{id:5,type:"fill-blank",question:'Complete: "What ___ you doing?" (O que voc\xea est\xe1 fazendo?)',correctAnswer:"are",options:["is","am","are","do"],audio:null},{id:6,type:"multiple-choice",question:"Which sentence is correct? (Qual frase est\xe1 correta?)",correctAnswer:"We are studying English.",options:["We is studying English.","We studying English.","We are studying English.","We are study English."],audio:null},{id:7,type:"translation",question:'Translate to English: "O telefone n\xe3o est\xe1 funcionando."',correctAnswer:"The telephone is not working.",options:["The telephone does not work.","The telephone is not working.","The telephone not working.","The telephone will not work."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Look! It ___ raining." (Olhe! Est\xe1 chovendo.)',correctAnswer:"is",options:["is","are","am","be"],audio:null},{id:9,type:"typing",question:'Type this in English: "Ela est\xe1 cozinhando o jantar agora." (She is cooking dinner now.)',correctAnswer:"She is cooking dinner now.",options:[],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "The children are playing in the park." (As crian\xe7as est\xe3o brincando no parque.)',correctAnswer:"The children are playing in the park.",words:["The children","are","playing","in the park."],options:[],audio:null}]},{id:30,title:"Describing People (Adjectives) - Descrevendo Pessoas",description:"Learn adjectives to describe people's appearance and personality. (Aprenda adjetivos para descrever a apar\xeancia e personalidade das pessoas.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you say 'alto' in English? (Como se diz 'alto' em ingl\xeas?)",correctAnswer:"Tall",options:["Short","Tall","Young","Old"],audio:null},{id:2,type:"multiple-choice",question:"The opposite of 'happy' is... (O oposto de 'feliz' \xe9...)",correctAnswer:"Sad",options:["Angry","Tired","Sad","Excited"],audio:null},{id:3,type:"image-match",question:"How would you describe him? (Como voc\xea o descreveria?) \ud83d\ude0a",correctAnswer:"happy",options:[{id:"happy",text:"\ud83d\ude0a",label:"Happy"},{id:"sad",text:"\ud83d\ude22",label:"Sad"},{id:"angry",text:"\ud83d\ude20",label:"Angry"},{id:"tired",text:"\ud83d\ude34",label:"Tired"}],audio:null},{id:4,type:"translation",question:'Translate to English: "Minha irm\xe3 tem cabelo comprido."',correctAnswer:"My sister has long hair.",options:["My sister is long hair.","My sister has short hair.","My sister has long hair.","My brother has long hair."],audio:null},{id:5,type:"fill-blank",question:'Complete: "He is a very ___ person. Everyone likes him." (Ele \xe9 uma pessoa muito amig\xe1vel. Todo mundo gosta dele.)',correctAnswer:"friendly",options:["shy","serious","friendly","quiet"],audio:null},{id:6,type:"multiple-choice",question:"What is a synonym for 'intelligent'? (Qual \xe9 um sin\xf4nimo para 'inteligente'?)",correctAnswer:"Smart",options:["Funny","Kind","Smart","Brave"],audio:null},{id:7,type:"translation",question:'Translate to English: "Eles s\xe3o jovens e fortes."',correctAnswer:"They are young and strong.",options:["They are old and weak.","They are young and strong.","She is young and strong.","They are young and happy."],audio:null},{id:8,type:"fill-blank",question:'Complete: "She has beautiful blue ___." (Ela tem lindos olhos azuis.)',correctAnswer:"eyes",options:["hair","eyes","hands","ears"],audio:null},{id:9,type:"typing",question:'Type this in English: "Meu professor \xe9 muito paciente." (My teacher is very patient.)',correctAnswer:"My teacher is very patient.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / a / man / kind / He / ." (Ele \xe9 um homem gentil.)',correctAnswer:"He is a kind man.",words:["is","a","man","kind","He","."],options:[],audio:null}]},{id:31,title:"Shopping for Clothes - Comprando Roupas",description:"Learn vocabulary and phrases for shopping for clothes. (Aprenda vocabul\xe1rio e frases para comprar roupas.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask for the price? (Como voc\xea pergunta o pre\xe7o?)",correctAnswer:"How much is it?",options:["How many is it?","How much is it?","What price this?","Is this expensive?"],audio:null},{id:2,type:"image-match",question:"What is this piece of clothing? (Que pe\xe7a de roupa \xe9 esta?) \ud83d\udc55",correctAnswer:"t-shirt",options:[{id:"t-shirt",text:"\ud83d\udc55",label:"T-shirt"},{id:"pants",text:"\ud83d\udc56",label:"Pants"},{id:"dress",text:"\ud83d\udc57",label:"Dress"},{id:"shoes",text:"\ud83d\udc5f",label:"Shoes"}],audio:null},{id:3,type:"multiple-choice",question:"How do you say 'Eu gostaria de experimentar isto'? (How do you say 'Eu gostaria de experimentar isto'?)",correctAnswer:"I would like to try this on.",options:["I want to buy this.","I would like to try this on.","I can see this.","I like this one."],audio:null},{id:4,type:"translation",question:'Translate to English: "Voc\xea tem isso em um tamanho menor?"',correctAnswer:"Do you have this in a smaller size?",options:["Do you have this in a bigger size?","Do you have this in another color?","Do you have this in a smaller size?","Can I have a small one?"],audio:null},{id:5,type:"fill-blank",question:'Complete: "The ___ room is over there." (O provador fica logo ali.)',correctAnswer:"fitting",options:["changing","trying","fitting","test"],audio:null},{id:6,type:"multiple-choice",question:"What do you wear on your feet? (O que voc\xea usa nos seus p\xe9s?)",correctAnswer:"Shoes",options:["Hats","Gloves","Scarves","Shoes"],audio:null},{id:7,type:"translation",question:'Translate to English: "Vou levar esta camisa."',correctAnswer:"I'll take this shirt.",options:["I'll take this shirt.","I'll leave this shirt.","I see that shirt.","I want a shirt."],audio:null},{id:8,type:"fill-blank",question:'Complete: "This dress is too ___. Do you have a cheaper one?" (Este vestido \xe9 muito caro. Voc\xea tem um mais barato?)',correctAnswer:"expensive",options:["cheap","big","small","expensive"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu estou apenas olhando, obrigado." (I\'m just looking, thank you.)',correctAnswer:"I'm just looking, thank you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "credit / Do / accept / card / you / ?" (Voc\xeas aceitam cart\xe3o de cr\xe9dito?)',correctAnswer:"Do you accept credit card?",words:["credit","Do","accept","card","you","?"],options:[],audio:null}]},{id:32,title:"Past Events (Past Simple) - Eventos Passados",description:"Talk about completed actions in the past using the Past Simple tense. (Fale sobre a\xe7\xf5es conclu\xeddas no passado usando o Passado Simples.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you change 'go' to the Past Simple? (Como voc\xea muda 'go' para o Passado Simples?)",correctAnswer:"went",options:["goed","gone","went","was go"],audio:null},{id:2,type:"multiple-choice",question:"Which sentence is in the past? (Qual frase est\xe1 no passado?)",correctAnswer:"She visited her grandmother last week.",options:["She visits her grandmother.","She is visiting her grandmother.","She will visit her grandmother.","She visited her grandmother last week."],audio:null},{id:3,type:"translation",question:'Translate to English: "N\xf3s n\xe3o fomos \xe0 festa."',correctAnswer:"We did not go to the party.",options:["We do not go to the party.","We did not go to the party.","We were not at the party.","We will not go to the party."],audio:null},{id:4,type:"fill-blank",question:'Complete: "I ___ a great movie yesterday." (Eu vi um \xf3timo filme ontem.)',correctAnswer:"saw",options:["see","seen","saw","was seeing"],audio:null},{id:5,type:"image-match",question:"What did they do yesterday? (O que eles fizeram ontem?) \u2708\ufe0f",correctAnswer:"traveled",options:[{id:"worked",text:"\ud83d\udcbc",label:"They worked."},{id:"studied",text:"\ud83d\udcda",label:"They studied."},{id:"traveled",text:"\u2708\ufe0f",label:"They traveled."},{id:"cooked",text:"\ud83c\udf73",label:"They cooked."}],audio:null},{id:6,type:"multiple-choice",question:"How do you ask a question about the past? (Como voc\xea faz uma pergunta sobre o passado?)",correctAnswer:"Did you eat breakfast?",options:["Do you eat breakfast?","Did you eat breakfast?","Have you eat breakfast?","You did eat breakfast?"],audio:null},{id:7,type:"translation",question:'Translate to English: "Ele comprou um carro novo no ano passado."',correctAnswer:"He bought a new car last year.",options:["He buys a new car last year.","He bought a new car last year.","He has bought a new car.","He will buy a new car."],audio:null},{id:8,type:"fill-blank",question:'Complete: "What did you ___ on the weekend?" (O que voc\xea fez no fim de semana?)',correctAnswer:"do",options:["did","done","do","doing"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu estudei ingl\xeas por tr\xeas horas." (I studied English for three hours.)',correctAnswer:"I studied English for three hours.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "night / TV / watched / last / They / ." (Eles assistiram TV na noite passada.)',correctAnswer:"They watched TV last night.",words:["night","TV","watched","last","They","."],options:[],audio:null}]},{id:33,title:"Future Plans (Going to vs. Will) - Planos Futuros",description:"Learn to talk about future plans and predictions. (Aprenda a falar sobre planos e previs\xf5es futuras.)",difficulty:"intermediate",xp:20,exercises:[{id:1,type:"multiple-choice",question:"For a plan you have already decided, you use... (Para um plano que voc\xea j\xe1 decidiu, voc\xea usa...)",correctAnswer:"going to",options:["will","going to","would","can"],audio:null},{id:2,type:"multiple-choice",question:"Choose the correct sentence for a future plan. (Escolha a frase correta para um plano futuro.)",correctAnswer:"I am going to travel to Japan next year.",options:["I am going to travel to Japan next year.","I will travel to Japan next year.","I travel to Japan next year.","I traveled to Japan next year."],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu acho que vai chover amanh\xe3."',correctAnswer:"I think it will rain tomorrow.",options:["I think it is going to rain tomorrow.","I think it will rain tomorrow.","I think it rains tomorrow.","I think it is raining."],audio:null},{id:4,type:"fill-blank",question:'Complete: "She ___ be a doctor when she grows up." (Ela vai ser m\xe9dica quando crescer.)',correctAnswer:"is going to",options:["will","is going to","is","goes to"],audio:null},{id:5,type:"image-match",question:"What is his plan for the weekend? (Qual o plano dele para o fim de semana?) \ud83c\udfa3",correctAnswer:"go-fishing",options:[{id:"go-fishing",text:"\ud83c\udfa3",label:"He is going to go fishing."},{id:"play-soccer",text:"\u26bd",label:"He is going to play soccer."},{id:"go-shopping",text:"\ud83d\udecd\ufe0f",label:"He is going to go shopping."},{id:"read-book",text:"\ud83d\udcd6",label:"He is going to read a book."}],audio:null},{id:6,type:"multiple-choice",question:"For a spontaneous decision made at the moment of speaking, you use... (Para uma decis\xe3o espont\xe2nea feita no momento da fala, voc\xea usa...)",correctAnswer:"will",options:["will","going to","am","do"],audio:null},{id:7,type:"translation",question:'Translate to English: "N\xf3s n\xe3o vamos sair esta noite."',correctAnswer:"We are not going to go out tonight.",options:["We will not go out tonight.","We do not go out tonight.","We are not going to go out tonight.","We did not go out tonight."],audio:null},{id:8,type:"fill-blank",question:'Complete: "The phone is ringing. I ___ get it!" (O telefone est\xe1 tocando. Eu vou atender!)',correctAnswer:"will",options:["am going to","will","do","am"],audio:null},{id:9,type:"typing",question:'Type this in English: "O que voc\xea vai fazer depois da aula?" (What are you going to do after class?)',correctAnswer:"What are you going to do after class?",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "help / you / I / will / ." (Eu vou te ajudar.)',correctAnswer:"I will help you.",words:["help","you","I","will","."],options:[],audio:null}]},{id:34,title:"At the Restaurant - No Restaurante",description:"Learn useful phrases for ordering food and dining at a restaurant. (Aprenda frases \xfateis para pedir comida e jantar em um restaurante.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"multiple-choice",question:"How do you ask for the menu? (Como voc\xea pede o card\xe1pio?)",correctAnswer:"Can I have the menu, please?",options:["Where is the menu?","Can I have the menu, please?","Give me the menu.","I want to see a menu."],audio:null},{id:2,type:"multiple-choice",question:"When you are ready to pay, you ask for... (Quando voc\xea est\xe1 pronto para pagar, voc\xea pede...)",correctAnswer:"The bill",options:["The food","The table","The bill","The waiter"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu gostaria de uma mesa para dois."',correctAnswer:"I would like a table for two.",options:["I want a table with two.","I would like a table for two.","I have two tables.","Can I have two tables?"],audio:null},{id:4,type:"fill-blank",question:'Complete: "Are you ready to ___?" (Voc\xea est\xe1 pronto para pedir?)',correctAnswer:"order",options:["eat","pay","order","leave"],audio:null},{id:5,type:"image-match",question:"What is this? (O que \xe9 isto?) \ud83c\udf74",correctAnswer:"cutlery",options:[{id:"plate",text:"\ud83c\udf7d\ufe0f",label:"Plate"},{id:"glass",text:"\ud83c\udf77",label:"Glass"},{id:"cutlery",text:"\ud83c\udf74",label:"Cutlery (Fork and Knife)"},{id:"napkin",text:"\ub0c5\ud0a8",label:"Napkin"}],audio:null},{id:6,type:"multiple-choice",question:"What does ' appetizer' mean? (O que significa 'appetizer'?)",correctAnswer:"Entrada",options:["Prato principal","Sobremesa","Bebida","Entrada"],audio:null},{id:7,type:"translation",question:'Translate to English: "A conta, por favor."',correctAnswer:"The check, please.",options:["The menu, please.","The check, please.","The food, please.","More water, please."],audio:null},{id:8,type:"fill-blank",question:'Complete: "For the main ___, I\'ll have the steak." (Para o prato principal, eu quero o bife.)',correctAnswer:"course",options:["dish","food","course","plate"],audio:null},{id:9,type:"typing",question:'Type this in English: "Tudo estava delicioso, obrigado." (Everything was delicious, thank you.)',correctAnswer:"Everything was delicious, thank you.",options:[],audio:null},{id:10,type:"drag-drop",question:'Build the sentence: "I would like to order a pizza." (Eu gostaria de pedir uma pizza.)',correctAnswer:"I would like to order a pizza.",words:["order","a","pizza","I would like to"],options:[],audio:null}]},{id:35,title:"Weather and Seasons - O Tempo e as Esta\xe7\xf5es",description:"Learn how to talk about the weather and the four seasons. (Aprenda a falar sobre o tempo e as quatro esta\xe7\xf5es.)",difficulty:"intermediate",xp:15,exercises:[{id:1,type:"image-match",question:"What's the weather like? (Como est\xe1 o tempo?) \u2600\ufe0f",correctAnswer:"sunny",options:[{id:"sunny",text:"\u2600\ufe0f",label:"It's sunny."},{id:"rainy",text:"\ud83c\udf27\ufe0f",label:"It's rainy."},{id:"cloudy",text:"\u2601\ufe0f",label:"It's cloudy."},{id:"snowy",text:"\u2744\ufe0f",label:"It's snowy."}],audio:null},{id:2,type:"multiple-choice",question:"How do you say 'est\xe1 ventando' in English? (Como se diz 'est\xe1 ventando' em ingl\xeas?)",correctAnswer:"It's windy.",options:["It's cold.","It's windy.","It's hot.","It's foggy."],audio:null},{id:3,type:"multiple-choice",question:"Which season comes after summer? (Qual esta\xe7\xe3o vem depois do ver\xe3o?)",correctAnswer:"Autumn / Fall",options:["Winter","Spring","Autumn / Fall","Summer"],audio:null},{id:4,type:"translation",question:'Translate to English: "Qual \xe9 a temperatura hoje?"',correctAnswer:"What's the temperature today?",options:["How is the weather?","What's the temperature today?","Is it hot today?","What's the day today?"],audio:null},{id:5,type:"fill-blank",question:'Complete: "In winter, it is often very ___." (No inverno, geralmente faz muito frio.)',correctAnswer:"cold",options:["hot","warm","cold","cool"],audio:null},{id:6,type:"multiple-choice",question:"Flowers bloom in the... (As flores desabrocham na...)",correctAnswer:"Spring",options:["Summer","Autumn","Winter","Spring"],audio:null},{id:7,type:"translation",question:'Translate to English: "Leve um guarda-chuva, parece que vai chover."',correctAnswer:"Take an umbrella, it looks like it's going to rain.",options:["Take an umbrella, it is sunny.","Take a coat, it is cold.","Take an umbrella, it looks like it's going to rain.","Do not take an umbrella."],audio:null},{id:8,type:"fill-blank",question:'Complete: "It\'s about 25 ___ Celsius today." (Est\xe1 cerca de 25 graus Celsius hoje.)',correctAnswer:"degrees",options:["percent","numbers","degrees","levels"],audio:null},{id:9,type:"typing",question:'Type this in English: "Eu amo o clima quente do ver\xe3o." (I love the hot weather in summer.)',correctAnswer:"I love the hot weather in summer.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "is / like / the / today / What / weather / ?" (Como est\xe1 o tempo hoje?)',correctAnswer:"What is the weather like today?",words:["is","like","the","today","What","weather","?"],options:[],audio:null}]},{id:36,title:"Expressing Opinions and Debating - Expressando Opini\xf5es",description:"Learn how to express your opinion, agree, and disagree in English. (Aprenda a expressar sua opini\xe3o, concordar e discordar em ingl\xeas.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"Which phrase is used to introduce your opinion? (Qual frase \xe9 usada para introduzir sua opini\xe3o?)",correctAnswer:"In my opinion...",options:["As a result...","For example...","In my opinion...","On the other hand..."],audio:null},{id:2,type:"multiple-choice",question:"How do you strongly agree with someone? (Como voc\xea concorda veementemente com algu\xe9m?)",correctAnswer:"I couldn't agree more.",options:["I see your point, but...","I'm not so sure about that.","I couldn't agree more.","That's one way to look at it."],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu discordo completamente do que voc\xea disse."',correctAnswer:"I completely disagree with what you said.",options:["I agree with what you said.","I completely disagree with what you said.","I understand a little of what you said.","I don't care what you said."],audio:null},{id:4,type:"fill-blank",question:'Complete: "That\'s a valid ___, but have you considered the alternative?" (Esse \xe9 um argumento v\xe1lido, mas voc\xea considerou a alternativa?)',correctAnswer:"point",options:["idea","point","opinion","thought"],audio:null},{id:5,type:"multiple-choice",question:"What is a polite way to interrupt a conversation? (Qual \xe9 uma maneira educada de interromper uma conversa?)",correctAnswer:"Sorry to interrupt, but...",options:["Stop talking.","Listen to me now.","Sorry to interrupt, but...","I want to say something."],audio:null},{id:6,type:"translation",question:'Translate to English: "Do meu ponto de vista, a tecnologia melhorou nossas vidas."',correctAnswer:"From my point of view, technology has improved our lives.",options:["From my point of view, technology has improved our lives.","In conclusion, technology is good.","I believe technology will be better.","In my experience, technology is difficult."],audio:null},{id:7,type:"fill-blank",question:'Complete: "I\'m afraid I have to ___ with you on that." (Receio ter que discordar de voc\xea sobre isso.)',correctAnswer:"disagree",options:["agree","disagree","argue","speak"],audio:null},{id:8,type:"typing",question:'Type this in English: "Vamos concordar em discordar." (Let\'s agree to disagree.)',correctAnswer:"Let's agree to disagree.",options:[],audio:null},{id:9,type:"multiple-choice",question:"Which phrase asks for clarification? (Qual frase pede esclarecimento?)",correctAnswer:"Could you explain what you mean by that?",options:["I think you are wrong.","That's not true.","I don't understand you.","Could you explain what you mean by that?"],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "see / I / coming / you\'re / from / where / ." (Eu entendo de onde voc\xea vem / seu ponto de vista.)',correctAnswer:"I see where you're coming from.",words:["see","I","coming","you're","from","where","."],options:[],audio:null}]},{id:37,title:"Work and Careers (Job Interviews) - Trabalho e Carreiras",description:"Learn vocabulary and phrases for job interviews and talking about your career. (Aprenda vocabul\xe1rio e frases para entrevistas de emprego e para falar sobre sua carreira.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"A common interview question is: 'What are your greatest ___?' (Uma pergunta comum em entrevistas \xe9: 'Quais s\xe3o suas maiores qualidades?')",correctAnswer:"strengths",options:["weaknesses","strengths","hobbies","problems"],audio:null},{id:2,type:"multiple-choice",question:"The document you send to apply for a job is called a... (O documento que voc\xea envia para se candidatar a um emprego \xe9 chamado de...)",correctAnswer:"resume or CV",options:["letter","application","resume or CV","biography"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu tenho cinco anos de experi\xeancia nesta \xe1rea."',correctAnswer:"I have five years of experience in this field.",options:["I have five years of experience in this field.","I want five years of experience.","I worked for five years ago.","My experience is five years long."],audio:null},{id:4,type:"fill-blank",question:'Complete: "I am a good team ___, and I collaborate well with others." (Eu sou um bom jogador de equipe e colaboro bem com os outros.)',correctAnswer:"player",options:["worker","person","player","member"],audio:null},{id:5,type:"image-match",question:"What is this event called? (Como se chama este evento?) \ud83e\udd1d",correctAnswer:"interview",options:[{id:"meeting",text:"\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1",label:"A meeting"},{id:"interview",text:"\ud83e\udd1d",label:"A job interview"},{id:"presentation",text:"\ud83d\udcca",label:"A presentation"},{id:"training",text:"\ud83c\udf93",label:"A training session"}],audio:null},{id:6,type:"multiple-choice",question:"What is the opposite of 'strength' in a job interview context? (Qual \xe9 o oposto de 'qualidade' em um contexto de entrevista de emprego?)",correctAnswer:"Weakness",options:["Power","Failure","Weakness","Disadvantage"],audio:null},{id:7,type:"translation",question:'Translate to English: "Por que voc\xea quer trabalhar para esta empresa?"',correctAnswer:"Why do you want to work for this company?",options:["Why do you work here?","Do you want to work for this company?","Why do you want to work for this company?","Why is this company good for you?"],audio:null},{id:8,type:"fill-blank",question:'Complete: "I am very proficient ___ Microsoft Office." (Eu sou muito proficiente em Microsoft Office.)',correctAnswer:"in",options:["at","with","in","on"],audio:null},{id:9,type:"typing",question:'Type this in English: "Estou ansioso para ouvir de voc\xea." (I look forward to hearing from you.)',correctAnswer:"I look forward to hearing from you.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "have / questions / Do / any / for / me / you / ?" (Voc\xea tem alguma pergunta para mim?)',correctAnswer:"Do you have any questions for me?",words:["have","questions","Do","any","for","me","you","?"],options:[],audio:null}]},{id:38,title:"Conditionals (If Clauses) - Condicionais",description:"Learn to use conditional sentences to talk about possibilities, hypothetical situations, and consequences. (Aprenda a usar frases condicionais para falar sobre possibilidades, situa\xe7\xf5es hipot\xe9ticas e consequ\xeancias.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"Which conditional is used for real possibilities in the future? (Qual condicional \xe9 usada para possibilidades reais no futuro?)",correctAnswer:"First Conditional (If + present, will + verb)",options:["Zero Conditional","First Conditional (If + present, will + verb)","Second Conditional","Third Conditional"],audio:null},{id:2,type:"multiple-choice",question:"Complete the sentence: 'If it rains tomorrow, I ___ at home.' (Complete a frase: 'Se chover amanh\xe3, eu ficarei em casa.')",correctAnswer:"will stay",options:["stay","stayed","will stay","would stay"],audio:null},{id:3,type:"translation",question:'Translate to English: "Se eu ganhasse na loteria, eu viajaria pelo mundo."',correctAnswer:"If I won the lottery, I would travel the world.",options:["If I win the lottery, I will travel the world.","If I won the lottery, I would travel the world.","When I win the lottery, I travel.","If I had won the lottery, I would have traveled."],audio:null},{id:4,type:"fill-blank",question:'Complete: "If I ___ you, I would study harder for the exam." (Se eu fosse voc\xea, eu estudaria mais para a prova.)',correctAnswer:"were",options:["am","was","were","be"],audio:null},{id:5,type:"multiple-choice",question:"Which conditional describes an unreal or hypothetical situation in the present or future? (Qual condicional descreve uma situa\xe7\xe3o irreal ou hipot\xe9tica no presente ou futuro?)",correctAnswer:"Second Conditional (If + past, would + verb)",options:["First Conditional","Second Conditional (If + past, would + verb)","Third Conditional","Zero Conditional"],audio:null},{id:6,type:"translation",question:'Translate to English: "Se voc\xea aquecer gelo, ele derrete."',correctAnswer:"If you heat ice, it melts.",options:["If you heat ice, it will melt.","If you heat ice, it melts.","If you would heat ice, it melted.","If you are heating ice, it is melting."],audio:null},{id:7,type:"fill-blank",question:'Complete: "If she had studied, she ___ the exam." (Se ela tivesse estudado, ela teria passado na prova.)',correctAnswer:"would have passed",options:["would pass","will pass","passed","would have passed"],audio:null},{id:8,type:"typing",question:'Type this in English: "Voc\xea n\xe3o vai conseguir o emprego a menos que se prepare." (You won\'t get the job unless you prepare.)',correctAnswer:"You won't get the job unless you prepare.",options:[],audio:null},{id:9,type:"multiple-choice",question:"Which conditional talks about an unreal past situation and its unreal past result? (Qual condicional fala sobre uma situa\xe7\xe3o passada irreal e seu resultado passado irreal?)",correctAnswer:"Third Conditional (If + past perfect, would have + past participle)",options:["First Conditional","Second Conditional","Third Conditional (If + past perfect, would have + past participle)","Zero Conditional"],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "more / had / If / money, / I / I / travel / would / ." (Se eu tivesse mais dinheiro, eu viajaria.)',correctAnswer:"If I had more money, I would travel.",words:["more","had","If","money,","I","I","travel","would","."],options:[],audio:null}]},{id:39,title:"Phrasal Verbs - Verbos Frasais",description:"Learn common phrasal verbs and their meanings to sound more like a native speaker. (Aprenda verbos frasais comuns e seus significados para soar mais como um falante nativo.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"What does 'give up' mean? (O que 'give up' significa?)",correctAnswer:"To quit or stop trying.",options:["To give a gift.","To look up at something.","To quit or stop trying.","To start something new."],audio:null},{id:2,type:"multiple-choice",question:"Complete the sentence: 'Please ___ your shoes before you enter the house.' (Complete a frase: 'Por favor, tire seus sapatos antes de entrar em casa.')",correctAnswer:"take off",options:["put on","take off","look for","turn on"],audio:null},{id:3,type:"translation",question:'Translate to English: "Eu preciso descobrir a verdade."',correctAnswer:"I need to find out the truth.",options:["I need to look for the truth.","I need to find out the truth.","I need to get over the truth.","I need to put up with the truth."],audio:null},{id:4,type:"fill-blank",question:'Complete: "The meeting was called ___ because the manager was sick." (A reuni\xe3o foi cancelada porque o gerente estava doente.)',correctAnswer:"off",options:["up","on","off","out"],audio:null},{id:5,type:"image-match",question:"What is he doing? (O que ele est\xe1 fazendo?) \u23f0",correctAnswer:"waking-up",options:[{id:"waking-up",text:"\u23f0",label:"Waking up"},{id:"giving-up",text:"\ud83c\udff3\ufe0f",label:"Giving up"},{id:"taking-off",text:"\u2708\ufe0f",label:"Taking off"},{id:"turning-on",text:"\ud83d\udca1",label:"Turning on"}],audio:null},{id:6,type:"multiple-choice",question:"What does it mean to 'run into' someone? (O que significa 'run into' algu\xe9m?)",correctAnswer:"To meet someone by chance.",options:["To run faster than someone.","To meet someone by chance.","To have a problem with someone.","To chase someone."],audio:null},{id:7,type:"translation",question:'Translate to English: "N\xe3o desista dos seus sonhos."',correctAnswer:"Don't give up on your dreams.",options:["Don't look for your dreams.","Don't give up on your dreams.","Don't run out of dreams.","Don't put off your dreams."],audio:null},{id:8,type:"fill-blank",question:'Complete: "Can you please look ___ my dog while I\'m away?" (Voc\xea pode por favor cuidar do meu cachorro enquanto eu estiver fora?)',correctAnswer:"after",options:["up","for","after","at"],audio:null},{id:9,type:"typing",question:'Type this in English: "Ele inventou uma desculpa \xf3tima." (He made up a great excuse.)',correctAnswer:"He made up a great excuse.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order: "off / Turn / lights / the / you / before / leave / ." (Apague as luzes antes de sair.)',correctAnswer:"Turn off the lights before you leave.",words:["off","Turn","lights","the","you","before","leave","."],options:[],audio:null}]},{id:40,title:"Idiomatic Expressions - Express\xf5es Idiom\xe1ticas",description:"Understand and use common English idioms to enrich your vocabulary. (Entenda e use express\xf5es idiom\xe1ticas comuns em ingl\xeas para enriquecer seu vocabul\xe1rio.)",difficulty:"advanced",xp:20,exercises:[{id:1,type:"multiple-choice",question:"What does 'break a leg' mean? (O que 'break a leg' significa?)",correctAnswer:"Good luck!",options:["Be careful.","You broke your leg.","Work hard.","Good luck!"],audio:null},{id:2,type:"multiple-choice",question:"If something is 'a piece of cake', it is... (Se algo \xe9 'a piece of cake', isso \xe9...)",correctAnswer:"Very easy.",options:["Delicious.","A dessert.","Very easy.","A difficult task."],audio:null},{id:3,type:"translation",question:'Translate the idea: "Est\xe1 chovendo canivetes."',correctAnswer:"It's raining cats and dogs.",options:["It's raining a lot.","It's raining cats and dogs.","The rain is very strong.","It's raining knives."],audio:null},{id:4,type:"fill-blank",question:'Complete: "That new phone costs an arm and a ___. I can\'t afford it." (Aquele novo celular custa os olhos da cara. Eu n\xe3o posso comprar.)',correctAnswer:"leg",options:["hand","foot","leg","head"],audio:null},{id:5,type:"image-match",question:"What idiom does this represent? (Que express\xe3o idiom\xe1tica isso representa?) \ud83e\udd10",correctAnswer:"zip-your-lip",options:[{id:"on-cloud-nine",text:"\u2601\ufe0f",label:"On cloud nine (very happy)"},{id:"zip-your-lip",text:"\ud83e\udd10",label:"Zip your lip (be quiet)"},{id:"cold-feet",text:"\ud83d\udc63",label:"Get cold feet (be nervous)"},{id:"butterflies",text:"\ud83e\udd8b",label:"Have butterflies in your stomach (be nervous)"}],audio:null},{id:6,type:"multiple-choice",question:"What does it mean to 'hit the books'? (O que significa 'hit the books'?)",correctAnswer:"To study hard.",options:["To physically hit books.","To read a lot of books.","To study hard.","To buy books."],audio:null},{id:7,type:"translation",question:'Translate the idea: "Acertou na mosca."',correctAnswer:"You hit the nail on the head.",options:["You are very correct.","You hit the fly.","You hit the nail on the head.","You have a good point."],audio:null},{id:8,type:"fill-blank",question:'Complete: "I only see my cousins once in a blue ___. They live far away." (Eu s\xf3 vejo meus primos muito raramente. Eles moram longe.)',correctAnswer:"moon",options:["sky","moon","year","time"],audio:null},{id:9,type:"typing",question:'Type the meaning of this idiom: "Don\'t judge a book by its cover." (N\xe3o julgue as apar\xeancias.)',correctAnswer:"Don't judge something by its appearance.",options:[],audio:null},{id:10,type:"word-order",question:'Put the words in correct order to form an idiom: "is / in / court / The / your / ball / ." (A decis\xe3o \xe9 sua agora.)',correctAnswer:"The ball is in your court.",words:["is","in","court","The","your","ball","."],options:[],audio:null}]}]},rb=e=>{const t=["multiple-choice","translation","fill-blank","typing","image-match"];return(nb[e]||[]).map((e=>Ae(Ae({},e),{},{exercises:e.exercises.filter((e=>t.includes(e.type)))}))).filter((e=>e.exercises.length>0))},ib=()=>{const e=ee(),{setSelectedLanguage:t}=$_();return(0,X_.jsxs)("div",{className:"screen",children:[(0,X_.jsxs)("div",{className:"screen-header",children:[(0,X_.jsx)("button",{className:"back-button",onClick:()=>e("/"),children:"\u2190"}),(0,X_.jsx)("h1",{children:"Choose a Language"}),(0,X_.jsx)("div",{})]}),(0,X_.jsxs)("div",{className:"language-selection",children:[(0,X_.jsxs)("div",{className:"selection-header",children:[(0,X_.jsx)("div",{className:"luna-mascot",children:"\ud83e\udd8a"}),(0,X_.jsx)("h2",{children:"What would you like to learn?"}),(0,X_.jsx)("p",{children:"Choose your learning journey with Luna!"})]}),(0,X_.jsx)("div",{className:"languages-grid",children:tb.map((n=>(0,X_.jsxs)("div",{className:"language-card",onClick:()=>(n=>{t(n),e("/lessons")})(n),children:[(0,X_.jsx)("div",{className:"language-flag",children:n.flag}),(0,X_.jsxs)("div",{className:"language-info",children:[(0,X_.jsx)("h3",{children:n.name}),(0,X_.jsx)("p",{children:n.nativeName})]})]},n.id)))})]})]})},sb=()=>{const e=ee(),{selectedLanguage:t,userStats:n,getLessonCompletion:r,getLanguageProgress:i}=$_(),s=rb(null===t||void 0===t?void 0:t.id),o=i();return t?(0,X_.jsxs)("div",{className:"lesson-map",children:[(0,X_.jsxs)("div",{className:"map-header",children:[(0,X_.jsx)("button",{className:"back-button",onClick:()=>{e("/language-selection")},children:"\u2190"}),(0,X_.jsxs)("div",{className:"language-info",children:[(0,X_.jsx)("span",{className:"language-flag",children:t.flag}),(0,X_.jsx)("span",{className:"language-name",children:t.name})]}),(0,X_.jsxs)("div",{className:"stats",children:[(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,X_.jsx)("span",{className:"stat-value",children:n.totalXP}),(0,X_.jsx)("span",{className:"stat-label",children:"XP"})]}),(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\ud83d\udd25"}),(0,X_.jsx)("span",{className:"stat-value",children:n.currentStreak}),(0,X_.jsx)("span",{className:"stat-label",children:"Streak"})]}),(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\u2b50"}),(0,X_.jsx)("span",{className:"stat-value",children:n.level}),(0,X_.jsx)("span",{className:"stat-label",children:"Level"})]})]})]}),o&&(0,X_.jsxs)("div",{className:"language-progress-overview",children:[(0,X_.jsx)("h3",{children:"\ud83d\udcca Your Progress"}),(0,X_.jsxs)("div",{className:"progress-stats",children:[(0,X_.jsxs)("div",{className:"progress-stat",children:[(0,X_.jsx)("span",{className:"progress-number",children:o.lessonsCompleted.length}),(0,X_.jsx)("span",{className:"progress-label",children:"Lessons Completed"})]}),(0,X_.jsxs)("div",{className:"progress-stat",children:[(0,X_.jsx)("span",{className:"progress-number",children:o.totalXP}),(0,X_.jsx)("span",{className:"progress-label",children:"Language XP"})]}),(0,X_.jsxs)("div",{className:"progress-stat",children:[(0,X_.jsxs)("span",{className:"progress-number",children:[o.overallAccuracy,"%"]}),(0,X_.jsx)("span",{className:"progress-label",children:"Accuracy"})]}),(0,X_.jsxs)("div",{className:"progress-stat",children:[(0,X_.jsx)("span",{className:"progress-number",children:Math.round(o.timeSpent)}),(0,X_.jsx)("span",{className:"progress-label",children:"Minutes"})]})]})]}),(0,X_.jsxs)("div",{className:"map-content",children:[(0,X_.jsx)("div",{className:"map-path",children:s.map(((t,n)=>{const i=(e=>{const t=r(e);return t?{completed:!0,accuracy:t.accuracy,xpEarned:t.xpEarned,completedAt:t.completedAt}:null})(t.id),o=(null===i||void 0===i?void 0:i.completed)||!1;return(0,X_.jsxs)("div",{className:"lesson-node-container",children:[(0,X_.jsxs)("div",{className:"lesson-node ".concat(o?"completed":""," ").concat("unlocked"),onClick:()=>{return n=t.id,void e("/lesson/".concat(n));var n},children:[(0,X_.jsx)("div",{className:"lesson-icon",children:o?100===i.accuracy?"\u2b50":"\u2713":"\ud83d\udcda"}),(0,X_.jsx)("div",{className:"lesson-number",children:t.id}),o&&(0,X_.jsx)("div",{className:"lesson-progress-badge",children:(0,X_.jsxs)("span",{className:"accuracy-badge",children:[i.accuracy,"%"]})})]}),(0,X_.jsxs)("div",{className:"lesson-info",children:[(0,X_.jsxs)("h3",{className:"lesson-title",children:[t.title,o&&100===i.accuracy&&(0,X_.jsx)("span",{className:"perfect-badge",children:"Perfect!"})]}),(0,X_.jsx)("p",{className:"lesson-description",children:t.description}),(0,X_.jsxs)("div",{className:"lesson-meta",children:[(0,X_.jsxs)("div",{className:"lesson-xp",children:["+",t.xp," XP"]}),(0,X_.jsx)("div",{className:"lesson-difficulty",children:t.difficulty}),o&&(0,X_.jsxs)("div",{className:"completion-info",children:[(0,X_.jsxs)("span",{className:"earned-xp",children:["Earned: ",i.xpEarned," XP"]}),(0,X_.jsx)("span",{className:"completion-date",children:new Date(i.completedAt).toLocaleDateString()})]})]})]}),n<s.length-1&&(0,X_.jsx)("div",{className:"path-connector ".concat(o?"completed":"")})]},t.id)}))}),n.recentAchievements&&n.recentAchievements.length>0&&(0,X_.jsxs)("div",{className:"recent-achievements",children:[(0,X_.jsx)("h3",{children:"\ud83c\udfc6 Recent Achievements"}),(0,X_.jsx)("div",{className:"achievement-list",children:n.recentAchievements.map(((e,t)=>(0,X_.jsxs)("div",{className:"achievement-item",children:[(0,X_.jsx)("span",{className:"achievement-icon",children:e.icon}),(0,X_.jsxs)("div",{className:"achievement-text",children:[(0,X_.jsx)("span",{className:"achievement-name",children:e.name}),(0,X_.jsx)("span",{className:"achievement-desc",children:e.description})]})]},e.id)))})]}),n.currentStreak>0&&(0,X_.jsxs)("div",{className:"streak-display",children:[(0,X_.jsx)("div",{className:"streak-flame",children:"\ud83d\udd25"}),(0,X_.jsxs)("div",{className:"streak-text",children:[(0,X_.jsxs)("strong",{children:[n.currentStreak," day streak!"]}),(0,X_.jsxs)("p",{children:["Keep it up! Longest: ",n.longestStreak," days"]})]})]})]}),(0,X_.jsxs)("div",{className:"bottom-nav",children:[(0,X_.jsxs)("div",{className:"nav-item active",children:[(0,X_.jsx)("span",{className:"nav-icon",children:"\ud83c\udfe0"}),(0,X_.jsx)("span",{children:"Learn"})]}),(0,X_.jsxs)("div",{className:"nav-item",children:[(0,X_.jsx)("span",{className:"nav-icon",children:"\ud83d\udcd6"}),(0,X_.jsx)("span",{children:"Stories"})]}),(0,X_.jsxs)("div",{className:"nav-item",children:[(0,X_.jsx)("span",{className:"nav-icon",children:"\ud83c\udfc6"}),(0,X_.jsx)("span",{children:"Leagues"})]}),(0,X_.jsxs)("div",{className:"nav-item",children:[(0,X_.jsx)("span",{className:"nav-icon",children:"\ud83d\udc8e"}),(0,X_.jsx)("span",{children:"Shop"})]}),(0,X_.jsxs)("div",{className:"nav-item",children:[(0,X_.jsx)("span",{className:"nav-icon",children:"\ud83d\udc64"}),(0,X_.jsx)("span",{children:"Profile"})]})]})]}):(e("/language-selection"),null)},ob=()=>{var e;const{lessonId:t}=function(){let{matches:e}=i.useContext(Y),t=e[e.length-1];return t?t.params:{}}(),n=ee(),{selectedLanguage:r,hearts:s,loseHeart:o,completeLesson:a,setCurrentLesson:l}=$_(),[c,u]=(0,i.useState)(0),[h,d]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(0),[w,_]=(0,i.useState)(null),[b,E]=(0,i.useState)(!1),[k,T]=(0,i.useState)(""),[S,C]=(0,i.useState)([]),[I,x]=(0,i.useState)([]),[A,N]=(0,i.useState)([]),P=rb(null===r||void 0===r?void 0:r.id).find((e=>e.id===parseInt(t))),R=null===P||void 0===P?void 0:P.exercises[c],O=(c+1)/(null===P||void 0===P||null===(e=P.exercises)||void 0===e?void 0:e.length)*100;(0,i.useEffect)((()=>{P&&(l(P),_(Date.now()))}),[P,l]),(0,i.useEffect)((()=>{if(c>=0&&null!==P&&void 0!==P&&P.exercises){const e=P.exercises[c];Pe("=== NEW EXERCISE LOADED ==="),Pe("Exercise Index:",c),Pe("Exercise Type:",null===e||void 0===e?void 0:e.type),Pe("Question:",null===e||void 0===e?void 0:e.question),Pe("==========================="),"drag-drop"===(null===e||void 0===e?void 0:e.type)&&e.words&&(x([...e.words]),Pe("Initialized words for drag-drop:",e.words)),"word-order"===(null===e||void 0===e?void 0:e.type)&&e.words&&Pe("Initialized words for word-order:",e.words),Pe("Resetting state for new exercise"),d(null),T(""),C([]),N([]),f(!1),E(!1),Pe("State reset complete")}}),[c]);const D=e=>{Pe("=== ANSWER SELECTION ATTEMPT ==="),Pe("Attempting to select answer:",e),Pe("showFeedback:",p),Pe("isProcessing:",b),Pe("Current selectedAnswer:",h),p||b?Pe("Selection blocked - feedback showing or processing"):(Pe("Setting selected answer to:",e),d(e),Pe("=== ANSWER SELECTION COMPLETE ==="))},L=()=>"typing"===(null===R||void 0===R?void 0:R.type)?k.trim().length>0:"drag-drop"===(null===R||void 0===R?void 0:R.type)?S.length>0:"word-order"===(null===R||void 0===R?void 0:R.type)?A.length>0:null!==h;return P?0===s?(0,X_.jsx)("div",{className:"lesson-interface",children:(0,X_.jsxs)("div",{className:"out-of-hearts",children:[(0,X_.jsx)("div",{className:"sad-luna",children:"\ud83e\udd8a\ud83d\udc94"}),(0,X_.jsx)("h2",{children:"You're out of hearts!"}),(0,X_.jsx)("p",{children:"Take a break and come back later, or practice old lessons to earn hearts back."}),(0,X_.jsx)("button",{className:"back-to-map-btn",onClick:()=>n("/lessons"),children:"Back to Lessons"})]})}):(0,X_.jsxs)("div",{className:"lesson-interface",children:[(0,X_.jsxs)("div",{className:"lesson-header",children:[(0,X_.jsx)("button",{className:"close-button",onClick:()=>{window.confirm("Are you sure you want to exit this lesson? Your progress will be lost. (Tem certeza de que deseja sair desta li\xe7\xe3o? Seu progresso ser\xe1 perdido.)")&&n("/lessons")},children:"\xd7"}),(0,X_.jsx)("div",{className:"progress-bar",children:(0,X_.jsx)("div",{className:"progress-fill",style:{width:"".concat(O,"%")}})}),(0,X_.jsx)("div",{className:"hearts",children:[...Array(5)].map(((e,t)=>(0,X_.jsx)("span",{className:"heart ".concat(t>=s?"empty":""),children:"\u2764\ufe0f"},t)))})]}),(0,X_.jsx)("div",{className:"lesson-content",children:(0,X_.jsxs)("div",{className:"exercise-container",children:[(0,X_.jsx)("div",{className:"question-section",children:(0,X_.jsx)("h2",{className:"question",children:R.question})}),(0,X_.jsx)("div",{className:"answers-section",children:"image-match"===R.type?(0,X_.jsx)("div",{className:"image-options",children:R.options.map((e=>(0,X_.jsxs)("div",{className:"image-option ".concat(h===e.id?"selected":""," ").concat(p||b?"disabled":""),onClick:()=>D(e.id),children:[(0,X_.jsx)("div",{className:"image-icon",children:e.text}),(0,X_.jsx)("div",{className:"image-label",children:e.label})]},e.id)))}):"typing"===R.type?(0,X_.jsx)("div",{className:"typing-exercise",children:(0,X_.jsx)("input",{type:"text",className:"typing-input",value:k,onChange:e=>T(e.target.value),placeholder:"Type your answer here... (Digite sua resposta aqui...)",disabled:p||b})}):"drag-drop"===R.type?(0,X_.jsxs)("div",{className:"drag-drop-exercise",children:[(0,X_.jsxs)("div",{className:"drop-zone",children:[S.map(((e,t)=>(0,X_.jsx)("span",{className:"dropped-word",onClick:()=>(e=>{if(p||b)return;const t=S[e];C(S.filter(((t,n)=>n!==e))),x([...I,t])})(t),children:e},t))),0===S.length&&(0,X_.jsx)("span",{className:"drop-placeholder",children:"Drag words here (Arraste palavras aqui)"})]}),(0,X_.jsx)("div",{className:"word-bank",children:I.map(((e,t)=>(0,X_.jsx)("button",{className:"draggable-word",onClick:()=>(e=>{p||b||(C([...S,e]),x(I.filter((t=>t!==e))))})(e),disabled:p||b,children:e},t)))})]}):"word-order"===R.type?(0,X_.jsxs)("div",{className:"word-order-exercise",children:[(0,X_.jsx)("div",{className:"selected-words",children:0===A.length?(0,X_.jsx)("span",{className:"drop-placeholder",children:"Click words below to build your answer... (Clique nas palavras abaixo para formar sua resposta...)"}):A.map(((e,t)=>(0,X_.jsxs)("span",{className:"ordered-word",onClick:()=>((e,t)=>{p||b||(Pe("Removing ordered word at index:",t,"word:",e),N((e=>e.filter(((e,n)=>n!==t)))))})(e,t),style:{cursor:"pointer"},title:"Click to remove (Clique para remover)",children:[t+1,". ",e]},t)))}),(0,X_.jsx)("div",{className:"word-options",children:R.words.map(((e,t)=>(0,X_.jsx)("button",{className:"word-option ".concat(A.includes(e)?"selected":""),onClick:()=>(e=>{p||b||(Pe("Word clicked:",e),Pe("Current word order answer:",A),A.includes(e)?(Pe("Removing word from answer:",e),N((t=>t.filter((t=>t!==e))))):(Pe("Adding word to answer:",e),N((t=>[...t,e]))))})(e),disabled:p||b,children:e},t)))})]}):(0,X_.jsx)("div",{className:"text-options",children:R.options.map(((e,t)=>(0,X_.jsx)("button",{className:"option-button ".concat(h===e?"selected":""," ").concat(p||b?"disabled":""),onClick:()=>D(e),disabled:p||b,children:e},t)))})}),p&&(0,X_.jsxs)("div",{className:"feedback ".concat(m?"correct":"incorrect"),children:[(0,X_.jsx)("div",{className:"feedback-icon",children:m?"\u2705":"\u274c"}),(0,X_.jsx)("div",{className:"feedback-text",children:m?"Great job! (Muito bem!)":"Correct answer: ".concat(R.correctAnswer," (Resposta correta: ").concat(R.correctAnswer,")")})]})]})}),(0,X_.jsx)("div",{className:"lesson-footer-fixed",children:p?(0,X_.jsx)("div",{children:(0,X_.jsx)("button",{className:"continue-button",onClick:async()=>{if(Pe("=== CONTINUE BUTTON CLICKED ==="),Pe("Current exercise index:",c),Pe("Total exercises:",P.exercises.length),Pe("Current question was:",R.question),Pe("Correct answers so far:",y),Pe("=============================="),f(!1),E(!1),d(null),T(""),C([]),N([]),c<P.exercises.length-1){var e;Pe("Moving to next exercise"),Pe("Next exercise will be:",P.exercises[c+1].question),u((e=>e+1)),"drag-drop"===(null===(e=P.exercises[c+1])||void 0===e?void 0:e.type)&&x([...P.exercises[c+1].words])}else{Pe("=== LESSON COMPLETE ==="),Pe("Final stats calculation...");const e=Math.round(y/P.exercises.length*100),t=w?(Date.now()-w)/1e3/60:0;Pe("Lesson completion data:"),Pe("- Correct answers:",y),Pe("- Total questions:",P.exercises.length),Pe("- Accuracy:",e+"%"),Pe("- Time spent:",t.toFixed(2),"minutes"),Pe("======================");try{Pe("Calling completeLesson");const r=await a(P.id,e,t);Pe("Lesson completion result:",r);const i=r&&"object"===typeof r?JSON.parse(JSON.stringify(r)):r;n("/results",{state:{correctAnswers:y,totalQuestions:P.exercises.length,xpEarned:(null===i||void 0===i?void 0:i.xpEarned)||P.xp,accuracy:e,timeSpent:Math.round(10*t)/10,completionData:i}})}catch(Ng){console.error("Error completing lesson:",Ng),n("/results",{state:{correctAnswers:y,totalQuestions:P.exercises.length,xpEarned:P.xp,accuracy:e,timeSpent:Math.round(10*t)/10}})}}},children:c<P.exercises.length-1?"CONTINUE":"FINISH LESSON"})}):(0,X_.jsx)("div",{children:(0,X_.jsx)("button",{className:"check-button ".concat(L()&&!b?"active":""),onClick:()=>{Pe("handleCheckAnswer called"),b||p?Pe("Already processing or showing feedback, returning early"):L()?(E(!0),Pe("Starting answer check..."),setTimeout((()=>{let e=!1;if(Pe("=== EXERCISE DETAILS ==="),Pe("Exercise ID:",R.id),Pe("Exercise Type:",R.type),Pe("Question:",R.question),Pe("Correct Answer:",R.correctAnswer),Pe("Available Options:",R.options),Pe("Current Exercise Index:",c),Pe("Total Exercises:",P.exercises.length),Pe("========================"),"image-match"===R.type)e=h===R.correctAnswer,Pe("Image match - Selected:",h,"Correct:",R.correctAnswer,"Result:",e);else if("typing"===R.type)e=k.toLowerCase().trim()===R.correctAnswer.toLowerCase().trim(),Pe("Typing - Typed:",k,"Correct:",R.correctAnswer,"Result:",e);else if("drag-drop"===R.type)e=S.join(" ")===R.correctAnswer,Pe("Drag-drop - Dragged:",S.join(" "),"Correct:",R.correctAnswer,"Result:",e);else if("word-order"===R.type){const t=R.correctAnswer.split(" "),n=A;e=t.length===n.length&&t.every(((e,t)=>e===n[t])),Pe("=== WORD ORDER COMPARISON ==="),Pe("User selected order:",n),Pe("Correct word order:",t),Pe("Arrays match:",e),Pe("Length match:",t.length===n.length),t.length===n.length&&(Pe("Word by word comparison:"),t.forEach(((e,t)=>{const r=n[t],i=e===r;Pe("Position ".concat(t,': "').concat(r,'" vs "').concat(e,'" = ').concat(i))}))),Pe("==============================")}else e=h===R.correctAnswer,Pe("Multiple choice - Selected:",h,"Correct:",R.correctAnswer,"Result:",e);Pe("=== ANSWER VALIDATION ==="),Pe("User Answer:",h||k||S.join(" ")||A.join(" ")),Pe("Expected Answer:",R.correctAnswer),Pe("Is Correct:",e),Pe("========================"),Pe("Setting feedback - Correct:",e),Pe("About to set showFeedback to true and isProcessing to false"),g(e),E(!1),f(!0),Pe("State should now be updated - showFeedback: true, isProcessing: false");try{Pe("Not calling endExercise to prevent re-renders"),e?(Pe("Incrementing correct answers"),v((e=>(Pe("Previous correct answers:",e,"\u2192 New:",e+1),e+1)))):(Pe("Losing heart"),o())}catch(Ng){console.error("Error in handleCheckAnswer:",Ng)}}),100)):Pe("No answer ready, returning early")},disabled:!L()||b,children:b?"CHECKING...":"CHECK"})})})]}):(0,X_.jsx)("div",{className:"lesson-interface",children:(0,X_.jsxs)("div",{className:"lesson-not-found",children:[(0,X_.jsx)("h2",{children:"Lesson not found"}),(0,X_.jsx)("button",{onClick:()=>n("/lessons"),children:"Back to Lessons"})]})})};var ab,lb,cb=n(47);function ub(e,t){return e+Math.random()*(t-e)}!function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"}(ab||(ab={})),function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"}(lb||(lb={}));const hb=1e3/60;class db{constructor(e,t,n,r){this.getOptions=t;const{colors:i,initialVelocityX:s,initialVelocityY:o}=this.getOptions();var a,l;this.context=e,this.x=n,this.y=r,this.w=ub(5,20),this.h=ub(5,20),this.radius=ub(5,10),this.vx="number"===typeof s?ub(-s,s):ub(s.min,s.max),this.vy="number"===typeof o?ub(-o,0):ub(o.min,o.max),this.shape=(a=0,l=2,Math.floor(a+Math.random()*(l-a+1))),this.angle=ub(0,360)*Math.PI/180,this.angularSpin=ub(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=ub(0,1),this.rotationDirection=ub(0,1)?lb.Positive:lb.Negative}update(e){const{gravity:t,wind:n,friction:r,opacity:i,drawShape:s}=this.getOptions(),o=e/hb;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=t*o,this.vx+=n*o,this.vx*=r**o,this.vy*=r**o,this.rotateY>=1&&this.rotationDirection===lb.Positive?this.rotationDirection=lb.Negative:this.rotateY<=-1&&this.rotationDirection===lb.Negative&&(this.rotationDirection=lb.Positive);const a=.1*this.rotationDirection*o;if(this.rotateY+=a,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,s&&"function"===typeof s)s.call(this,this.context);else switch(this.shape){case ab.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case ab.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case ab.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}class pb{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=e=>{this.particles.splice(e,1)},this.getParticle=()=>{const e=ub(this.x,this.w+this.x),t=ub(this.y,this.h+this.y);return new db(this.context,this.getOptions,e,t)},this.animate=e=>{const{canvas:t,context:n,particlesGenerated:r,lastNumberOfPieces:i}=this,{run:s,recycle:o,numberOfPieces:a,debug:l,tweenFunction:c,tweenDuration:u}=this.getOptions();if(!s)return!1;const h=this.particles.length,d=o?h:r;if(d<a){i!==a&&(this.tweenProgress=0,this.tweenFrom=d,this.lastNumberOfPieces=a),this.tweenProgress=Math.min(u,Math.max(0,this.tweenProgress+e));const t=c(this.tweenProgress,this.tweenFrom,a,u),n=Math.round(t-d);for(let e=0;e<n;e++)this.particles.push(this.getParticle());this.particlesGenerated+=n}l&&(n.font="12px sans-serif",n.fillStyle="#333",n.textAlign="right",n.fillText("Particles: ".concat(h),t.width-10,t.height-20));for(let p=this.particles.length-1;p>=0;p--){const n=this.particles[p];n.update(e),(n.y>t.height||n.y<-100||n.x>t.width+100||n.x<-100)&&(o&&d<=a?this.particles[p]=this.getParticle():this.removeParticleAt(p))}return h>0||d<a},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=t}}const fb={width:"undefined"!==typeof window?window.innerWidth:300,height:"undefined"!==typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:cb.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class mb{constructor(e,t){var n=this;this.lastFrameTime=0,this.setOptionsWithDefaults=e=>{const t={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options=Ae(Ae(Ae({},t),fb),e),Object.assign(this,e.confettiSource)},this.update=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{options:{run:t,onConfettiComplete:r,frameRate:i},canvas:s,context:o}=n,a=Math.min(e-n.lastFrameTime,50);i&&a<1e3/i?n.rafId=requestAnimationFrame(n.update):(n.lastFrameTime=e-(i?a%i:0),t&&(o.fillStyle="white",o.clearRect(0,0,s.width,s.height)),n.generator.animate(a)?n.rafId=requestAnimationFrame(n.update):(r&&"function"===typeof r&&n.generator.particlesGenerated>0&&r.call(n,n),n._options.run=!1))},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new pb(this.canvas,(()=>this.options)),this.options=t,this.update()}get options(){return this._options}set options(e){var t,n;const r=null===(t=this._options)||void 0===t?void 0:t.run,i=null===(n=this._options)||void 0===n?void 0:n.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"===typeof e.recycle&&e.recycle&&!1===i&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"===typeof e.run&&e.run&&!1===r&&this.update()}}const gb=i.createRef();class yb extends i.Component{constructor(e){super(e),this.canvas=i.createRef(),this.canvas=e.canvasRef||gb}componentDidMount(){if(this.canvas.current){const e=vb(this.props)[0];this.confetti=new mb(this.canvas.current,e)}}componentDidUpdate(){const e=vb(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=vb(this.props),n=Ae({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},t.style);return(0,X_.jsx)("canvas",Ae(Ae({width:e.width,height:e.height,ref:this.canvas},t),{},{style:n}))}}function vb(e){const t={},n={},r=[...Object.keys(fb),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const s in e){const o=e[s];r.includes(s)?t[s]=o:i.includes(s)?i[s]=o:n[s]=o}return[t,n,{}]}yb.defaultProps=Ae({},fb),yb.displayName="ReactConfetti";const wb=i.forwardRef(((e,t)=>(0,X_.jsx)(yb,Ae({canvasRef:t},e)))),_b=()=>{var e;const t=ee(),n=$(),[r,s]=(0,i.useState)(!0),[o,a]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight}),{correctAnswers:l=0,totalQuestions:c=0,xpEarned:u=0,accuracy:h=0,timeSpent:d=0,completionData:p}=n.state||{},f=h||(c>0?Math.round(l/c*100):0);(0,i.useEffect)((()=>{const e=()=>{a({width:window.innerWidth,height:window.innerHeight})};window.addEventListener("resize",e);const t=setTimeout((()=>{s(!1)}),4e3);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}}),[]);const m=f>=90?{message:"Perfect! You're a star!",icon:"\ud83c\udf1f"}:f>=80?{message:"Great job! Keep it up!",icon:"\ud83c\udf89"}:f>=60?{message:"Good work! Practice makes perfect!",icon:"\ud83d\udc4d"}:{message:"Keep practicing! You've got this!",icon:"\ud83d\udcaa"};return(0,X_.jsxs)("div",{className:"results-screen",children:[r&&(0,X_.jsx)(wb,{width:o.width,height:o.height,recycle:!1,numberOfPieces:f>=80?300:150,gravity:.1}),(0,X_.jsxs)("div",{className:"results-content",children:[(0,X_.jsxs)("div",{className:"celebration-section",children:[(0,X_.jsx)("div",{className:"luna-celebration",children:"\ud83e\udd8a\ud83c\udf89"}),(0,X_.jsx)("div",{className:"performance-icon",children:m.icon}),(0,X_.jsx)("h1",{className:"results-title",children:"Lesson Complete!"}),(0,X_.jsx)("p",{className:"performance-message",children:m.message})]}),(0,X_.jsxs)("div",{className:"stats-section",children:[(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,X_.jsxs)("div",{className:"stat-info",children:[(0,X_.jsxs)("div",{className:"stat-value",children:[f,"%"]}),(0,X_.jsx)("div",{className:"stat-label",children:"Accuracy"})]})]}),(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,X_.jsxs)("div",{className:"stat-info",children:[(0,X_.jsxs)("div",{className:"stat-value",children:[l,"/",c]}),(0,X_.jsx)("div",{className:"stat-label",children:"Correct"})]})]}),(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("div",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,X_.jsxs)("div",{className:"stat-info",children:[(0,X_.jsxs)("div",{className:"stat-value",children:["+",u]}),(0,X_.jsx)("div",{className:"stat-label",children:"XP Earned"})]})]}),d>0&&(0,X_.jsxs)("div",{className:"stat-item",children:[(0,X_.jsx)("div",{className:"stat-icon",children:"\u23f1\ufe0f"}),(0,X_.jsxs)("div",{className:"stat-info",children:[(0,X_.jsx)("div",{className:"stat-value",children:(g=d,g<1?"".concat(Math.round(60*g),"s"):g<60?"".concat(g,"m"):"".concat(Math.floor(g/60),"h ").concat(Math.round(g%60),"m"))}),(0,X_.jsx)("div",{className:"stat-label",children:"Time Spent"})]})]})]}),(0,X_.jsxs)("div",{className:"progress-circle",children:[(0,X_.jsxs)("svg",{className:"progress-ring",width:"120",height:"120",children:[(0,X_.jsx)("circle",{className:"progress-ring-circle-bg",stroke:"#e5e5e5",strokeWidth:"8",fill:"transparent",r:"52",cx:"60",cy:"60"}),(0,X_.jsx)("circle",{className:"progress-ring-circle",stroke:"#58cc02",strokeWidth:"8",fill:"transparent",r:"52",cx:"60",cy:"60",strokeDasharray:"".concat(2*Math.PI*52),strokeDashoffset:"".concat(2*Math.PI*52*(1-f/100))})]}),(0,X_.jsx)("div",{className:"progress-text",children:(0,X_.jsxs)("span",{className:"progress-percentage",children:[f,"%"]})})]}),(0,X_.jsxs)("div",{className:"achievements-section",children:[100===f&&(0,X_.jsxs)("div",{className:"achievement",children:[(0,X_.jsx)("span",{className:"achievement-icon",children:"\ud83c\udfc5"}),(0,X_.jsx)("span",{className:"achievement-text",children:"Perfect Score!"})]}),null===p||void 0===p||null===(e=p.achievements)||void 0===e?void 0:e.map(((e,t)=>(0,X_.jsxs)("div",{className:"achievement",children:[(0,X_.jsx)("span",{className:"achievement-icon",children:e.icon}),(0,X_.jsx)("span",{className:"achievement-text",children:e.name})]},t))),d>0&&d<2&&(0,X_.jsxs)("div",{className:"achievement",children:[(0,X_.jsx)("span",{className:"achievement-icon",children:"\u26a1"}),(0,X_.jsx)("span",{className:"achievement-text",children:"Speed Demon!"})]})]}),(0,X_.jsx)("div",{className:"results-actions",children:(0,X_.jsx)("button",{className:"continue-btn",onClick:()=>{t("/lessons")},children:"CONTINUE"})})]})]});var g},bb=e=>{let{isOpen:t,onClose:n,onAuthSuccess:r}=e;const[s,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)({email:"",password:"",displayName:"",confirmPassword:""}),[c,u]=(0,i.useState)(!1),[h,d]=(0,i.useState)(""),[p,f]=(0,i.useState)(""),m=e=>{const{name:t,value:n}=e.target;l((e=>Ae(Ae({},e),{},{[t]:n}))),h&&d("")},g=()=>{l({email:"",password:"",displayName:"",confirmPassword:""}),d(""),f(""),u(!1)},y=()=>{g(),n()};return t?(0,X_.jsx)("div",{className:"auth-modal-overlay",onClick:y,children:(0,X_.jsxs)("div",{className:"auth-modal",onClick:e=>e.stopPropagation(),children:[(0,X_.jsxs)("div",{className:"auth-modal-header",children:[(0,X_.jsx)("button",{className:"close-btn",onClick:y,children:"\xd7"}),(0,X_.jsx)("div",{className:"auth-logo",children:"\ud83e\udd8a"}),(0,X_.jsx)("h2",{children:s?"Welcome back!":"Join Lulearn"}),(0,X_.jsx)("p",{className:"auth-subtitle",children:s?"Sign in to continue your learning journey with Luna":"Start your language learning adventure with Luna the Fox"})]}),(0,X_.jsxs)("form",{className:"auth-form",onSubmit:async e=>{if(e.preventDefault(),(()=>{const{email:e,password:t,displayName:n,confirmPassword:r}=a;if(!e||!t)return d("Please fill in all required fields."),!1;if(!e.includes("@"))return d("Please enter a valid email address."),!1;if(t.length<6)return d("Password must be at least 6 characters long."),!1;if(!s){if(!n.trim())return d("Please enter your name."),!1;if(t!==r)return d("Passwords do not match."),!1}return!0})()){u(!0),d(""),f("");try{let e;e=s?await Y_.login(a.email,a.password):await Y_.register(a.email,a.password,a.displayName),console.log("Auth result:",e),e.success?(f(e.message),setTimeout((()=>{r(e.user),n(),g()}),1e3)):(console.error("Auth error:",e.error,e.message),d(e.message||"Authentication failed. Please try again."))}catch(h){console.error("Unexpected auth error:",h),d("Unexpected error: ".concat(h.message||h))}finally{u(!1)}}},children:[!s&&(0,X_.jsxs)("div",{className:"form-group",children:[(0,X_.jsx)("label",{htmlFor:"displayName",children:"Full Name"}),(0,X_.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:a.displayName,onChange:m,placeholder:"Enter your full name",disabled:c,required:!0})]}),(0,X_.jsxs)("div",{className:"form-group",children:[(0,X_.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,X_.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:m,placeholder:"Enter your email",disabled:c,required:!0})]}),(0,X_.jsxs)("div",{className:"form-group",children:[(0,X_.jsx)("label",{htmlFor:"password",children:"Password"}),(0,X_.jsx)("input",{type:"password",id:"password",name:"password",value:a.password,onChange:m,placeholder:"Enter your password",disabled:c,required:!0})]}),!s&&(0,X_.jsxs)("div",{className:"form-group",children:[(0,X_.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,X_.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:m,placeholder:"Confirm your password",disabled:c,required:!0})]}),h&&(0,X_.jsx)("div",{className:"error-message",children:h}),p&&(0,X_.jsx)("div",{className:"success-message",children:p}),(0,X_.jsx)("button",{type:"submit",className:"auth-submit-btn",disabled:c,children:c?(0,X_.jsx)("span",{className:"loading-spinner",children:"\u23f3"}):s?"Sign In":"Create Account"})]}),(0,X_.jsx)("div",{className:"auth-switch",children:(0,X_.jsxs)("p",{children:[s?"Don't have an account? ":"Already have an account? ",(0,X_.jsx)("button",{type:"button",className:"switch-btn",onClick:()=>{o(!s),g()},disabled:c,children:s?"Sign up":"Sign in"})]})}),(0,X_.jsxs)("div",{className:"auth-features",children:[(0,X_.jsxs)("div",{className:"feature",children:[(0,X_.jsx)("span",{className:"feature-icon",children:"\ud83d\udd04"}),(0,X_.jsx)("span",{children:"Sync progress across devices"})]}),(0,X_.jsxs)("div",{className:"feature",children:[(0,X_.jsx)("span",{className:"feature-icon",children:"\ud83c\udfc6"}),(0,X_.jsx)("span",{children:"Track achievements & streaks"})]}),(0,X_.jsxs)("div",{className:"feature",children:[(0,X_.jsx)("span",{className:"feature-icon",children:"\ud83d\udcc8"}),(0,X_.jsx)("span",{children:"Detailed learning analytics"})]})]})]})}):null},Eb=e=>{let{user:t,onLogout:n}=e;const{userData:r,userStats:s}=$_(),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),u=e=>e?e.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2):"?",h={totalXP:(null===s||void 0===s?void 0:s.totalXP)||(null===r||void 0===r?void 0:r.totalXP)||0,currentStreak:(null===s||void 0===s?void 0:s.currentStreak)||(null===r||void 0===r?void 0:r.currentStreak)||0,lessonsCompleted:(null===s||void 0===s?void 0:s.lessonsCompleted)||(null===r||void 0===r?void 0:r.lessonsCompleted)||0,averageAccuracy:(null===s||void 0===s?void 0:s.averageAccuracy)||(null===r||void 0===r?void 0:r.averageAccuracy)||0,level:(null===s||void 0===s?void 0:s.level)||(null===r||void 0===r?void 0:r.level)||1};return console.log("UserProfile render - displayStats:",h),console.log("userStats:",s),console.log("userData:",r),(0,X_.jsxs)("div",{className:"user-profile",children:[(0,X_.jsxs)("button",{className:"profile-button",onClick:()=>a(!o),children:[(0,X_.jsx)("div",{className:"profile-avatar",children:u((null===t||void 0===t?void 0:t.displayName)||(null===r||void 0===r?void 0:r.displayName))}),(0,X_.jsx)("span",{className:"profile-name",children:(null===t||void 0===t?void 0:t.displayName)||(null===r||void 0===r?void 0:r.displayName)||"User"}),(0,X_.jsx)("span",{className:"dropdown-arrow ".concat(o?"open":""),children:"\u25bc"})]}),o&&(0,X_.jsxs)(X_.Fragment,{children:[(0,X_.jsx)("div",{className:"dropdown-overlay",onClick:()=>a(!1)}),(0,X_.jsxs)("div",{className:"profile-dropdown",children:[(0,X_.jsxs)("div",{className:"dropdown-header",children:[(0,X_.jsx)("div",{className:"profile-avatar large",children:u((null===t||void 0===t?void 0:t.displayName)||(null===r||void 0===r?void 0:r.displayName))}),(0,X_.jsxs)("div",{className:"profile-info",children:[(0,X_.jsx)("h3",{children:(null===t||void 0===t?void 0:t.displayName)||(null===r||void 0===r?void 0:r.displayName)||"User"}),(0,X_.jsx)("p",{children:null===t||void 0===t?void 0:t.email})]})]}),(0,X_.jsxs)("div",{className:"dropdown-stats",children:[(0,X_.jsxs)("div",{className:"stat",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,X_.jsxs)("div",{children:[(0,X_.jsx)("div",{className:"stat-value",children:h.totalXP}),(0,X_.jsx)("div",{className:"stat-label",children:"Total XP"})]})]}),(0,X_.jsxs)("div",{className:"stat",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\ud83d\udd25"}),(0,X_.jsxs)("div",{children:[(0,X_.jsx)("div",{className:"stat-value",children:h.currentStreak}),(0,X_.jsx)("div",{className:"stat-label",children:"Day Streak"})]})]}),(0,X_.jsxs)("div",{className:"stat",children:[(0,X_.jsx)("span",{className:"stat-icon",children:"\ud83d\udcda"}),(0,X_.jsxs)("div",{children:[(0,X_.jsx)("div",{className:"stat-value",children:h.lessonsCompleted}),(0,X_.jsx)("div",{className:"stat-label",children:"Lessons"})]})]})]}),(0,X_.jsxs)("div",{className:"dropdown-info",children:[(0,X_.jsxs)("div",{className:"info-item",children:[(0,X_.jsx)("span",{children:"Member since"}),(0,X_.jsx)("span",{children:(e=>{if(!e)return"Unknown";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString()})(null===r||void 0===r?void 0:r.createdAt)})]}),(0,X_.jsxs)("div",{className:"info-item",children:[(0,X_.jsx)("span",{children:"Average accuracy"}),(0,X_.jsxs)("span",{children:[h.averageAccuracy,"%"]})]}),(0,X_.jsxs)("div",{className:"info-item",children:[(0,X_.jsx)("span",{children:"Level"}),(0,X_.jsx)("span",{children:h.level})]})]}),(0,X_.jsx)("div",{className:"dropdown-actions",children:(0,X_.jsxs)("button",{className:"logout-btn",onClick:async()=>{c(!0);(await Y_.logout()).success&&n(),c(!1),a(!1)},disabled:l,children:[l?"\u23f3":"\ud83d\udeaa",l?"Signing out...":"Sign Out"]})})]})]})]})},kb=()=>{const{achievements:e,dismissAchievements:t}=$_(),[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)(0),a=(0,i.useCallback)((()=>{r(!1),setTimeout((()=>{t(),o(0)}),300)}),[t]);if((0,i.useEffect)((()=>{e.length>0&&(r(!0),o(0))}),[e]),(0,i.useEffect)((()=>{if(n&&e.length>0){const e=setTimeout((()=>{a()}),5e3);return()=>clearTimeout(e)}}),[n,e.length,a]),!n||0===e.length)return null;const l=e[s];return(0,X_.jsx)("div",{className:"achievement-notification ".concat(n?"show":""),children:(0,X_.jsxs)("div",{className:"achievement-content",children:[(0,X_.jsx)("button",{className:"close-achievement",onClick:a,children:"\xd7"}),(0,X_.jsx)("div",{className:"achievement-icon",children:l.icon}),(0,X_.jsxs)("div",{className:"achievement-text",children:[(0,X_.jsx)("h3",{children:"Achievement Unlocked!"}),(0,X_.jsx)("p",{children:l.name}),(0,X_.jsx)("small",{children:l.description})]})]})})};class Tb extends i.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,X_.jsx)("div",{className:"error-boundary",children:(0,X_.jsxs)("div",{className:"error-container",children:[(0,X_.jsx)("h2",{children:"\ud83d\udea8 Something went wrong"}),(0,X_.jsx)("p",{children:"We're sorry, but something unexpected happened."}),(0,X_.jsx)("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},className:"error-retry-btn",children:"Try Again"}),!1]})}):this.props.children}}const Sb=Tb;function Cb(){const{user:e,loading:t,handleAuthSuccess:n,handleLogout:r}=$_(),[s,o]=(0,i.useState)(!1);return(()=>{const e=(0,i.useRef)(null);(0,i.useEffect)((()=>{e.current=window.innerHeight;const t=()=>{var t;const n=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||window.innerHeight,r=n<.75*e.current;document.documentElement.style.setProperty("--keyboard-open",r?"1":"0"),r?document.body.classList.add("keyboard-open"):document.body.classList.remove("keyboard-open"),window.visualViewport&&document.documentElement.style.setProperty("--viewport-height","".concat(n,"px"))};return window.visualViewport?window.visualViewport.addEventListener("resize",t):window.addEventListener("resize",t),t(),()=>{window.visualViewport?window.visualViewport.removeEventListener("resize",t):window.removeEventListener("resize",t),document.body.classList.remove("keyboard-open"),document.documentElement.style.removeProperty("--keyboard-open"),document.documentElement.style.removeProperty("--viewport-height")}}),[])})(),t?(0,X_.jsx)("div",{className:"luna-loading",children:"\ud83e\udd8a"}):(0,X_.jsxs)("div",{className:"App",children:[(0,X_.jsx)(bb,{isOpen:s,onClose:()=>o(!1),onAuthSuccess:e=>{n(e),o(!1)}}),e&&(0,X_.jsxs)("div",{className:"user-header",children:[(0,X_.jsxs)("div",{className:"app-title-small",children:[(0,X_.jsx)("span",{className:"luna-icon",children:"\ud83e\udd8a"}),(0,X_.jsx)("span",{children:"Lulearn"})]}),(0,X_.jsx)(Eb,{user:e,onLogout:r})]}),!e&&(0,X_.jsxs)("div",{className:"guest-header",children:[(0,X_.jsxs)("div",{className:"app-title-small",children:[(0,X_.jsx)("span",{className:"luna-icon",children:"\ud83e\udd8a"}),(0,X_.jsx)("span",{children:"Lulearn"})]}),(0,X_.jsx)("button",{className:"login-btn",onClick:()=>o(!0),children:"Login / Sign Up"})]}),(0,X_.jsx)(kb,{}),(0,X_.jsxs)(ye,{children:[(0,X_.jsx)(me,{path:"/",element:(0,X_.jsx)(eb,{})}),(0,X_.jsx)(me,{path:"/language-selection",element:(0,X_.jsx)(ib,{})}),(0,X_.jsx)(me,{path:"/lessons",element:(0,X_.jsx)(sb,{})}),(0,X_.jsx)(me,{path:"/lesson/:lessonId",element:(0,X_.jsx)(ob,{})}),(0,X_.jsx)(me,{path:"/results",element:(0,X_.jsx)(_b,{})}),(0,X_.jsx)(me,{path:"*",element:(0,X_.jsx)(fe,{to:"/",replace:!0})})]})]})}const Ib=function(){return(0,X_.jsx)(Sb,{children:(0,X_.jsx)(Z_,{children:(0,X_.jsx)(Ee,{basename:"/dudupe",children:(0,X_.jsx)(Cb,{})})})})};o.createRoot(document.getElementById("root")).render((0,X_.jsx)(i.StrictMode,{children:(0,X_.jsx)(Ib,{})}))})();
//# sourceMappingURL=main.17bee793.js.map